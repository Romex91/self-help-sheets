{"version":3,"sources":["Popup.tsx","MoodPicker.tsx","Entry.tsx","VirtualizedList.tsx","EntriesTable.tsx"],"names":["useStyles","makeStyles","theme","outer","position","popup","display","flexDirection","justifyContent","minWidth","zIndex","padding","background","palette","paper","border","borderRadius","Popup","React","forwardRef","props","ref","classes","in","className","Zoom","children","container","alignSelf","margin","cursor","borderColor","focused","backgroundColor","setupItem","isActive","fontSize","alignItems","icon","width","height","isSelected","emoji","userSelect","fontWeight","value","opacity","EmojiIcon","onClick","role","aria-label","text","String","fromCodePoint","codePoint","RadioIcon","selectedValue","SvgIcon","viewBox","y","fill","MoodSetupItem","onChange","MoodPicker","useState","setFocus","selectedRow","setSelectedRow","popupRef","useRef","moodsArray","length","activeEmojiArray","filter","x","rowCounter","Fragment","tabIndex","event","stopPropagation","onFocus","onBlur","current","contains","document","activeElement","onKeyDown","key","clone","onMoodArrayChange","inputRef","focus","preventDefault","map","Typography","variant","color","align","paperStyle","options","borderWidth","primary","light","inner","flex","breakpoints","up","input","marginTop","hasCreationTime","minHeight","hasMoods","down","date","marginBottom","paddingBottom","hint","whiteSpace","SubItem","setFocused","moodPickerFocused","setMoodPickerFocused","useEffect","undefined","creationTime","collapsed","autoFocus","Collapse","onExited","onCollapseExited","onEntered","window","getSelection","toString","moment","format","InputBase","fullWidth","multiline","placeholder","moodsText","onMoodsArrayChange","isEnabled","Hidden","xsDown","deleteXsDown","smUp","deleteSmUp","IconButton","disabled","example","size","onDelete","DateEntry","this","calendar","sameDay","lastDay","lastWeek","sameElse","Entry","initiallyCollapsed","entry","EntryModel","setCollapsed","colSpan","entryModel","onUpdate","setInitiallyCollapsed","data","EntryStatus","HIDDEN","show","moodsLeft","moodsRight","settings","i","emojiList","push","moodArrays","onEntryChanged","updatedEntry","alreadyFocused","isDataLoaded","lastChange","LastChange","EDIT_RIGHT","left","setLeft","target","leftHint","newLeftMoodArray","setMoodsLeft","Skeleton","right","setRight","_event","delete","rightHint","newRightMoodArray","setMoodsRight","VirtualizedItem","_ref","createRef","_resizeObserver","onHeightChanged","offsetHeight","ResizeObserver","observe","disconnect","ItemComponent","componentProps","PureComponent","VirtualizedList","scrollY","setScrollY","innerHeight","windowHeight","setWindowHeight","Map","realHeightsMap","setRealHeightsMap","memoisedComponentProps","useMemo","Object","values","useCallback","oldMap","newMap","set","keys","Set","entries","keysToDelete","forEach","_value","has","onResizeOrScroll","scrollableContainerRef","scrollTop","onscroll","addEventListener","removeEventListener","visibleEntries","currentHeight","placeholderTop","placeholderBottom","entryHeight","defaultHeight","get","unshift","PlaceholderComponent","Placeholder","rest","style","EntriesTable","withStyles","createStyles","scrollableContainer","overflow","willChange","grip","transitionDuration","transitionProperty","entriesTable","borderSpacing","verticalAlign","borderLeft","borderRight","secondary","buttonsContainer","borderBottom","buttons","state","canRedo","canUndo","onEntriesChanged","entriesWithDates","dateToInsert","currentCreationTime","getTime","getFullYear","getMonth","getDay","splice","setState","onKeyPress","e","model","undo","redo","addNewItemThrottled","scrollBy","_tableRef","_scrollableContainerRef","_columnResizer","_lastScrollTime","Date","now","top","requestAnimationFrame","timeSinceLastScroll","behavior","subscribe","assert","ColumnResizer","liveDrag","gripInnerHtml","onResize","dispatchEvent","Event","_","throttle","prevProps","unsubscribe","destroy","unobserve","navigator","platform","indexOf","handleFocusableElements","handleKeys","onKeyEvent","Grid","justify","spacing","item","xs","sm","appBarShown","onShowAppBar","Tooltip","title","isMacintosh","Button","cellPadding","cellSpacing"],"mappings":"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","file":"static/js/2.d28e509c.chunk.js","sourcesContent":["// Material ui popper is too slow buggy and overcomplicated.\r\n// Do not expect much from this popup. It doesn't respect screen boundaries etc.\r\n\r\nimport React from \"react\";\r\nimport { Zoom, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  outer: {\r\n    position: \"relative\",\r\n  },\r\n  popup: {\r\n    position: \"absolute\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    minWidth: 140,\r\n    zIndex: 2,\r\n    padding: 10,\r\n    background: theme.palette.background.paper,\r\n    border: \"gray solid 2px\",\r\n    borderRadius: 4,\r\n  },\r\n}));\r\n\r\nexport const Popup = React.forwardRef<\r\n  HTMLDivElement,\r\n  { children: JSX.Element | JSX.Element[]; in: boolean }\r\n>((props, ref) => {\r\n  const classes = useStyles();\r\n  if (!props.in) return null;\r\n  return (\r\n    <div ref={ref} className={classes.outer}>\r\n      <Zoom in={props.in}>\r\n        <div className={classes.popup}>{props.children}</div>\r\n      </Zoom>\r\n    </div>\r\n  );\r\n});\r\n","import React from \"react\";\nimport { Typography, makeStyles, SvgIcon } from \"@material-ui/core\";\nimport { Popup } from \"./Popup\";\nimport { MoodItem } from \"./Entry\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    alignSelf: \"flex-start\",\n    margin: 2,\n    cursor: \"pointer\",\n    borderColor: (focused) => (focused ? \"gray\" : \"#0000\"),\n    border: \"solid 2px\",\n    borderRadius: 4,\n    position: \"relative\",\n    backgroundColor: theme.palette.background.paper,\n  },\n  setupItem: {\n    border: \"2px solid\",\n    borderColor: (isActive) => (isActive ? \"darkgray\" : \"#0000\"),\n    borderRadius: 4,\n    fontSize: 20,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n\n  icon: {\n    cursor: \"pointer\",\n    width: 15,\n    margin: 0,\n    padding: \"4px 1px\",\n    height: \"30px\",\n    border: \"1px solid #0000\",\n\n    borderColor: (isSelected) => (isSelected ? \"gray\" : \"#0000\"),\n  },\n\n  emoji: {\n    userSelect: \"none\",\n    fontWeight: (value) => (value === 3 ? \"bold\" : \"unset\"),\n    opacity: (value) => (value === 3 ? 1 : value === 2 ? 0.7 : 0.3),\n  },\n}));\n\nfunction EmojiIcon(\n  props: MoodItem & {\n    onClick?(): void;\n  }\n) {\n  const classes = useStyles(props.value);\n  return (\n    <span\n      onClick={props.onClick}\n      className={classes.emoji}\n      role=\"img\"\n      aria-label={props.text}\n    >\n      {String.fromCodePoint(props.codePoint)}\n    </span>\n  );\n}\n\nfunction RadioIcon(props: {\n  onClick(): void;\n  selectedValue: number;\n  value: number;\n}) {\n  const classes = useStyles(props.selectedValue === props.value);\n\n  const height = 5 * (3 - props.value) + 1;\n  return (\n    <SvgIcon\n      className={classes.icon}\n      viewBox=\"1 1 7 15\"\n      onClick={props.onClick}\n    >\n      <rect\n        y={height}\n        width=\"9\"\n        height={16 - height}\n        fill={props.value <= props.selectedValue ? \"red\" : \"lightGray\"}\n      />\n    </SvgIcon>\n  );\n}\n\nfunction MoodSetupItem(\n  props: MoodItem & {\n    onChange(value: number): void;\n    isActive: boolean;\n  }\n) {\n  const classes = useStyles(props.isActive);\n  return (\n    <div className={classes.setupItem}>\n      <EmojiIcon\n        value={3}\n        codePoint={props.codePoint}\n        text={props.text}\n        onClick={() => props.onChange((props.value + 1) % 4)}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(0)}\n        selectedValue={props.value}\n        value={0}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(1)}\n        selectedValue={props.value}\n        value={1}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(2)}\n        selectedValue={props.value}\n        value={2}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(3)}\n        selectedValue={props.value}\n        value={3}\n      />\n    </div>\n  );\n}\n\nexport function MoodPicker(props: {\n  moodsArray: MoodItem[];\n  onMoodArrayChange(newArray: MoodItem[]): void;\n  onFocus(): void;\n  onBlur(): void;\n  inputRef: React.RefObject<HTMLInputElement>;\n  text: string;\n}): JSX.Element | null {\n  const [focused, setFocus] = React.useState(false);\n\n  // eslint-disable-next-line prefer-const\n  let [selectedRow, setSelectedRow] = React.useState(-1);\n\n  const popupRef = React.useRef<HTMLDivElement>(null);\n  const classes = useStyles(focused);\n\n  const onClick = (event: React.MouseEvent) => {\n    event.stopPropagation();\n  };\n\n  const onFocus = () => {\n    props.onFocus();\n    setFocus(true);\n  };\n\n  const onBlur = () => {\n    if (\n      popupRef.current &&\n      !popupRef.current.contains(document.activeElement)\n    ) {\n      setFocus(false);\n      props.onBlur();\n    }\n  };\n\n  const onKeyDown = (event: React.KeyboardEvent) => {\n    if (event.key === \"ArrowLeft\") {\n      if (selectedRow < 0) setSelectedRow((selectedRow = 0));\n      if (selectedRow < props.moodsArray.length) {\n        const clone = [...props.moodsArray];\n        clone[selectedRow].value--;\n        if (clone[selectedRow].value < 0) {\n          clone[selectedRow].value = 3;\n        }\n        props.onMoodArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowRight\") {\n      if (selectedRow < 0) setSelectedRow((selectedRow = 0));\n      if (selectedRow < props.moodsArray.length) {\n        const clone = [...props.moodsArray];\n        clone[selectedRow].value++;\n        if (clone[selectedRow].value > 3) {\n          clone[selectedRow].value = 0;\n        }\n        props.onMoodArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowDown\") {\n      selectedRow++;\n      if (selectedRow >= props.moodsArray.length) {\n        selectedRow = 0;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"ArrowUp\") {\n      selectedRow--;\n      if (selectedRow < 0) {\n        selectedRow = props.moodsArray.length - 1;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"Escape\" || event.key === \"Enter\") {\n      props.inputRef.current?.focus();\n    } else {\n      return;\n    }\n\n    event.preventDefault();\n  };\n\n  if (props.moodsArray.length === 0) return null;\n\n  const activeEmojiArray = props.moodsArray.filter((x) => x.value > 0);\n\n  let rowCounter = 0;\n\n  return (\n    <React.Fragment>\n      <div\n        tabIndex={0}\n        onClick={onClick}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        className={classes.container}\n        onKeyDown={onKeyDown}\n      >\n        {activeEmojiArray.length > 0 ? (\n          activeEmojiArray.map((x) => (\n            <EmojiIcon\n              key={x.codePoint}\n              codePoint={x.codePoint}\n              text={x.text}\n              value={x.value}\n            />\n          ))\n        ) : (\n          <Typography variant=\"caption\" color=\"textSecondary\">\n            add mood\n          </Typography>\n        )}\n        <Popup in={focused} ref={popupRef}>\n          <Typography align=\"center\" variant=\"body1\">\n            {props.text}\n          </Typography>\n          <React.Fragment>\n            {props.moodsArray.map((x) => (\n              <MoodSetupItem\n                key={x.codePoint}\n                isActive={rowCounter++ === selectedRow}\n                codePoint={x.codePoint}\n                text={x.text}\n                value={x.value}\n                onChange={(value) => {\n                  props.onMoodArrayChange(\n                    props.moodsArray.map((y) =>\n                      y.codePoint === x.codePoint ? { ...y, value } : y\n                    )\n                  );\n                }}\n              />\n            ))}\n          </React.Fragment>\n          <Typography align=\"center\" variant=\"caption\">\n            Use arrow keys.\n          </Typography>\n        </Popup>{\" \"}\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport {\n  IconButton,\n  InputBase,\n  makeStyles,\n  Typography,\n  Collapse,\n  Hidden,\n  Theme,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport moment from \"moment\";\nimport { MoodPicker } from \"./MoodPicker\";\nimport { Popup } from \"./Popup\";\nimport { EntryModel, EntryStatus, LastChange } from \"./EntryModel\";\nimport { Settings, EmojiItem, HintData } from \"./Settings\";\n\nexport type MoodItem = EmojiItem & {\n  value: number;\n};\n\ninterface StyleOptions {\n  focused: boolean;\n  hasCreationTime: boolean;\n  hasMoods: boolean;\n}\n\nconst paperStyle = (theme: Theme) => ({\n  border: \"solid\",\n  borderRadius: 4,\n  backgroundColor: theme.palette.background.paper,\n  padding: (options: StyleOptions) => (options.focused ? 4 : 5),\n  borderWidth: (options: StyleOptions) => {\n    return options.focused === true ? 2 : 1;\n  },\n  borderColor: (options: StyleOptions) => {\n    return options.focused === true ? theme.palette.primary.light : \"gray\";\n  },\n});\n\nconst useStyles = makeStyles((theme) => ({\n  inner: {\n    display: \"flex\",\n    flex: 1,\n\n    flexDirection: \"column\",\n    position: \"relative\",\n    [theme.breakpoints.up(\"sm\")]: paperStyle(theme),\n  },\n  input: {\n    padding: \"0px 7px\",\n    marginTop: (options: StyleOptions) => (options.hasCreationTime ? 0 : 19),\n    minHeight: (options: StyleOptions) => (options.hasMoods ? 76 : 76 + 28),\n    alignItems: \"flex-start\",\n  },\n  outer: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexDirection: \"row\",\n    [theme.breakpoints.down(\"xs\")]: paperStyle(theme),\n  },\n  date: {\n    border: \"0px !important\",\n    marginBottom: \"0px !important\",\n    paddingBottom: \"0px !important\",\n  },\n  hint: {\n    backgroundColor: theme.palette.background.paper,\n    whiteSpace: \"pre-line\",\n  },\n}));\n\ninterface SubItemProps {\n  onFocus(alreadyFocused: boolean): void;\n  moodsText: string;\n  moodsArray: MoodItem[];\n  onDelete(): void;\n  creationTime?: Date;\n  onMoodsArrayChange(moodsArray: MoodItem[]): void;\n  onCollapseExited?: (node: HTMLElement) => void;\n  collapsed: boolean;\n  example: boolean;\n  deleteXsDown?: boolean;\n  deleteSmUp?: boolean;\n  autoFocus: boolean;\n  hint?: HintData;\n  value: string;\n  onChange(event: { target: { value: string } }): void;\n}\n\nfunction SubItem(props: SubItemProps) {\n  const [focused, setFocused] = React.useState(false);\n  const [moodPickerFocused, setMoodPickerFocused] = React.useState(false);\n\n  React.useEffect(() => {\n    if (focused) {\n      props.onFocus(true);\n    }\n  }, [focused, props.onFocus]);\n\n  const classes = useStyles({\n    hasCreationTime: props.creationTime != undefined,\n    hasMoods: props.moodsArray.length > 0,\n    focused: focused || moodPickerFocused,\n  });\n  const inputRef = React.useRef<HTMLInputElement>(null);\n\n  const onFocus = () => {\n    setFocused(true);\n    props.onFocus(false);\n  };\n\n  const onBlur = () => {\n    setFocused(false);\n  };\n\n  const onMoodPickerFocused = () => {\n    props.onFocus(false);\n    setMoodPickerFocused(true);\n  };\n\n  const onMoodPickerBlur = () => {\n    setMoodPickerFocused(false);\n  };\n\n  React.useEffect(() => {\n    if (!props.collapsed && props.autoFocus) {\n      inputRef.current?.focus();\n    }\n  }, [props.collapsed, props.autoFocus]);\n\n  return (\n    <Collapse\n      in={!props.collapsed}\n      onExited={props.onCollapseExited}\n      onEntered={() => {\n        if (props.autoFocus) {\n          inputRef.current?.focus();\n        }\n      }}\n    >\n      <div className={classes.outer}>\n        <div\n          className={classes.inner}\n          onClick={() => {\n            if (window.getSelection()?.toString().length === 0) {\n              inputRef.current?.focus();\n            }\n          }}\n        >\n          {props.creationTime && (\n            <Typography variant=\"caption\" color=\"textSecondary\" align=\"center\">\n              {moment(props.creationTime).format(\"h:mm a\")}\n            </Typography>\n          )}\n\n          <InputBase\n            className={classes.input}\n            fullWidth\n            multiline\n            placeholder={props.hint != undefined ? props.hint.text : \"\"}\n            inputRef={inputRef}\n            onFocus={onFocus}\n            onBlur={onBlur}\n            value={props.value}\n            onChange={props.onChange}\n          />\n          <MoodPicker\n            text={props.moodsText}\n            onMoodArrayChange={props.onMoodsArrayChange}\n            moodsArray={props.moodsArray}\n            inputRef={inputRef}\n            onFocus={onMoodPickerFocused}\n            onBlur={onMoodPickerBlur}\n          ></MoodPicker>\n          {props.hint != null &&\n            props.hint.isEnabled &&\n            props.value.length > 0 && (\n              <Popup in={focused}>\n                <Typography className={classes.hint} color=\"textSecondary\">\n                  {props.hint?.text}\n                </Typography>\n              </Popup>\n            )}\n        </div>\n\n        <Hidden xsDown={!props.deleteXsDown} smUp={!props.deleteSmUp}>\n          <IconButton\n            disabled={props.example}\n            aria-label=\"delete\"\n            size=\"small\"\n            onClick={props.onDelete}\n          >\n            <DeleteIcon\n              color={props.example ? \"disabled\" : \"action\"}\n              fontSize=\"small\"\n            ></DeleteIcon>\n          </IconButton>\n        </Hidden>\n      </div>\n    </Collapse>\n  );\n}\n\nexport class DateEntry {\n  key: string;\n  text: string;\n  focused = false;\n  constructor(date: Date) {\n    this.key = this.text = moment(date).calendar({\n      sameDay: \"[Today], MMM Do, ddd\",\n      lastDay: \"[Yesterday] , MMM Do, ddd\",\n      lastWeek: \"MMM Do YYYY, ddd\",\n      sameElse: \"MMM Do YYYY, ddd\",\n    });\n  }\n}\n\ninterface EntryProps {\n  onFocus?(): void;\n  onUpdate(entry: EntryModel, omitHistory: boolean): void;\n  entry: EntryModel | DateEntry;\n  settings?: Settings;\n  example: boolean;\n}\n\nexport const Entry = React.forwardRef<HTMLTableRowElement, EntryProps>(\n  (props, ref) => {\n    const classes = useStyles({\n      focused: false,\n      hasCreationTime: false,\n      hasMoods: false,\n    });\n\n    const initiallyCollapsed: boolean =\n      !(props.entry instanceof EntryModel) || props.entry.initiallyCollapsed;\n    const [collapsed, setCollapsed] = React.useState(initiallyCollapsed);\n    React.useEffect(() => {\n      if (initiallyCollapsed) {\n        setCollapsed(false);\n      }\n    }, [initiallyCollapsed]);\n\n    if (!(props.entry instanceof EntryModel)) {\n      return (\n        <tr ref={ref} className={classes.date}>\n          <td colSpan={2}>\n            <Collapse in={!collapsed}>\n              <Typography variant=\"body2\" align=\"center\" color=\"textSecondary\">\n                {props.entry.text}\n              </Typography>\n            </Collapse>\n          </td>\n        </tr>\n      );\n    }\n\n    const entryModel = props.entry as EntryModel;\n\n    React.useEffect(() => {\n      if (entryModel.initiallyCollapsed) {\n        props.onUpdate(entryModel.setInitiallyCollapsed(false), true);\n      }\n    }, [entryModel, props.onUpdate]);\n\n    React.useEffect(() => {\n      if (entryModel.data === EntryStatus.HIDDEN)\n        props.onUpdate(entryModel.show(), true);\n    });\n\n    const moodsLeft: MoodItem[] = [];\n    const moodsRight: MoodItem[] = [];\n\n    if (props.settings != null) {\n      for (let i = 0; i < props.settings.emojiList.length; i++) {\n        moodsLeft.push({\n          value:\n            entryModel.moodArrays[0][i] == null\n              ? 0\n              : entryModel.moodArrays[0][i],\n          ...props.settings.emojiList[i],\n        });\n        moodsRight.push({\n          value:\n            entryModel.moodArrays[1][i] == null\n              ? 0\n              : entryModel.moodArrays[1][i],\n          ...props.settings.emojiList[i],\n        });\n      }\n    }\n\n    const onEntryChanged = (updatedEntry: EntryModel) => {\n      props.onUpdate(updatedEntry, false);\n    };\n\n    const onFocus = (alreadyFocused: boolean) => {\n      if (entryModel.focused)\n        props.onUpdate(entryModel.setFocused(false), true);\n      if (!alreadyFocused && props.onFocus) props.onFocus();\n    };\n\n    return (\n      <tr ref={ref}>\n        <td key=\"issueElement\">\n          {entryModel.isDataLoaded() ? (\n            <SubItem\n              autoFocus={\n                entryModel.focused &&\n                entryModel.lastChange !== LastChange.EDIT_RIGHT\n              }\n              creationTime={entryModel.creationTime}\n              value={entryModel.left}\n              onChange={(event: { target: { value: string } }) =>\n                onEntryChanged(entryModel.setLeft(event.target.value))\n              }\n              onFocus={onFocus}\n              onDelete={() => {\n                setCollapsed(true);\n              }}\n              deleteXsDown\n              example={props.example}\n              collapsed={collapsed}\n              hint={props.settings?.leftHint}\n              moodsText=\"How do you feel now?\"\n              moodsArray={moodsLeft}\n              onMoodsArrayChange={(newLeftMoodArray: MoodItem[]) =>\n                onEntryChanged(\n                  entryModel.setMoodsLeft(newLeftMoodArray.map((x) => x.value))\n                )\n              }\n            ></SubItem>\n          ) : (\n            <Skeleton variant=\"rect\" height={135}></Skeleton>\n          )}\n        </td>\n\n        <td key=\"resolutionElement\">\n          {entryModel.isDataLoaded() ? (\n            <SubItem\n              autoFocus={\n                entryModel.focused &&\n                entryModel.lastChange === LastChange.EDIT_RIGHT\n              }\n              value={entryModel.right}\n              onChange={(event: { target: { value: string } }) =>\n                onEntryChanged(entryModel.setRight(event.target.value))\n              }\n              onFocus={onFocus}\n              deleteSmUp\n              example={props.example}\n              onDelete={() => {\n                setCollapsed(true);\n              }}\n              collapsed={collapsed}\n              // eslint-disable-next-line @typescript-eslint/no-unused-vars\n              onCollapseExited={(_event: unknown) =>\n                props.onUpdate(entryModel.delete(), false)\n              }\n              hint={props.settings?.rightHint}\n              moodsText=\"How do you feel after writing resolution?\"\n              moodsArray={moodsRight}\n              onMoodsArrayChange={(newRightMoodArray: MoodItem[]) =>\n                onEntryChanged(\n                  entryModel.setMoodsRight(\n                    newRightMoodArray.map((x) => x.value)\n                  )\n                )\n              }\n            />\n          ) : (\n            <Skeleton variant=\"rect\" height={135}></Skeleton>\n          )}\n        </td>\n      </tr>\n    );\n  }\n);\n","import React from \"react\";\n\ninterface VirtualizedItemProps<Entry, ComponentProps, RefType> {\n  onHeightChanged(entry: Entry, heigh: number): void;\n  entry: Entry;\n  ItemComponent: React.ForwardRefExoticComponent<\n    ComponentProps & { entry: Entry } & React.RefAttributes<RefType>\n  >;\n  componentProps: ComponentProps;\n}\n\nclass VirtualizedItem<\n  Entry,\n  ComponentProps,\n  RefType extends HTMLElement\n> extends React.PureComponent<\n  VirtualizedItemProps<Entry, ComponentProps, RefType>\n> {\n  private _ref = React.createRef<RefType>();\n  _resizeObserver?: ResizeObserver;\n\n  private onHeightChanged = () => {\n    if (this._ref.current) {\n      this.props.onHeightChanged(\n        this.props.entry,\n        this._ref.current.offsetHeight\n      );\n    }\n  };\n\n  componentDidMount() {\n    if (this._ref.current) {\n      this._resizeObserver = new ResizeObserver(this.onHeightChanged);\n      this._resizeObserver.observe(this._ref.current);\n    }\n  }\n\n  componentWillUnmount() {\n    if (this._resizeObserver) {\n      this._resizeObserver.disconnect();\n      this._resizeObserver = undefined;\n    }\n  }\n\n  render() {\n    const { ItemComponent, componentProps, entry } = this.props;\n\n    return <ItemComponent ref={this._ref} entry={entry} {...componentProps} />;\n  }\n}\n\ninterface VirtualizedListProps<Entry, ItemComponentProps, RefType> {\n  entries: Entry[];\n  defaultHeight: number;\n  scrollableContainerRef: React.RefObject<HTMLDivElement>;\n  ItemComponent: React.ForwardRefExoticComponent<\n    ItemComponentProps & { entry: Entry } & React.RefAttributes<RefType>\n  >;\n  PlaceholderComponent: React.ComponentType<{ height: number }>;\n  componentProps: ItemComponentProps;\n  example: boolean;\n}\n\nexport function VirtualizedList<\n  Entry extends { key: string; focused: boolean },\n  ItemComponentProps,\n  RefType extends HTMLElement\n>(\n  props: VirtualizedListProps<Entry, ItemComponentProps, RefType>\n): JSX.Element {\n  const [scrollY, setScrollY] = React.useState(0);\n  const [windowHeight, setWindowHeight] = React.useState(window.innerHeight);\n\n  const [realHeightsMap, setRealHeightsMap] = React.useState(new Map());\n  // Beware of maintainig VirtualizedItem pureness during refactoring.\n  // If one entry has changed it shouldn't lead to render() calls for other\n  // entries.\n\n  const memoisedComponentProps = React.useMemo(\n    () => ({ ...props.componentProps }),\n    Object.values(props.componentProps)\n  );\n\n  const onHeightChanged = React.useCallback((entry, height) => {\n    setRealHeightsMap((oldMap) => {\n      const newMap = new Map(oldMap);\n\n      newMap.set(entry.key, height);\n      return newMap;\n    });\n  }, []);\n\n  const keys = new Set(props.entries.map((x) => x.key));\n  const keysToDelete: string[] = [];\n  realHeightsMap.forEach((_value, key) => {\n    if (!keys.has(key)) {\n      keysToDelete.push(key);\n    }\n  });\n  if (keysToDelete.length > 0) {\n    setRealHeightsMap((oldMap) => {\n      const newMap = new Map(oldMap);\n      keysToDelete.forEach((key) => {\n        if (oldMap.has(key)) newMap.delete(key);\n      });\n      return newMap;\n    });\n  }\n\n  const onResizeOrScroll = () => {\n    if (props.scrollableContainerRef.current)\n      setScrollY(props.scrollableContainerRef.current.scrollTop);\n    setWindowHeight(window.innerHeight);\n  };\n\n  React.useEffect(() => {\n    if (props.scrollableContainerRef.current)\n      props.scrollableContainerRef.current.onscroll = onResizeOrScroll;\n    window.addEventListener(\"resize\", onResizeOrScroll);\n    return () => {\n      window.removeEventListener(\"resize\", onResizeOrScroll);\n    };\n  });\n\n  const visibleEntries: JSX.Element[] = [];\n  let currentHeight = 0;\n  let placeholderTop = 0;\n  let placeholderBottom = 0;\n\n  for (const entry of props.entries) {\n    let entryHeight = props.defaultHeight;\n    if (realHeightsMap.has(entry.key)) {\n      entryHeight = realHeightsMap.get(entry.key);\n    }\n\n    if (\n      !props.example &&\n      currentHeight + entryHeight < scrollY - window.innerHeight\n    ) {\n      if (entry.focused && !!props.scrollableContainerRef.current) {\n        props.scrollableContainerRef.current.scrollTop = currentHeight;\n      }\n\n      placeholderTop += entryHeight;\n    } else if (!!props.example || currentHeight < scrollY + 2 * windowHeight) {\n      visibleEntries.push(\n        <VirtualizedItem\n          key={entry.key}\n          onHeightChanged={onHeightChanged}\n          entry={entry}\n          ItemComponent={props.ItemComponent}\n          componentProps={memoisedComponentProps}\n        />\n      );\n    } else {\n      if (entry.focused && props.scrollableContainerRef.current) {\n        props.scrollableContainerRef.current.scrollTop = currentHeight;\n      }\n\n      placeholderBottom += entryHeight;\n    }\n    currentHeight += entryHeight;\n  }\n  if (placeholderTop !== 0) {\n    visibleEntries.unshift(\n      <props.PlaceholderComponent\n        height={placeholderTop}\n        key=\"placeholderTop\"\n      />\n    );\n  }\n\n  if (placeholderBottom !== 0) {\n    visibleEntries.push(\n      <props.PlaceholderComponent\n        height={placeholderBottom}\n        key=\"placeholderBottom\"\n      />\n    );\n  }\n\n  return <React.Fragment>{visibleEntries}</React.Fragment>;\n}\n","import React from \"react\";\nimport { Entry, DateEntry } from \"./Entry\";\nimport ColumnResizer from \"column-resizer\";\nimport _ from \"lodash\";\n\nimport {\n  withStyles,\n  createStyles,\n  WithStyles,\n  Button,\n  IconButton,\n  Grid,\n  Theme,\n  Tooltip,\n} from \"@material-ui/core\";\n\nimport { VirtualizedList } from \"./VirtualizedList\";\n\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\nimport { ArrowDropDown as ArrowIcon } from \"@material-ui/icons\";\n\nimport {\n  EntriesTableModel,\n  EntriesSubscriptionCallback,\n} from \"./EntriesTableModel\";\nimport { EntryModel } from \"./EntryModel\";\nimport { Settings } from \"./Settings\";\nimport assert from \"assert\";\n\nconst styles = (theme: Theme) =>\n  createStyles({\n    scrollableContainer: {\n      overflow: (props: { example: boolean }) =>\n        props.example ? \"hide\" : \"auto\",\n      flex: 1,\n      willChange: \"transform\",\n    },\n    grip: {\n      \"&:hover\": {\n        backgroundColor: \"#00F8\",\n        transitionDuration: \"0s\",\n      },\n      width: 8,\n      zIndex: 10,\n      position: \"absolute\",\n      height: \"100%\",\n      backgroundColor: \"#0000\",\n      cursor: \"col-resize\",\n      transitionProperty: \"background-color\",\n      transitionDuration: \"1s\",\n    },\n    entriesTable: {\n      width: \"100%\",\n      borderSpacing: 0,\n      \"& td\": {\n        padding: 2,\n        verticalAlign: \"top\",\n        borderLeft: \"5px solid #0000\",\n        // ColumnResizer sets it to \"hidden\". This cuts MoodPicker popups.\n        overflow: \"inherit !important\",\n      },\n      \"& td:nth-child(odd)\": {\n        borderRight: \"5px solid #0000\",\n        borderLeft: \"20px solid #0000\",\n      },\n\n      [theme.breakpoints.down(\"xs\")]: {\n        \"& thead\": {\n          display: \"none\",\n        },\n\n        \"& tbody tr\": {\n          display: \"grid\",\n          padding: 5,\n          marginBottom: 5,\n          borderRadius: 4,\n          border: \"1px solid\",\n          borderColor: theme.palette.text.secondary,\n        },\n\n        \"& td:nth-child(odd)\": {\n          borderRight: 0,\n          borderLeft: 0,\n        },\n\n        \"& tbody td\": {\n          display: \"block\",\n          borderLeft: 0,\n        },\n      },\n    },\n\n    buttonsContainer: {\n      backgroundColor: theme.palette.background.paper,\n      borderBottom: \"1px solid lightGray\",\n    },\n\n    buttons: {\n      display: \"flex\",\n      justifyContent: \"center\",\n    },\n  });\n\nfunction Placeholder(props: { height: number }) {\n  const { height, ...rest } = props;\n  return (\n    <tr {...rest}>\n      <td colSpan={2}>\n        <div style={{ height }} />\n      </td>\n    </tr>\n  );\n}\n\ninterface EntriesTableProps extends WithStyles<typeof styles> {\n  example: boolean;\n  model: EntriesTableModel;\n  appBarShown?: boolean;\n  onShowAppBar?(): void;\n  onFocus?(): void;\n}\n\ninterface EntriesTableState {\n  entries: (EntryModel | DateEntry)[];\n  settings?: Settings;\n  canRedo: boolean;\n  canUndo: boolean;\n}\n\nconst EntriesTable = withStyles(styles)(\n  class extends React.PureComponent<EntriesTableProps, EntriesTableState> {\n    state: EntriesTableState = {\n      entries: [],\n      canRedo: false,\n      canUndo: false,\n    };\n\n    private onEntriesChanged: EntriesSubscriptionCallback = (\n      entries,\n      settings,\n      { canRedo, canUndo }\n    ) => {\n      if (entries.length > 0) {\n        const entriesWithDates: (EntryModel | DateEntry)[] = [...entries];\n\n        let dateToInsert = entries[entries.length - 1].creationTime;\n        for (let i = entries.length - 2; i >= 0; i--) {\n          const currentCreationTime = entries[i].creationTime;\n\n          if (dateToInsert == null) {\n            dateToInsert = currentCreationTime;\n            continue;\n          }\n\n          if (\n            !this.props.example &&\n            (currentCreationTime == null ||\n              currentCreationTime.getTime() < dateToInsert.getTime())\n          ) {\n            continue;\n          }\n\n          if (\n            currentCreationTime != null &&\n            currentCreationTime.getFullYear() === dateToInsert.getFullYear() &&\n            currentCreationTime.getMonth() === dateToInsert.getMonth() &&\n            currentCreationTime.getDay() === dateToInsert.getDay()\n          ) {\n            continue;\n          }\n\n          entriesWithDates.splice(i + 1, 0, new DateEntry(dateToInsert));\n          dateToInsert = currentCreationTime;\n        }\n\n        if (dateToInsert != null) {\n          entriesWithDates.splice(0, 0, new DateEntry(dateToInsert));\n        }\n      }\n\n      this.setState({ entries, settings, canRedo, canUndo });\n    };\n\n    private scrollBy(top: number) {\n      requestAnimationFrame(() => {\n        if (this._scrollableContainerRef.current == null) return;\n        const timeSinceLastScroll = Date.now() - this._lastScrollTime;\n        this._lastScrollTime = Date.now();\n\n        this._scrollableContainerRef.current.scrollBy({\n          top,\n          behavior: timeSinceLastScroll > 300 ? \"smooth\" : \"auto\",\n        });\n      });\n    }\n\n    private onKeyPress: (key: string, e: React.KeyboardEvent) => void = (\n      key,\n      e\n    ) => {\n      if (key === \"ctrl+z\" || key === \"cmd+z\") {\n        this.props.model.undo();\n        e.preventDefault();\n      } else if (\n        key === \"ctrl+y\" ||\n        key === \"cmd+y\" ||\n        key === \"ctrl+shift+z\" ||\n        key === \"cmd+shift+z\"\n      ) {\n        this.props.model.redo();\n        e.preventDefault();\n      } else if (key === \"ctrl+enter\" || key === \"cmd+enter\") {\n        this.props.model.addNewItemThrottled();\n        e.preventDefault();\n      } else {\n        // When focused item goes out of |VirtualizedList| browsers reset active element to\n        // |docuent.body| and keypresses \"pageup/pagedown/up/down\" stop scrolling\n        // |scrollableContainer|.\n        // The code below is a workaround for that.\n\n        // Since |target| is focusable it is not |document.body|, hence this dirty workaround is\n        // unnecessary.\n        if ((e.target as HTMLElement).tabIndex === 0) return;\n\n        if (key === \"pageup\") {\n          this.scrollBy(-window.innerHeight * 0.8);\n          e.preventDefault();\n        } else if (key === \"pagedown\") {\n          this.scrollBy(window.innerHeight * 0.8);\n          e.preventDefault();\n        } else if (key === \"down\") {\n          this.scrollBy(100);\n          e.preventDefault();\n        } else if (key === \"up\") {\n          this.scrollBy(-100);\n          e.preventDefault();\n        }\n      }\n    };\n\n    private _tableRef = React.createRef<HTMLTableElement>();\n    private _scrollableContainerRef = React.createRef<HTMLDivElement>();\n    private _columnResizer?: ColumnResizer;\n    private _resizeObserver?: ResizeObserver;\n    private _lastScrollTime = Date.now();\n\n    componentDidMount() {\n      this.props.model.subscribe(this.onEntriesChanged);\n\n      if (this.props.example) return;\n\n      assert(this._tableRef.current);\n      this._columnResizer = new ColumnResizer(this._tableRef.current, {\n        liveDrag: true,\n        minWidth: 100,\n        gripInnerHtml: `<div class='${this.props.classes.grip}'></div>`,\n        onResize: () => {\n          // TextArea adjusts its height only when the browser window\n          // resizes. It ignores resize of its parent.\n          // This logic is encapsulated badly, you cannot change\n          // it without modifying library sources.\n          //\n          // So, the esiest way of forcing TextArea height adjustment is\n          // to dispatch a window resize event hoping that it\n          // won't break anything.\n          window.dispatchEvent(new Event(\"resize\"));\n        },\n      });\n\n      // this._columnResizer doesn't observe resizes of the table.\n      // It listens for browser window \"resize\" events instead.\n      // This doesn't play well when table content asynchronously adjusts\n      // its height listening for the same \"resize\" event.\n      window.removeEventListener(\"resize\", this._columnResizer.onResize);\n      this._resizeObserver = new ResizeObserver(\n        _.throttle(() => {\n          this._columnResizer?.onResize();\n        }, 200)\n      );\n      this._resizeObserver.observe(this._tableRef.current);\n    }\n\n    componentDidUpdate(prevProps: EntriesTableProps) {\n      if (this.props.model !== prevProps.model) {\n        prevProps.model.unsubscribe(this.onEntriesChanged);\n        this.props.model.subscribe(this.onEntriesChanged);\n      }\n    }\n\n    componentWillUnmount() {\n      this.props.model.unsubscribe(this.onEntriesChanged);\n\n      if (this.props.example) return;\n\n      this._columnResizer?.destroy();\n      if (this._tableRef.current)\n        this._resizeObserver?.unobserve(this._tableRef.current);\n    }\n\n    private isMacintosh() {\n      return navigator.platform.indexOf(\"Mac\") > -1;\n    }\n\n    render() {\n      return (\n        <React.Fragment>\n          <KeyboardEventHandler\n            handleFocusableElements\n            handleKeys={[\n              \"ctrl+z\",\n              \"cmd+z\",\n              \"ctrl+shift+z\",\n              \"cmd+shift+z\",\n              \"ctrl+y\",\n              \"cmd+y\",\n              \"ctrl+enter\",\n              \"cmd+enter\",\n              \"up\",\n              \"down\",\n              \"pagedown\",\n              \"pageup\",\n            ]}\n            onKeyEvent={this.onKeyPress}\n          />\n          {!this.props.example && (\n            <Grid\n              className={this.props.classes.buttonsContainer}\n              container\n              justify=\"space-between\"\n              spacing={0}\n            >\n              <Grid item xs={1} sm={2}>\n                {!this.props.appBarShown && (\n                  <IconButton size=\"small\" onClick={this.props.onShowAppBar}>\n                    <ArrowIcon color=\"primary\" />\n                  </IconButton>\n                )}\n              </Grid>\n              <Grid className={this.props.classes.buttons} item xs={6} sm={3}>\n                <Tooltip\n                  title={this.isMacintosh() ? \"Cmd + Enter\" : \"Ctrl + Enter\"}\n                >\n                  <Button\n                    size=\"small\"\n                    onClick={() => {\n                      this.props.model.addNewItemThrottled();\n                    }}\n                  >\n                    Add new item\n                  </Button>\n                </Tooltip>\n              </Grid>\n              <Grid className={this.props.classes.buttons} item xs={5} sm={2}>\n                <Tooltip title={this.isMacintosh() ? \"Cmd + Z\" : \"Ctrl + Z\"}>\n                  <Button\n                    fullWidth\n                    size=\"small\"\n                    onClick={this.props.model.undo}\n                    disabled={!this.state.canUndo}\n                  >\n                    Undo\n                  </Button>\n                </Tooltip>\n                <Tooltip\n                  title={\n                    this.isMacintosh() ? \"Cmd + Shift + Z\" : \"Ctrl + Shift + Z\"\n                  }\n                >\n                  <Button\n                    fullWidth\n                    size=\"small\"\n                    disabled={!this.state.canRedo}\n                    onClick={this.props.model.redo}\n                  >\n                    Redo\n                  </Button>\n                </Tooltip>\n              </Grid>\n            </Grid>\n          )}\n\n          <div\n            ref={this._scrollableContainerRef}\n            className={this.props.classes.scrollableContainer as string}\n          >\n            <table\n              cellPadding={0}\n              cellSpacing={0}\n              className={this.props.classes.entriesTable}\n              ref={this._tableRef}\n            >\n              {/* ColumnResizer doesn't work without thead */}\n              <thead>\n                <tr>\n                  <th></th>\n                  <th></th>\n                </tr>\n              </thead>\n\n              <tbody>\n                <VirtualizedList\n                  entries={this.state.entries}\n                  ItemComponent={Entry}\n                  PlaceholderComponent={Placeholder}\n                  scrollableContainerRef={this._scrollableContainerRef}\n                  componentProps={{\n                    onUpdate: this.props.model.onUpdate,\n                    onFocus: this.props.onFocus,\n                    settings: this.state.settings,\n                    example: this.props.example,\n                  }}\n                  example={this.props.example}\n                  defaultHeight={80}\n                />\n              </tbody>\n            </table>\n          </div>\n        </React.Fragment>\n      );\n    }\n  }\n);\n\nexport default EntriesTable;\n"],"sourceRoot":""}
(this["webpackJsonpself-help-sheets"]=this["webpackJsonpself-help-sheets"]||[]).push([[3],{10:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return u}));var r,a=n(2),i=n.n(a),s=n(3),o=n(12),c=n(9);!function(e){e.LOADING="loading",e.SIGNED_IN="signed_in",e.SIGNED_OUT="signed_out",e.FAILED="failed"}(r||(r={}));var u=function(){function e(){Object(o.a)(this,e),this._state=r.LOADING,this._stateListeners=new Set}return Object(c.a)(e,[{key:"notifyStateChanged",value:function(){for(var e=0,t=Array.from(this._stateListeners);e<t.length;e++){(0,t[e])(this._state)}}},{key:"addStateListener",value:function(e){console.assert(!this._stateListeners.has(e)),this._stateListeners.add(e)}},{key:"removeStateListener",value:function(e){console.assert(this._stateListeners.has(e)),this._stateListeners.delete(e)}},{key:"waitForStateChange",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.addStateListener((function n(r){t.removeStateListener(n),e(r)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"state",get:function(){return this._state}}]),e}()},120:function(e,t,n){},122:function(e,t,n){},156:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),s=n.n(i),o=(n(120),n(2)),c=n.n(o),u=n(3),l=n(19),h=(n(122),n(123),n(194)),d=n(103),p=n(197),f=n(198),m=n(196),v=n(69),y=n(16),g=n(100),b=n(195),w=n(187),k=n(157),_=n(184),E=n(200),x=n(189),O=n(190),I=n(191),j=n(192),S=n(193),D=n(201),T=n(105),A=n(32),C=n(24),N=n(21),M=n(12),L=n(9),R=n(27),B=n(59),H=n(58),K=n(37),P=n(53),G=function(e){e.active;return a.a.createElement("div",{style:{display:"flex",padding:10}},a.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"#000",fillRule:"evenodd"},a.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),a.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),a.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),a.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),a.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))},F=n(10),W=n(186),z=n(199),V=n(185),U=function(e){var t=e.children;return a.a.createElement("span",{style:{padding:10,paddingLeft:0,fontWeight:500}},t)},q={backgroundColor:"#fff",display:"inline-flex",alignItems:"center",color:"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif",cursor:"pointer"},J={opacity:.6},Y=Object(P.a)("setAuthState"),X=Object(P.a)("setButtonAnchor"),$=Object(P.a)("getButtonStyle"),Q=Object(P.a)("onClick"),Z=function(e){Object(B.a)(n,e);var t=Object(H.a)(n);function n(){var e;Object(M.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={authState:e.props.gdriveAuthClient.state,prevAuthState:e.props.gdriveAuthClient.LOADING,buttonAnchor:null},Object.defineProperty(Object(R.a)(e),Y,{writable:!0,value:function(t){e.setState((function(e){return Object(N.a)(Object(N.a)({},e),{},{prevAuthState:e.authState,authState:t})}))}}),Object.defineProperty(Object(R.a)(e),X,{writable:!0,value:function(t){e.setState((function(e){return Object(N.a)(Object(N.a)({},e),{},{buttonAnchor:t})}))}}),Object.defineProperty(Object(R.a)(e),$,{writable:!0,value:function(){return e.state.authState===F.b.FAILED||e.state.authState===F.b.LOADING?Object.assign({},q,J):q}}),Object.defineProperty(Object(R.a)(e),Q,{writable:!0,value:function(){var t=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.authState===F.b.SIGNED_IN?e.props.gdriveAuthClient.signOut():e.state.authState===F.b.SIGNED_OUT&&e.props.gdriveAuthClient.signIn();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),e}return Object(L.a)(n,[{key:"componentDidMount",value:function(){this.state.authState!==this.props.gdriveAuthClient.state&&Object(K.a)(this,Y)[Y](this.props.gdriveAuthClient.state),this.props.gdriveAuthClient.addStateListener(Object(K.a)(this,Y)[Y])}},{key:"componentWillUnmount",value:function(){this.props.gdriveAuthClient.removeStateListener(Object(K.a)(this,Y)[Y])}},{key:"render",value:function(){var e=this,t=function(){if(e.state.authState===F.b.FAILED)return a.a.createElement(z.a,{severity:"error"},"Failed connecting to google. Check your connection and try reloading the page.");if(e.state.authState===F.b.SIGNED_OUT){if(e.state.prevAuthState===F.b.SIGNED_IN)return a.a.createElement(z.a,{severity:"warning"},a.a.createElement(V.a,null,"Privacy note!"),"If other people have access to this browser ",a.a.createElement("br",null),"AND you don't want them to read your sheets: ",a.a.createElement("br",null),a.a.createElement("ol",null,a.a.createElement("li",null,"sign out globally: ",a.a.createElement("br",null),a.a.createElement("a",{href:"https://accounts.google.com/Logout"},"https://accounts.google.com/Logout")),a.a.createElement("li",null,"delete Google account password from the browser")));if(e.state.prevAuthState===F.b.LOADING)return a.a.createElement(z.a,{severity:"info"},"This site stores data in a hidden Google Drive folder. ",a.a.createElement("br",null),"Sign in to proceed.",a.a.createElement("br",null))}}();return a.a.createElement("button",{ref:function(t){return Object(K.a)(e,X)[X](t)},onClick:Object(K.a)(this,Q)[Q],style:Object(K.a)(this,$)[$](),type:"button"},a.a.createElement(G,{key:0,active:this.state.active}),a.a.createElement(U,{key:2},this.state.authState===F.b.SIGNED_IN?"Sign Out":"Sign In "),!!t&&!!this.state.buttonAnchor&&a.a.createElement(W.a,{key:1,style:{zIndex:1200},open:!0,anchorEl:this.state.buttonAnchor,placement:"bottom-end",disablePortal:!1,modifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1},hide:{enabled:!1},offset:{offset:"0,5"}}},t))}}]),n}(a.a.PureComponent),ee=n(188),te=n(43),ne=n(81),re=n(99),ae=n.n(re),ie=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,241))})),se=function(){function e(){Object(M.a)(this,e)}return Object(L.a)(e,[{key:"unsubscribe",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onSettingsUpdate",value:function(){}},{key:"addNewItem",value:function(){}},{key:"addNewItemThrottled",value:function(){}},{key:"undo",value:function(){}},{key:"redo",value:function(){}},{key:"sync",value:function(){}},{key:"dispose",value:function(){}},{key:"subscribe",value:function(e){e([new te.a("0",{left:"",right:""},"").setLeft("Mom is going to gift a cat to my beloved and not-at-all-annoying sister Ann. It's a disaster. My life is going to turn into a living nightmare!").setRight("I kept in secret the terrible dread I experience every time I see a cat,  but now I have to either come out or feel it daily.\n\nIt's not that bad.  I just need to overcome my shame of this fear and talk to Mom. I think I trust Mom about that. I'll calm down a little and talk to her.").setCreationTime(new Date(Date.now()-901e6)).setMoodsLeft([3,0,0,0,3]).setMoodsRight([1,0,0,0,2]),new te.a("1",{left:"",right:""},"").setLeft("I talked to Mom. She didn't believe me. Adults never repsect kids. I hate her for that! And what should I do now? I'm pissed off and scared at the same time.").setRight("I need to leave home. Probably Gran won't mind if I live with her. If she minds I'll go homeless!\n\nIt is better to live on the street than in a house where nobody respects you.\n\n10 minutes later: Okay, I think I overreacted. She wasn't disrespectful. She didn't believe me because: \n 1) The situation is ridiculously hard to believe \n 2) I am always at war with my dear sister \n 3) I lied to Mom previously. \n\nGood news: Gran doesn't mind me living with her. But actually, I am not that enthusiastic about leaving home.\nI think it is time to start working with my fear. The closer the cat, the more practice I have. Maybe, the cat won't be that horrific.\n\nIf I fail I can flee to Gran's house anytime.").setCreationTime(new Date(Date.now()-9e8)).setMoodsLeft([3,0,0,0,3,0,3]).setMoodsRight([1,0,0,0,2,0,0,0]),new te.a("2",{left:"",right:""},"").setLeft("Ann overheard my conversation with Mom and gossiped my fear of cats to my classmates.\nThey meow every time they see me. The crappiest part is their meowing scares me and I cannot hide it.\nThey say I am dumb. Maybe they are right.").setRight("I shouldn't believe that I am dumb.\nI have good grades. It is not strong proof of high intelligence (dumb kids can have good grades if they apply themselves), but it is still a good sign. Actually, I don't see any evidence that I am dumb besides their words. My classmates are just kids they know no single thing about the world, why should I believe them? Another thing is, I am smart enough to understand that there is no good way to measure intelligence. I simply don't know whether I am smart or not.\nA butterfly with damaged wings still can fly. In the same way, even if I'm dumb I still can be happy. And I also can be a good person which is more important. \n\nI should stop thinking about my intelligence and focus on something constructive. I have to utterly destroy my sister!").setCreationTime(new Date(Date.now()-8e8)).setMoodsLeft([0,3,0,3]).setMoodsRight([0,0,0,0,0,0,3]),new te.a("3",{left:"",right:""},"").setLeft("Writing this diary takes time. I could have more fun if I stop writing it.").setRight("You know what else takes time? Your repetitive negative thoughts!\n\nThe diary helps. For example, I stopped worrying about my intelligence the moment I wrote about it. It doesn't waste my time, to the contrary, it helps me to avoid wasting my time thinking the same thought again and again. And I actually like the process of writing the diary. Why bother?").setCreationTime(new Date(Date.now()-1e6)).setMoodsLeft([1]).setMoodsRight([]),new te.a("4",{left:"",right:""},"").setLeft("I worry I'll give up the diary because it is less entertaining than videogames or netflix. ").setRight("I think this is a valid concern. I appreciate the effects this diary produces but they are not that addictive.\n\nIt is the same as tooth brushing, I need to form a habit.\n\nDad says that to form a habit I should avoid beating myself up and praise myself each time I do well. I think I'll try that approach. \n\nWhy not starting right now? I am actually proud of how constructive I am.  It is great that I write the diary regularly. Yes, I procrastinate sometimes, but this is not a problem! The main thing is sometimes I DON'T procrastinate. Great job!").setCreationTime(new Date(Date.now())).setMoodsLeft([0,2]).setMoodsRight([])],new ne.a(""),{canRedo:!1,canUndo:!1})}}]),e}(),oe=Object(k.a)((function(e){var t;return{article:(t={display:"grid",gridTemplateColumns:"[first-line] 1fr [last-line]"},Object(y.a)(t,e.breakpoints.up("sm"),{gridTemplateColumns:"[first-line] 1fr 1fr [last-line]"}),Object(y.a)(t,"gridGap","1rem"),Object(y.a)(t,"gridAutoFlow","dense"),Object(y.a)(t,"& h1, h4, h5",{textAlign:"center"}),Object(y.a)(t,"& h4, h5",{marginTop:0,marginBottom:5}),Object(y.a)(t,"& ul",{paddingLeft:20,marginTop:0}),Object(y.a)(t,"& section",{"& p":{marginTop:0},"& aside":{border:"1px solid lightGray",borderRadius:4,alignSelf:"center",maxWidth:500,margin:"0px 0px 20px 0px",padding:"10px 10px 0px 10px",backgroundColor:e.palette.background.aside},display:"flex",flexDirection:"column",justifyContent:"space-between",border:"1px solid lightGray",borderRadius:4,padding:"10px 10px 0px 10px",backgroundColor:e.palette.background.paper}),Object(y.a)(t,"& footer",{padding:20,paddingTop:0,display:"flex",justifyContent:"space-between",flexDirection:"row"}),t),stretched:{gridColumn:"first-line / last-line"},large:{gridRow:"span 2"},tableContainer:{background:"#0000 !important","& h4":{textAlign:"center",marginBottom:0},paddingBottom:"1em !important"}}})),ce=a.a.forwardRef((function(e,t){var n,i=oe();return a.a.createElement("article",{className:i.article,ref:t},a.a.createElement("h1",{className:i.stretched},"User Guide"),a.a.createElement("section",null,a.a.createElement("h4",null,"Privacy note"),a.a.createElement("p",null,"All your data will be stored in a hidden folder in your Google Drive account. The developers of this site will never have access to a single word you leave here.")),a.a.createElement("section",{className:i.large},a.a.createElement("h4",null,"What is this site? "),a.a.createElement("p",null,"This is a tool for altering your reactions to negative emotions. The main goal is to create a habit of questioning your thoughts."),a.a.createElement("aside",null,a.a.createElement("p",null,"This site is only a supplementary tool for cognitive behavioral therapy. It is in no way a replacement for consulting with a therapist. Please, get help!"),a.a.createElement("p",null,"To learn about cognitive behavioral therapy see"," ",a.a.createElement("a",{href:"https://feelinggood.com/"},"Feeling Good")," by David Burns."))),a.a.createElement("section",{className:i.large},a.a.createElement("h4",null," Why does questioning help? "),a.a.createElement("p",null,"A suffering mind tends to speak to itself coloring its view of the world negatively. Such thoughts don't help feeling good, instead they defend bad moods. Reactions to negative emotions become negative emotions themselves. When unhappy we tell ourselves every reason why we are unhappy and this talking produces more unhappiness. Writing is one of the ways of breaking this vicious circle."),a.a.createElement("p",null,"Negative thoughts are subconscious, they are crude and contain a lot of logical mistakes. By questioning our thoughts we are able to notice such mistakes. When a negative thought appears wrong we gain a choice to think constructively a possibility to help ourselves."),a.a.createElement("aside",null,a.a.createElement("p",null,"We learn a habit of non-constructive subconscious thinking very early in life. Changing old habits is a gradual process. This is why the first two ingredients of success are ",a.a.createElement("b",null,"persistence")," and"," ",a.a.createElement("b",null,"optimism"),"."))),a.a.createElement("section",null,a.a.createElement("h4",null,"How to use it?"),a.a.createElement("p",null,"When something bothers you open the site and click ",a.a.createElement("b",null,"ADD NEW ITEM")," ","(",a.a.createElement("b",null,"Ctrl+Enter"),") and just start answering questions."),a.a.createElement("p",null,"If some of the questions don't fit you click",a.a.createElement(_.a,{onClick:e.onOpenSettings,size:"small"},a.a.createElement(w.a,null)),"and change them."),a.a.createElement("aside",null,a.a.createElement("ul",null,a.a.createElement("label",null,a.a.createElement("h5",null,"Tips")),a.a.createElement("li",null,"No hurry! It is best to take time thinking before writing."),a.a.createElement("li",null,'Don\'t force yourself to write "correct" and "proper" answers. Just write what you think.')))),a.a.createElement("section",{className:ae()((n={},Object(y.a)(n,i.tableContainer,!0),Object(y.a)(n,i.stretched,!0),n))},a.a.createElement("h4",null,"A fictional example of a boy struggling with his fear of cats:"),a.a.createElement(r.Suspense,{fallback:a.a.createElement(A.a,null)},a.a.createElement(ie,{model:new se,example:!0}))),a.a.createElement("section",{className:i.stretched},a.a.createElement("h4",null,"Disclaimer"),a.a.createElement("p",null,'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'),a.a.createElement("aside",null,a.a.createElement("p",null,"This is an Open Source"," ",a.a.createElement("a",{href:"https://github.com/Romex91/self-help-sheets"},"project")," ","under the MIT License. ",a.a.createElement("br",null),"Report a bug or request a feature:"," ",a.a.createElement("a",{href:"https://github.com/Romex91/self-help-sheets/issues/new"},"issue form"),"."))),a.a.createElement("footer",{className:i.stretched},a.a.createElement("p",null," Copyright \xa9 2020 Roman Kuksin"),a.a.createElement(ee.a,{color:"primary",onClick:e.onClose},"Close")))})),ue=n(33),le=n(52),he=n.n(le),de=n(84),pe=n.n(de),fe=a.a.lazy((function(){return Promise.all([n.e(0),n.e(6),n.e(8)]).then(n.bind(null,243))})),me=Object(k.a)((function(e){return{buttonsContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalWindow:Object(y.a)({maxWidth:1e3,height:"90%",width:"90%",backgroundColor:e.palette.background.default,zIndex:1e3,borderRadius:4,overflow:"auto",display:"flex",padding:30},e.breakpoints.down("xs"),{padding:10})}}));function ve(e){var t=me(),n=function(){window.history.replaceState(null,""," "),e.setOpen(!1)};return e.open&&window.location.hash!=="#"+e.hashString&&(window.location.hash=e.hashString),a.a.createElement(a.a.Fragment,null,a.a.createElement(_.a,{edge:e.edge,onClick:function(){e.setOpen(!0)}},e.children[0]),a.a.createElement(E.a,{open:e.open,className:t.modal,onClose:n},a.a.createElement("div",{className:t.modalWindow},a.a.createElement(g.ErrorBoundary,{fallback:a.a.createElement(ue.a,null,"Something went wrong. ",a.a.createElement("br",null),"Reload the page. ",a.a.createElement("br",null),"\u0426_\u0426")},a.a.createElement(pe.a,{isExclusive:!0}),a.a.createElement(r.Suspense,{fallback:a.a.createElement(A.a,null)},a.a.cloneElement(e.children[1],{onClose:n}))))))}function ye(e){var t=a.a.useState("#settings"===window.location.hash),n=Object(l.a)(t,2),r=n[0],i=n[1],s=a.a.useState("#help"===window.location.hash||he()(window.navigator.userAgent)),o=Object(l.a)(s,2),c=o[0],u=o[1];a.a.useEffect((function(){var e=function(){i("#settings"===window.location.hash),u("#help"===window.location.hash||he()(window.navigator.userAgent))};return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}));var h=me();return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,{appear:!1,in:e.shown},a.a.createElement(O.a,null)),a.a.createElement(I.a,{appear:!1,direction:"down",in:e.shown},a.a.createElement(j.a,null,a.a.createElement(O.a,null,a.a.createElement(S.a,{container:!0,justify:"space-between"},a.a.createElement(D.a,{xsDown:!0},a.a.createElement(S.a,{item:!0,xs:4})),a.a.createElement(S.a,{item:!0,xs:4,className:h.titleContainer},a.a.createElement(D.a,{xsDown:!0},a.a.createElement(T.a,{variant:"h6",align:"center"},"Self-help sheets"),a.a.createElement(T.a,{variant:"caption",align:"center"},"Document your inner dialog")),a.a.createElement(D.a,{smUp:!0},a.a.createElement(T.a,{align:"center"},"Self-help sheets"))),a.a.createElement(S.a,{item:!0,className:h.buttonsContainer,xs:8,sm:4},a.a.createElement(ve,{hashString:"help",open:c,setOpen:u},a.a.createElement(b.a,null),a.a.createElement(ce,{onOpenSettings:function(){u(!1),i(!0)}})),a.a.createElement(ve,{open:r,setOpen:i,hashString:"settings",edge:"start"},a.a.createElement(w.a,null),a.a.createElement(fe,{model:e.model})),a.a.createElement(Z,{gdriveAuthClient:C.a})))))))}var ge=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,241))}));function be(e){var t=a.a.useState(C.a.state),n=Object(l.a)(t,2),i=n[0],s=n[1];return a.a.useEffect((function(){C.a.addStateListener(s)}),[]),i===F.b.SIGNED_OUT?a.a.createElement(ue.a,null,"Sign in to proceed..."):i===F.b.FAILED?a.a.createElement(ue.a,null,"S-meth#ng wen# wr00ng..^ Relo\ufffd\ufffd the page.",a.a.createElement("br",null),"Check th\ufffd\ufffd networ\ufffd con#5.0%^&",a.a.createElement("br",null)," \u041e\u0448\u0438\u0431\u043a\u0430 \u043c\u043e\u0434\u0443\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0442\u0435\u043a\u0441\u0442\u0430. \u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u044e\u0441\u044c \u043d\u0430 \u043a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439.",a.a.createElement("br",null),"\u7985"):a.a.createElement(r.Suspense,{fallback:a.a.createElement(A.a,{color:"primary"})},void 0==e.tableProps?a.a.createElement(A.a,{color:"secondary"}):a.a.createElement(ge,e.tableProps))}var we=n(101),ke=n(55),_e=n.n(ke),Ee=new(function(){function e(){Object(M.a)(this,e),this.settings_key=null}return Object(L.a)(e,[{key:"_getSettingsKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.settings_key){e.next=2;break}return e.abrupt("return",this.settings_key);case 2:return e.next=4,Re('name = "settings.json"');case 4:if(0!==(t=e.sent).length){e.next=9;break}return e.next=8,Ie("settings.json");case 8:return e.abrupt("return",e.sent);case 9:if(1!==t.length){e.next=11;break}return e.abrupt("return",t[0].id);case 11:return console.error("Invalid state. Multiple settings.json. "),n=Object(we.a)(t),r=n[0],n.slice(1).map((function(e){return He(e.id)})),e.abrupt("return",r.id);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Ie("item.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,He(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Te(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Me(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Ce(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Re('name = "item.json"');case 3:return(t=e.sent).forEach((function(e){e.description||(e.description="")})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.t0=Me,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:return t=e.sent,_e()(void 0!=t),e.abrupt("return",t);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.t0=Te,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.t2=t,e.next=8,(0,e.t0)(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.abrupt("return",Se(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}());function xe(){if(C.a.state!==F.b.SIGNED_IN)throw new Error("Incorrect state. Sign in to continue.")}function Oe(e){return e.then((function(e){if(e&&e.status&&(e.status<200||e.status>299))throw e;return e}))}function Ie(e){return je.apply(this,arguments)}function je(){return(je=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(window.gapi.client.drive.files.create({resource:{name:t,mimeType:"text/plain",parents:["appDataFolder"]},fields:"id"}));case 2:if((n=e.sent).result.id){e.next=5;break}throw new Error("GDrive created an empty file but didn't return |id| field. This shouldn't happen.");case 5:return e.abrupt("return",n.result.id);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Se(e,t){return De.apply(this,arguments)}function De(){return(De=Object(u.a)(c.a.mark((function e(t,n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"\r\n--"+(r="-------314159265358979323846")+"\r\n","\r\n--"+r+"--",a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify({description:n})+"\r\n---------314159265358979323846--",e.next=6,Oe(window.gapi.client.request({path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"multipart"},body:a,headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'}}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(window.gapi.client.request({path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"media"},body:n}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(window.gapi.client.request({path:"/drive/v3/files/".concat(t),method:"GET",params:{fields:"md5Checksum"}}));case 2:return n=e.sent,e.abrupt("return",n.result.md5Checksum);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(e){return Le.apply(this,arguments)}function Le(){return(Le=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(window.gapi.client.drive.files.get({fileId:t,alt:"media"}));case 3:return n=e.sent,e.abrupt("return",n.body);case 7:if(e.prev=7,e.t0=e.catch(0),404===e.t0.status){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Re(e){return Be.apply(this,arguments)}function Be(){return(Be=Object(u.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[];case 1:return e.next=3,Oe(window.gapi.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, description, md5Checksum), nextPageToken",pageSize:1e3,pageToken:r,orderBy:"createdTime",q:t}));case 3:if((a=e.sent).result.files){e.next=6;break}throw new Error("|gapi.client.drive.files.list| request is successful but doesn't contain |files| field.");case 6:n=n.concat(a.result.files.map((function(e){if(e.id&&e.md5Checksum)return{id:e.id,md5Checksum:e.md5Checksum,description:e.description};throw new Error("|gapi.client.drive.files.list| request is successful but some |files| miss |id| or |md5Checksum| fields.")}))),r=a.result.nextPageToken;case 8:if(r){e.next=1;break}case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(window.gapi.client.drive.files.delete({fileId:t}));case 3:return e.abrupt("return",!0);case 6:if(e.prev=6,e.t0=e.catch(0),404!==e.t0.status){e.next=10;break}return e.abrupt("return",!1);case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}Object.seal(Ee);var Pe=function(){function e(t){Object(M.a)(this,e),this._innerBackendMap=t}return Object(L.a)(e,[{key:"_exponentialRetry",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1;case 1:if(!(n<10)){e.next=16;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),r=1*Math.pow(2,n++),console.error("Failed running ".concat(t.name," : ").concat(e.t0.message,". Will try again after ").concat(r," seconds.")),e.next=14,this.sleep(1e3*r);case 14:e.next=1;break;case 16:throw new Error("Failed running ".concat(t.name," after 10 attemts."));case 17:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.createKey.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.delete.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.set.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.get.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getMd5.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getAllKeys.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getSettings.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setSettings.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setDescription.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),e}(),Ge=n(102),Fe=n.n(Ge),We=function(){function e(t){Object(M.a)(this,e),this._innerBackendMap=t,this._limiter=new Fe.a({maxConcurrent:5,minTime:50})}return Object(L.a)(e,[{key:"createKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.createKey()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.delete(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return r._innerBackendMap.set(t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.get(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.getMd5(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.getAllKeys()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.getSettings()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.setSettings(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return r._innerBackendMap.setDescription(t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ze=n(78),Ve=n.n(ze),Ue=n(70),qe=n.n(Ue),Je=n(94);var Ye=function(){function e(t){Object(M.a)(this,e),this._innerBackendMap=t,this._changeKeysMutex=new Je.a,this._innerKeys=void 0,this._chunks=new Map}return Object(L.a)(e,[{key:"createKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r,a,i,s=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(t=e.sent,e.prev=3,void 0!=this._innerKeys){e.next=6;break}throw new Error("You should call getAllKeys first");case 6:if(n=function(){if(s._innerKeys&&0!==s._innerKeys.length)return s._innerKeys[s._innerKeys.length-1]},0!==this._innerKeys.length&&!this._chunks.get(n()).isFull()){e.next=13;break}return e.next=10,this._innerBackendMap.createKey();case 10:r=e.sent,this._innerKeys.push(r),this._chunks.set(r,new Xe(this.createChunkConnector(r),void 0,""));case 13:return a=n(),e.next=16,this._chunks.get(a).createSubKey();case 16:return i=e.sent,e.abrupt("return",i+"-"+a);case 18:return e.prev=18,t(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(n=e.sent,e.prev=3,r=this.splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=7;break}return e.abrupt("return",!1);case 7:return e.next=9,this._chunks.get(i).delete(a);case 9:return e.abrupt("return",e.sent);case 10:return e.prev=10,n(),e.finish(10);case 13:case"end":return e.stop()}}),e,this,[[3,,10,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setValue(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Don't call getMd5 on this class. Server cannot compute md5 for this item because it is multiplexed.In order to sync call |getAllKeys| and see if some item has |outdated===true| and call |get| for them.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.splitOuterKey(t),r=n.prefixKey,a=n.innerKey,this._chunks.has(a)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",this._chunks.get(a).getValue(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n,r,a,i=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:return t=e.sent,e.prev=3,e.next=6,this._innerBackendMap.getAllKeys();case 6:return n=e.sent,r=[],a=new Map,n.forEach((function(e){var t=!0;if(i._chunks.has(e.id)){var n=i._chunks.get(e.id);a.set(e.id,n),t=n.onMetadataUpdate(e.description,e.md5Checksum).outdated}else{var s;a.set(e.id,new Xe(i.createChunkConnector(e.id),e.description,null!==(s=e.md5Checksum)&&void 0!==s?s:""))}var o=a.get(e.id);null===o||void 0===o||o.listSubKeys().forEach((function(n){r.push({id:n+"-"+e.id,outdated:t,description:null===o||void 0===o?void 0:o.getDescription(n)})}))})),this._chunks=a,this._innerKeys=n.map((function(e){return e.id})),e.abrupt("return",r);case 13:return e.prev=13,t(),e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[3,,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._innerBackendMap.getSettings();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:return n=e.sent,e.next=5,this._innerBackendMap.setSettings(t);case 5:n();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){var r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setDescription(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createChunkConnector",value:function(e){var t=this;return{setValue:function(n){t._innerBackendMap.set(e,n)},setDescription:function(n){t._innerBackendMap.setDescription(e,n)},getValue:function(){var n=Object(u.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._innerBackendMap.get(e);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),delete:function(){var n=Object(u.a)(c.a.mark((function n(){return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!=t._innerKeys){n.next=2;break}return n.abrupt("return",!1);case 2:return t._innerKeys.splice(t._innerKeys.indexOf(e),1),t._chunks.delete(e),n.next=6,t._innerBackendMap.delete(e);case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}()}}},{key:"splitOuterKey",value:function(e){var t=e.indexOf("-");return{prefixKey:Number(e.substring(0,t)),innerKey:e.substring(t+1)}}}]),e}(),Xe=function(){function e(t,n,r){var a=this;Object(M.a)(this,e),this._connector=t,this._serializedDescriptions=n,this._initialMd5Checksum=r,this._values=void 0,this._descriptions=void 0,this._serializedValues=void 0,this._isDirty=void 0,this.onValueSet=Ve.a.debounce((function(){a._serializedValues=JSON.stringify(a._values),a._connector.setValue(a._serializedValues)}),1e3),this.onDescriptionSet=Ve.a.debounce((function(){a._serializedDescriptions=a._descriptions.map((function(e){return void 0==e?"null":e})).join(","),a._connector.setDescription(a._serializedDescriptions)}),1e3),this._fetchPromise=void 0,void 0==n?(this._values=Array(8).fill(""),this._descriptions=[],this._isDirty=!0):(this._isDirty=!1,this._descriptions=n.split(",").map((function(e){return"null"===e?void 0:e})))}return Object(L.a)(e,[{key:"isFull",value:function(){return this._descriptions.length>=8}},{key:"listSubKeys",value:function(){for(var e=[],t=0;t<this._descriptions.length&&t<8;t++)void 0!=this._descriptions[t]&&e.push(t);return e}},{key:"createSubKey",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this._values){e.next=3;break}return e.next=3,this._fetchValuesSynchronised();case 3:if(void 0!=this._values){e.next=5;break}return e.abrupt("return",void 0);case 5:if(!this.isFull()){e.next=7;break}throw new Error("Do not call createSubKey for full chunks");case 7:return t=this._descriptions.length,this._descriptions.push(""),this.setDescription(t,""),e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this._descriptions[t]){e.next=2;break}throw new Error("item is already deleted");case 2:if(1!==this._descriptions.filter((function(e){return void 0!=e})).length){e.next=7;break}return e.next=5,this._connector.delete();case 5:e.next=8;break;case 7:this.setDescription(t,void 0);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!=this._values){e.next=3;break}return e.next=3,this._fetchValuesSynchronised();case 3:if(void 0!=this._values){e.next=5;break}return e.abrupt("return");case 5:this._values[t]=n,this._isDirty=!0,this._serializedValues=void 0,this.onValueSet();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==this._descriptions[t]){e.next=2;break}return e.abrupt("return",void 0);case 2:if(void 0!=this._values){e.next=5;break}return e.next=5,this._fetchValuesSynchronised();case 5:if(void 0!=this._values){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",this._values[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(e,t){if(e>=this._descriptions.length||void 0==this._descriptions[e])throw new Error("undefined description means subkey doesn't exist. Did you call createKey?");this._descriptions[e]=t,this._serializedDescriptions=void 0,this._isDirty=!0,this.onDescriptionSet()}},{key:"getDescription",value:function(e){return this._descriptions[e]}},{key:"onMetadataUpdate",value:function(e,t){return this._isDirty?(void 0!=this._serializedValues&&void 0!=this._serializedDescriptions&&qe()(this._serializedValues)===t&&this._serializedDescriptions===e&&(this._isDirty=!1,this._initialMd5Checksum=t),{outdated:!1}):(this._serializedDescriptions!==e&&void 0!=e&&(this._serializedDescriptions=e,this._descriptions=e.split(",").map((function(e){return"null"===e?void 0:e}))),this._initialMd5Checksum!==t?(this._serializedValues=void 0,this._values=void 0,{outdated:!0}):{outdated:!1})}},{key:"_fetchValuesSynchronised",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0==this._fetchPromise&&(this._fetchPromise=this.fetchValues().finally((function(){t._fetchPromise=void 0}))),e.next=3,this._fetchPromise;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchValues",value:function(){var e=Object(u.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._connector.getValue();case 2:if(t=e.sent,e.prev=3,t){e.next=6;break}throw new Error("Bad server data. Not valid array");case 6:if(n=JSON.parse(t),Array.isArray(n)){e.next=9;break}throw new Error("Bad server data. Not valid array");case 9:for(;n.length<this._descriptions.length;)n.push("");this._values=n,this._serializedValues=t,this._initialMd5Checksum=qe()(t),this._isDirty=!1,e.next=20;break;case 16:e.prev=16,e.t0=e.catch(3),console.error("Bad response from server:"+e.t0.message+" "+t),void 0==this._values&&(this._isDirty=!1,this._values=Array(8).fill(void 0),this._serializedValues=t,this._initialMd5Checksum=t?qe()(t):"");case 20:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(){return e.apply(this,arguments)}}()}]),e}();var $e=function(){var e=Object(h.a)("(prefers-color-scheme: dark)"),t=a.a.useMemo((function(){return Object(d.a)({palette:{type:e?"dark":"light",primary:{main:e?m.a[900]:v.a[800]},background:{default:e?"#303030":m.a[50],aside:e?"#777":"lightyellow"}}})}),[e]),r=a.a.useState(!0),i=Object(l.a)(r,2),s=i[0],o=i[1],y=a.a.useCallback((function(){window.innerHeight<700&&o(!1)}),[]),g=a.a.useCallback((function(){o(!0)}),[]),b=a.a.useState(void 0),w=Object(l.a)(b,2),k=w[0],_=w[1];a.a.useEffect((function(){var e=n.e(7).then(n.bind(null,233));C.a.addStateListener(function(){var t=Object(u.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==F.b.SIGNED_IN){t.next=8;break}return t.next=3,e;case 3:r=t.sent,a=r.EntriesTableModelImpl,_(new a(new Ye(new We(new Pe(Ee))),C.a)),t.next=9;break;case 8:_((function(e){e&&e.dispose()}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]);var E=k?{model:k,appBarShown:s,onShowAppBar:g,example:!1,onFocus:y}:void 0;return a.a.createElement(p.a,{theme:t},a.a.createElement(f.a,null),a.a.createElement(ye,{shown:s,model:k}),a.a.createElement(be,{tableProps:E}))},Qe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ze(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement($e,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/self-help-sheets",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/self-help-sheets","/service-worker.js");Qe?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ze(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ze(t,e)}))}}()},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var r=n(2),a=n.n(r),i=n(3),s=n(12),o=n(9),c=n(68),u=n(27),l=n(59),h=n(58),d=n(52),p=n.n(d),f=n(10),m=new(function(e){Object(l.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),e=t.call(this),p()(window.navigator.userAgent)?(e._state=f.b.SIGNED_OUT,e.notifyStateChanged(),Object(c.a)(e)):(function(e){console.assert("function"==typeof e),console.assert(0===e.length);var t=document.createElement("script");t.async=!0,t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=e,t.onerror=e}(Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,window.gapi){t.next=3;break}throw new Error("Failed loading GAPI");case 3:return t.next=5,new Promise((function(e){return window.gapi.load("client:auth2",e)}));case 5:return t.next=7,window.gapi.client.init({clientId:"479709565206-4ek8a502261s9sussiehpa5v146ns2ku.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.appfolder"});case 7:if(v()){t.next=9;break}throw new Error("Failed registering client_id.");case 9:e._updateSignInState(),window.gapi.auth2.getAuthInstance().isSignedIn.listen(e._updateSignInState.bind(Object(u.a)(e))),t.next=19;break;case 13:return t.prev=13,t.t0=t.catch(0),console.log(t.t0),e._state=f.b.FAILED,e.notifyStateChanged(),t.abrupt("return");case 19:case"end":return t.stop()}}),t,null,[[0,13]])})))),e)}return Object(o.a)(n,[{key:"signIn",value:function(){console.assert(v()),void 0!=window.mocha?window.gapi.auth2.getAuthInstance().signIn():window.gapi.auth2.getAuthInstance().signIn({prompt:"select_account"})}},{key:"signOut",value:function(){console.assert(v()),window.gapi.auth2.getAuthInstance().signOut()}},{key:"_updateSignInState",value:function(){console.assert(this._state!==f.b.FAILED);var e=(console.assert(v()),window.gapi.auth2.getAuthInstance().isSignedIn.get()?f.b.SIGNED_IN:f.b.SIGNED_OUT);this._state!==e&&(this._state=e,this.notifyStateChanged())}}]),n}(f.a));function v(){return window.gapi&&window.gapi.auth2&&window.gapi.client}},32:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=n(33),s=n(159);function o(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,null,a.a.createElement(s.a,e)))}},33:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(157),s=n(105),o=Object(i.a)({container:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}});function c(e){var t=o();return a.a.createElement("div",{className:t.container},a.a.createElement(s.a,Object.assign({align:"center",variant:"h4"},e),e.children))}},43:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return u}));var r,a,i=n(19),s=n(21),o=n(12),c=n(9);!function(e){e.LOADING="loading",e.HIDDEN="hidden",e.DELETED="deleted"}(r||(r={})),function(e){e[e.EDIT_LEFT=0]="EDIT_LEFT",e[e.EDIT_RIGHT=1]="EDIT_RIGHT",e[e.NONE=2]="NONE"}(a||(a={}));var u=function(){function e(t,n,r){Object(o.a)(this,e),this._key=t,this._data=n,this._initiallyCollapsed=void 0,this._focused=void 0,this._description="",this._moodArrays=[[],[]],this._creationTime=void 0,this.lastChange=a.NONE,this._initiallyCollapsed=!1,this._focused=!1,this.setDescriptionImpl(r)}return Object(c.a)(e,null,[{key:"isEntryData",value:function(e){var t=e;return void 0!==t.left&&void 0!==t.right}}]),Object(c.a)(e,[{key:"isDataLoaded",value:function(){return this._data!==r.LOADING&&this._data!==r.HIDDEN}},{key:"setDescription",value:function(e){var t=this.clone();return t.setDescriptionImpl(e),t}},{key:"setLeft",value:function(t){if(!e.isEntryData(this._data))return console.error("bad status"),this;var n=this.clone();return n._data=Object(s.a)(Object(s.a)({},this._data),{},{left:t}),n.lastChange=a.EDIT_LEFT,n}},{key:"setRight",value:function(t){if(!e.isEntryData(this._data))return console.error("bad status"),this;var n=this.clone();return n._data=Object(s.a)(Object(s.a)({},this._data),{},{right:t}),n.lastChange=a.EDIT_RIGHT,n}},{key:"setMoodsLeft",value:function(t){var n=this.setDescription(e._generateDescription(t,this._moodArrays[1],this._creationTime));return n.lastChange=a.EDIT_LEFT,n}},{key:"setMoodsRight",value:function(t){var n=this.setDescription(e._generateDescription(this._moodArrays[0],t,this._creationTime));return n.lastChange=a.EDIT_RIGHT,n}},{key:"setCreationTime",value:function(t){return this.setDescription(e._generateDescription(this._moodArrays[0],this._moodArrays[1],t))}},{key:"setInitiallyCollapsed",value:function(e){var t=this.clone();return t._initiallyCollapsed=e,t}},{key:"setFocused",value:function(e){var t=this.clone();return t._focused=e,t}},{key:"delete",value:function(){return new e(this._key,r.DELETED,r.DELETED)}},{key:"clear",value:function(){return new e(this._key,{left:"",right:""},"")}},{key:"show",value:function(){if(this._data!==r.HIDDEN)throw new Error("show() has been called for entry that is not hidden");return new e(this._key,r.LOADING,this._description)}},{key:"clone",value:function(){var t=new e(this._key,this.data,"");return t._moodArrays=this._moodArrays,t._creationTime=this._creationTime,t._description=this._description,t._initiallyCollapsed=this._initiallyCollapsed,t._focused=this._focused,t.lastChange=this.lastChange,t}},{key:"setDescriptionImpl",value:function(e){if(this._moodArrays=[[],[]],this._creationTime=void 0,this._description=e,e.length>0&&e!==r.DELETED){var t=e.split("-"),n=Object(i.a)(t,2),a=n[0],s=n[1],o=a.split(":").map((function(e){return Array.from(e).map((function(e){return Number(e)}))})),c=Object(i.a)(o,2),u=c[0],l=void 0===u?[]:u,h=c[1],d=void 0===h?[]:h;this._moodArrays=[l,d],this._creationTime=new Date(Number(s)),isNaN(this._creationTime.getTime())&&(this._creationTime=void 0)}}},{key:"data",get:function(){return this._data instanceof Object?Object(s.a)({},this._data):this._data}},{key:"key",get:function(){return this._key}},{key:"description",get:function(){return this.isDataLoaded()?this._description:""}},{key:"left",get:function(){return e.isEntryData(this._data)?this._data.left:""}},{key:"right",get:function(){return e.isEntryData(this._data)?this._data.right:""}},{key:"moodArrays",get:function(){return this._moodArrays}},{key:"creationTime",get:function(){return this._creationTime}},{key:"initiallyCollapsed",get:function(){return this._initiallyCollapsed}},{key:"focused",get:function(){return this._focused}}],[{key:"_generateDescription",value:function(e,t,n){var r;return r=e.every((function(e){return 0===e}))&&t.every((function(e){return 0===e}))?"":e.join("")+":"+t.join(""),void 0!=n&&(r=r+"-"+n.getTime()),r}}]),e}()},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(12),a=n(9),i=n(55),s=n.n(i),o=function(){function e(t){if(Object(r.a)(this,e),this._isEnabled=!1,this._text="","string"===typeof t){if(0===t.length)return;t=JSON.parse(t)}if(void 0==t||void 0==t.text||void 0==t.isEnabled)throw new Error("Wrong hint data "+JSON.stringify(t));this._isEnabled=t.isEnabled,this._text=t.text}return Object(a.a)(e,[{key:"setIsEnabled",value:function(t){return new e({isEnabled:t,text:this._text})}},{key:"setText",value:function(t){return new e({text:t,isEnabled:this._isEnabled})}},{key:"stringify",value:function(){var e={isEnabled:this.isEnabled,text:this.text};return JSON.stringify(e)}},{key:"isEnabled",get:function(){return this._isEnabled}},{key:"text",get:function(){return this._text}}]),e}(),c=function(){function e(t){Object(r.a)(this,e),this._emojiList=[],this._leftHint=new o(""),this._rightHint=new o("");try{if("string"===typeof t&&(t=JSON.parse(t)),s()("string"!==typeof t),!Array.isArray(t.emojiList)||!t.emojiList.every((function(e){return"string"===typeof String.fromCodePoint(e.codePoint)})))throw new Error("Bad emoji list: "+JSON.stringify(t));this._emojiList=t.emojiList,this._leftHint=new o(t.leftHint),this._rightHint=new o(t.rightHint)}catch(n){""!=t&&console.error("Settings format error: "+n.message),this.mutateToDefaults()}}return Object(a.a)(e,[{key:"setEmojiList",value:function(t){return new e({emojiList:t,leftHint:this._leftHint,rightHint:this._rightHint})}},{key:"setLeftHint",value:function(t){return new e({emojiList:this._emojiList,leftHint:t,rightHint:this._rightHint})}},{key:"setRightHint",value:function(t){return new e({emojiList:this._emojiList,leftHint:this._leftHint,rightHint:t})}},{key:"stringify",value:function(){return JSON.stringify({emojiList:this._emojiList,leftHint:this._leftHint.stringify(),rightHint:this._rightHint.stringify()})}},{key:"emojiList",get:function(){return this._emojiList}},{key:"leftHint",get:function(){return this._leftHint}},{key:"rightHint",get:function(){return this._rightHint}}]),Object(a.a)(e,[{key:"mutateToDefaults",value:function(){this._leftHint=new o({isEnabled:!0,text:"What happened?\nWhat were your immediate thoughts?"}),this._rightHint=new o({isEnabled:!0,text:"Why is it bad?\nWhat would your therapist say?\nIs your view of the problem biased?"}),this._emojiList=[{codePoint:128078,text:"discontent"},{codePoint:128552,text:"fear"},{codePoint:128546,text:"sadness"},{codePoint:128557,text:"grief"},{codePoint:128561,text:"horror"},{codePoint:128534,text:"pain"},{codePoint:128545,text:"anger"},{codePoint:129314,text:"disgust"}]}}]),e}()}},[[156,4,5]]]);
//# sourceMappingURL=main.0f38b36b.chunk.js.map
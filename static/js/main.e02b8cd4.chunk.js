(this["webpackJsonpself-help-sheets"]=this["webpackJsonpself-help-sheets"]||[]).push([[2],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return y}));var r=n(85),a=n(2),i=n.n(a),s=n(3),c=n(9),o=n(10),u=n(13),l=n(26),h=n(56),p=n.n(h),f={LOADING:"loading",SIGNED_IN:"signed_in",SIGNED_OUT:"signed_out",FAILED:"failed"};Object.freeze(f);var d=Object(l.a)("state"),m=Object(l.a)("stateListeners"),y=new(function(){function e(){var t=this;Object(c.a)(this,e),Object.defineProperty(this,d,{writable:!0,value:f.LOADING}),Object.defineProperty(this,m,{writable:!0,value:new Set}),p()(window.navigator.userAgent)&&(Object(u.a)(this,d)[d]=f.SIGNED_OUT,this._notifyStateChanged()),function(e){console.assert("function"==typeof e),console.assert(0===e.length);var t=document.createElement("script");t.async=!0,t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=e,t.onerror=e}(Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.gapi){e.next=3;break}throw new Error("Failed loading GAPI");case 3:return e.next=5,new Promise((function(e){return window.gapi.load("client:auth2",e)}));case 5:return e.next=7,window.gapi.client.init({clientId:"479709565206-4ek8a502261s9sussiehpa5v146ns2ku.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.appfolder"});case 7:if(g()){e.next=9;break}throw new Error("Failed registering client_id.");case 9:t._updateSignInState(),window.gapi.auth2.getAuthInstance().isSignedIn.listen(t._updateSignInState.bind(t)),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),Object(u.a)(t,d)[d]=f.FAILED,t._notifyStateChanged(),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[0,13]])}))))}return Object(o.a)(e,[{key:"addStateListener",value:function(e){console.assert("function"==typeof e),console.assert(1===e.length),console.assert(!Object(u.a)(this,m)[m].has(e)),Object(u.a)(this,m)[m].add(e)}},{key:"removeStateListener",value:function(e){console.assert("function"==typeof e),console.assert(1===e.length),console.assert(Object(u.a)(this,m)[m].has(e)),Object(u.a)(this,m)[m].delete(e)}},{key:"waitForStateChange",value:function(){var e=Object(s.a)(i.a.mark((function e(){var t=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.addStateListener((function n(r){t.removeStateListener(n),e(r)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"state",get:function(){return Object(u.a)(this,d)[d]}}]),Object(o.a)(e,[{key:"signIn",value:function(){console.assert(g()),window.mocha?window.gapi.auth2.getAuthInstance().signIn():window.gapi.auth2.getAuthInstance().signIn({prompt:"select_account"})}},{key:"signOut",value:function(){console.assert(g()),window.gapi.auth2.getAuthInstance().signOut()}},{key:"_notifyStateChanged",value:function(){var e,t=Object(r.a)(Object(u.a)(this,m)[m]);try{for(t.s();!(e=t.n()).done;){(0,e.value)(Object(u.a)(this,d)[d])}}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateSignInState",value:function(){console.assert(Object(u.a)(this,d)[d]!==f.FAILED);var e=(console.assert(g()),window.gapi.auth2.getAuthInstance().isSignedIn.get()?f.SIGNED_IN:f.SIGNED_OUT);Object(u.a)(this,d)[d]!==e&&(Object(u.a)(this,d)[d]=e,this._notifyStateChanged())}}]),e}());function g(){return window.gapi&&window.gapi.auth2&&window.gapi.client}Object.seal(y)},118:function(e,t,n){e.exports=n(155)},123:function(e,t,n){},125:function(e,t,n){},155:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(14),s=n.n(i),c=(n(123),n(2)),o=n.n(c),u=n(3),l=n(25),h=(n(125),n(126),n(193)),p=n(105),f=n(196),d=n(197),m=n(195),y=n(69),g=n(57),v=n(35),b=n(102),w=n(194),k=n(186),_=n(156),E=n(183),O=n(199),x=n(188),j=n(189),I=n(190),S=n(191),D=n(192),A=n(200),T=n(107),C=n(36),N=n(11),M=n(22),L=n(9),R=n(10),B=n(29),F=n(19),K=n(18),H=n(13),P=n(26),G=function(e){e.active;return a.a.createElement("div",{style:{display:"flex",padding:10}},a.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"#000",fillRule:"evenodd"},a.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),a.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),a.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),a.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),a.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))},W=n(185),q=n(198),z=n(184),V=function(e){var t=e.children;return a.a.createElement("span",{style:{padding:10,paddingLeft:0,fontWeight:500}},t)},U={backgroundColor:"#fff",display:"inline-flex",alignItems:"center",color:"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif",cursor:"pointer"},J={opacity:.6},Y=Object(P.a)("setAuthState"),X=Object(P.a)("setButtonAnchor"),$=Object(P.a)("getButtonStyle"),Q=Object(P.a)("onClick"),Z=function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={authState:e.props.gdriveAuthClient.state,prevAuthState:e.props.gdriveAuthClient.LOADING,buttonAnchor:null},Object.defineProperty(Object(B.a)(e),Y,{writable:!0,value:function(t){e.setState((function(e){return Object(M.a)(Object(M.a)({},e),{},{prevAuthState:e.authState,authState:t})}))}}),Object.defineProperty(Object(B.a)(e),X,{writable:!0,value:function(t){e.setState((function(e){return Object(M.a)(Object(M.a)({},e),{},{buttonAnchor:t})}))}}),Object.defineProperty(Object(B.a)(e),$,{writable:!0,value:function(){return e.state.authState===N.a.FAILED||e.state.authState===N.a.LOADING?Object.assign({},U,J):U}}),Object.defineProperty(Object(B.a)(e),Q,{writable:!0,value:function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.authState===N.a.SIGNED_IN?e.props.gdriveAuthClient.signOut():e.state.authState===N.a.SIGNED_OUT&&e.props.gdriveAuthClient.signIn();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),e}return Object(R.a)(n,[{key:"componentDidMount",value:function(){this.state.authState!==this.props.gdriveAuthClient.state&&Object(H.a)(this,Y)[Y](this.props.gdriveAuthClient.state),this.props.gdriveAuthClient.addStateListener(Object(H.a)(this,Y)[Y])}},{key:"componentWillUnmount",value:function(){this.props.gdriveAuthClient.removeStateListener(Object(H.a)(this,Y)[Y])}},{key:"render",value:function(){var e=this,t=function(){if(e.state.authState===N.a.FAILED)return a.a.createElement(q.a,{severity:"error"},"Failed connecting to google. Check your connection and try reloading the page.");if(e.state.authState===N.a.SIGNED_OUT){if(e.state.prevAuthState===N.a.SIGNED_IN)return a.a.createElement(q.a,{severity:"warning"},a.a.createElement(z.a,null,"Privacy note!"),"If other people have access to this browser ",a.a.createElement("br",null),"AND you don't want them to read your sheets: ",a.a.createElement("br",null),a.a.createElement("ol",null,a.a.createElement("li",null,"sign out globally: ",a.a.createElement("br",null),a.a.createElement("a",{href:"https://accounts.google.com/Logout"},"https://accounts.google.com/Logout")),a.a.createElement("li",null,"delete Google account password from the browser")));if(e.state.prevAuthState===N.a.LOADING)return a.a.createElement(q.a,{severity:"info"},"This site stores data in a hidden Google Drive folder. ",a.a.createElement("br",null),"Sign in to proceed.",a.a.createElement("br",null))}}();return a.a.createElement("button",{ref:function(t){return Object(H.a)(e,X)[X](t)},onClick:Object(H.a)(this,Q)[Q],style:Object(H.a)(this,$)[$](),type:"button"},a.a.createElement(G,{key:0,active:this.state.active}),a.a.createElement(V,{key:2},this.state.authState===N.a.SIGNED_IN?"Sign Out":"Sign In "),!!t&&!!this.state.buttonAnchor&&a.a.createElement(W.a,{key:1,style:{zIndex:1200},open:!0,anchorEl:this.state.buttonAnchor,placement:"bottom-end",disablePortal:!1,modifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1},hide:{enabled:!1},offset:{offset:"0,5"}}},t))}}]),n}(a.a.PureComponent),ee=n(187),te=n(86),ne=n(47),re=n(81),ae=n(101),ie=n.n(ae),se=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,239))})),ce=function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(R.a)(n,[{key:"subscribe",value:function(e){e([new ne.a(0).setLeft("Mom is going to gift a cat to my beloved and not-at-all-annoying sister Ann. It's a disaster. My life is going to turn into a living nightmare!").setRight("I kept in secret the terrible dread I experience every time I see a cat,  but now I have to either come out or feel it daily.\n\nIt's not that bad.  I just need to overcome my shame of this fear and talk to Mom. I think I trust Mom about that. I'll calm down a little and talk to her.").setCreationTime(new Date(Date.now()-901e6)).setEmojiLeft([3,0,0,0,3]).setEmojiRight([1,0,0,0,2]),new ne.a(1).setLeft("I talked to Mom. She didn't believe me. Adults never repsect kids. I hate her for that! And what should I do now? I'm pissed off and scared at the same time.").setRight("I need to leave home. Probably Gran won't mind if I live with her. If she minds I'll go homeless!\n\nIt is better to live on the street than in a house where nobody respects you.\n\n10 minutes later: Okay, I think I overreacted. She wasn't disrespectful. She didn't believe me because: \n 1) The situation is ridiculously hard to believe \n 2) I am always at war with my dear sister \n 3) I lied to Mom previously. \n\nGood news: Gran doesn't mind me living with her. But actually, I am not that enthusiastic about leaving home.\nI think it is time to start working with my fear. The closer the cat, the more practice I have. Maybe, the cat won't be that horrific.\n\nIf I fail I can flee to Gran's house anytime.").setCreationTime(new Date(Date.now()-9e8)).setEmojiLeft([3,0,0,0,3,0,3]).setEmojiRight([1,0,0,0,2,0,0,0]),new ne.a(2).setLeft("Ann overheard my conversation with Mom and gossiped my fear of cats to my classmates.\nThey meow every time they see me. The crappiest part is their meowing scares me and I cannot hide it.\nThey say I am dumb. Maybe they are right.").setRight("I shouldn't believe that I am dumb.\nI have good grades. It is not strong proof of high intelligence (dumb kids can have good grades if they apply themselves), but it is still a good sign. Actually, I don't see any evidence that I am dumb besides their words. My classmates are just kids they know no single thing about the world, why should I believe them? Another thing is, I am smart enough to understand that there is no good way to measure intelligence. I simply don't know whether I am smart or not.\nA butterfly with damaged wings still can fly. In the same way, even if I'm dumb I still can be happy. And I also can be a good person which is more important. \n\nI should stop thinking about my intelligence and focus on something constructive. I have to utterly destroy my sister!").setCreationTime(new Date(Date.now()-8e8)).setEmojiLeft([0,3,0,3]).setEmojiRight([0,0,0,0,0,0,3]),new ne.a(3).setLeft("Writing this diary takes time. I could have more fun if I stop writing it.").setRight("You know what else takes time? Your repetitive negative thoughts!\n\nThe diary helps. For example, I stopped worrying about my intelligence the moment I wrote about it. It doesn't waste my time, to the contrary, it helps me to avoid wasting my time thinking the same thought again and again. And I actually like the process of writing the diary. Why bother?").setCreationTime(new Date(Date.now()-1e6)).setEmojiLeft([1]).setEmojiRight([]),new ne.a(4).setLeft("I worry I'll give up the diary because it is less entertaining than videogames or netflix. ").setRight("I think this is a valid concern. I appreciate the effects this diary produces but they are not that addictive.\n\nIt is the same as tooth brushing, I need to form a habit.\n\nDad says that to form a habit I should avoid beating myself up and praise myself each time I do well. I think I'll try that approach. \n\nWhy not starting right now? I am actually proud of how constructive I am.  It is great that I write the diary regularly. Yes, I procrastinate sometimes, but this is not a problem! The main thing is sometimes I DON'T procrastinate. Great job!").setCreationTime(new Date(Date.now())).setEmojiLeft([0,2]).setEmojiRight([])],new re.a,{canRedo:!1,canUndo:!1})}},{key:"unsubscribe",value:function(){}},{key:"onUpdate",value:function(){}},{key:"onSettingsUpdate",value:function(){}},{key:"setIgnoreKeys",value:function(){}},{key:"addNewItem",value:function(){}},{key:"undo",value:function(){}},{key:"redo",value:function(){}},{key:"addNewItemThrottled",value:function(){}},{key:"sync",value:function(){}}]),n}(te.a),oe=Object(_.a)((function(e){return{article:{display:"grid",gridTemplateColumns:"[first-line] repeat(auto-fill, minmax(350px, 1fr)) [last-line]",gridGap:"1rem",gridAutoFlow:"dense","& h1, h4, h5":{textAlign:"center"},"& h4, h5":{marginTop:0,marginBottom:5},"& ul":{paddingLeft:20,marginTop:0},"& section":{"& p":{marginTop:0},"& aside":{border:"1px solid lightGray",borderRadius:4,alignSelf:"center",maxWidth:500,margin:"0px 0px 20px 0px",padding:"10px 10px 0px 10px",backgroundColor:e.palette.background.aside},display:"flex",flexDirection:"column",justifyContent:"space-between",border:"1px solid lightGray",borderRadius:4,padding:"10px 10px 0px 10px",backgroundColor:e.palette.background.paper},"& footer":{padding:20,paddingTop:0,display:"flex",justifyContent:"space-between",flexDirection:"row"}},stretched:{gridColumn:"first-line / last-line"},large:{gridRow:"span 2"},tableContainer:{background:"#0000 !important","& h4":{textAlign:"center",marginBottom:0},paddingBottom:"1em !important"}}})),ue=a.a.forwardRef((function(e,t){var n,i=oe();return a.a.createElement("article",{className:i.article,ref:t},a.a.createElement("h1",{className:i.stretched},"User Guide"),a.a.createElement("section",null,a.a.createElement("h4",null,"Privacy note"),a.a.createElement("p",null,"All your data will be stored in a hidden folder in your Google Drive account. The developers of this site will never have access to a single word you leave here.")),a.a.createElement("section",{className:i.large},a.a.createElement("h4",null,"What is this site? "),a.a.createElement("p",null,"This is a tool for altering your reactions to negative emotions. The main goal is to create a habit of questioning your thoughts."),a.a.createElement("aside",null,a.a.createElement("p",null,"This site is only a supplementary tool for cognitive behavioral therapy. It is in no way a replacement for consulting with a therapist. Please, get help!"),a.a.createElement("p",null,"To learn about cognitive behavioral therapy see"," ",a.a.createElement("a",{href:"https://feelinggood.com/"},"Feeling Good")," by David Burns."))),a.a.createElement("section",{className:i.large},a.a.createElement("h4",null," Why does questioning help? "),a.a.createElement("p",null,"A suffering mind tends to speak to itself coloring its view of the world negatively. Such thoughts don't help feeling good, instead they defend bad moods. Reactions to negative emotions become negative emotions themselves. When unhappy we tell ourselves every reason why we are unhappy and this talking produces more unhappiness. Writing is one of the ways of breaking this vicious circle."),a.a.createElement("p",null,"Negative thoughts are subconscious, they are crude and contain a lot of logical mistakes. By questioning our thoughts we are able to notice such mistakes. When a negative thought appears wrong we gain a choice to think constructively a possibility to help ourselves."),a.a.createElement("aside",null,a.a.createElement("p",null,"We learn a habit of non-constructive subconscious thinking very early in life. Changing old habits is a gradual process. This is why the first two ingredients of success are ",a.a.createElement("b",null,"persistence")," and"," ",a.a.createElement("b",null,"optimism"),"."))),a.a.createElement("section",null,a.a.createElement("h4",null,"How to use it?"),a.a.createElement("p",null,"When something bothers you open the site and click ",a.a.createElement("b",null,"ADD NEW ITEM")," ","(",a.a.createElement("b",null,"Ctrl+Enter"),") and just start answering questions."),a.a.createElement("p",null,"If some of the questions don't fit you click",a.a.createElement(E.a,{onClick:e.onOpenSettings,size:"small"},a.a.createElement(k.a,null)),"and change them."),a.a.createElement("aside",null,a.a.createElement("ul",null,a.a.createElement("label",null,a.a.createElement("h5",null,"Tips")),a.a.createElement("li",null,"No hurry! It is best to take time thinking before writing."),a.a.createElement("li",null,'Don\'t force yourself to write "correct" and "proper" answers. Just write what you think.')))),a.a.createElement("section",{className:ie()((n={},Object(v.a)(n,i.tableContainer,!0),Object(v.a)(n,i.stretched,!0),n))},a.a.createElement("h4",null,"A fictional example of a boy struggling with his fear of cats:"),a.a.createElement(r.Suspense,{fallback:a.a.createElement(C.a,null)},a.a.createElement(se,{example:!0,model:new ce}))),a.a.createElement("section",{className:i.stretched},a.a.createElement("h4",null,"Disclaimer"),a.a.createElement("p",null,'THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.'),a.a.createElement("aside",null,a.a.createElement("p",null,"This is an Open Source"," ",a.a.createElement("a",{href:"https://github.com/Romex91/self-help-sheets"},"project")," ","under the MIT License. ",a.a.createElement("br",null),"Report a bug or request a feature:"," ",a.a.createElement("a",{href:"https://github.com/Romex91/self-help-sheets/issues/new"},"issue form"),"."))),a.a.createElement("footer",{className:i.stretched},a.a.createElement("p",null," Copyright \xa9 2020 Roman Kuksin"),a.a.createElement(ee.a,{color:"primary",onClick:e.onClose},"Close")))})),le=n(37),he=n(56),pe=n.n(he),fe=n(87),de=n.n(fe),me=a.a.lazy((function(){return Promise.all([n.e(5),n.e(7)]).then(n.bind(null,241))})),ye=Object(_.a)((function(e){return{buttonsContainer:{display:"flex",justifyContent:"flex-end",alignItems:"center"},titleContainer:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},modal:{display:"flex",alignItems:"center",justifyContent:"center"},modalWindow:Object(v.a)({maxWidth:1e3,height:"90%",width:"90%",backgroundColor:e.palette.background.default,zIndex:1e3,borderRadius:4,overflow:"auto",display:"flex",padding:30},e.breakpoints.down("xs"),{padding:10})}}));function ge(e){var t=e.setOpen,n=e.open,i=e.hash,s=Object(g.a)(e,["setOpen","open","hash"]),c=ye(),o=function(){window.history.replaceState(null,null," "),t(!1)};return n&&window.location.hash!=="#"+i&&(window.location.hash=i),a.a.createElement(a.a.Fragment,null,a.a.createElement(E.a,Object.assign({},s,{onClick:function(){t(!0)}}),s.children[0]),a.a.createElement(O.a,{open:n,className:c.modal,onClose:o},a.a.createElement("div",{className:c.modalWindow},a.a.createElement(b.ErrorBoundary,{fallback:a.a.createElement(le.a,null,"Something went wrong. ",a.a.createElement("br",null),"Reload the page. ",a.a.createElement("br",null),"\u0426_\u0426")},a.a.createElement(de.a,{isExclusive:!0}),a.a.createElement(r.Suspense,{fallback:a.a.createElement(C.a,null)},a.a.cloneElement(s.children[1],{onClose:o}))))))}function ve(e){var t=a.a.useState("#settings"===window.location.hash),n=Object(l.a)(t,2),r=n[0],i=n[1],s=a.a.useState("#help"===window.location.hash||pe()(window.navigator.userAgent)),c=Object(l.a)(s,2),o=c[0],u=c[1];a.a.useEffect((function(){var e=function(){i("#settings"===window.location.hash),u("#help"===window.location.hash||pe()(window.navigator.userAgent))};return window.addEventListener("hashchange",e),function(){window.removeEventListener("hashchange",e)}}));var h=ye();return a.a.createElement(a.a.Fragment,null,a.a.createElement(x.a,{appear:!1,in:e.shown},a.a.createElement(j.a,null)),a.a.createElement(I.a,{appear:!1,direction:"down",in:e.shown},a.a.createElement(S.a,null,a.a.createElement(j.a,null,a.a.createElement(D.a,{container:!0,justify:"space-between"},a.a.createElement(A.a,{xsDown:!0},a.a.createElement(D.a,{item:!0,xs:4})),a.a.createElement(D.a,{item:!0,xs:4,className:h.titleContainer},a.a.createElement(A.a,{xsDown:!0},a.a.createElement(T.a,{variant:"h6",align:"center"},"Self-help sheets"),a.a.createElement(T.a,{variant:"caption",align:"center"},"Document your inner dialog")),a.a.createElement(A.a,{smUp:!0},a.a.createElement(T.a,{align:"center"},"Self-help sheets"))),a.a.createElement(D.a,{item:!0,className:h.buttonsContainer,xs:8,sm:4},a.a.createElement(ge,{hash:"help",open:o,setOpen:u},a.a.createElement(w.a,null),a.a.createElement(ue,{onOpenSettings:function(){u(!1),i(!0)}})),a.a.createElement(ge,{open:r,setOpen:i,hash:"settings",edge:"start"},a.a.createElement(k.a,null),a.a.createElement(me,{model:e.model})),a.a.createElement(Z,{gdriveAuthClient:N.b})))))))}var be=a.a.lazy((function(){return Promise.all([n.e(0),n.e(1)]).then(n.bind(null,239))}));function we(e){var t=e.model,n=Object(g.a)(e,["model"]),i=a.a.useState(N.b.state),s=Object(l.a)(i,2),c=s[0],o=s[1];return a.a.useEffect((function(){N.b.addStateListener(o)}),[]),c===N.a.SIGNED_OUT?a.a.createElement(le.a,null,"Sign in to proceed..."):c===N.a.FAILED?a.a.createElement(le.a,null,"S-meth#ng wen# wr00ng..^ Relo\ufffd\ufffd the page.",a.a.createElement("br",null),"Check th\ufffd\ufffd networ\ufffd con#5.0%^&",a.a.createElement("br",null)," \u041e\u0448\u0438\u0431\u043a\u0430 \u043c\u043e\u0434\u0443\u043b\u044f \u043f\u0435\u0440\u0435\u0432\u043e\u0434\u0430 \u0442\u0435\u043a\u0441\u0442\u0430. \u041f\u0435\u0440\u0435\u043a\u043b\u044e\u0447\u0430\u044e\u0441\u044c \u043d\u0430 \u043a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439.",a.a.createElement("br",null),"\u7985"):a.a.createElement(r.Suspense,{fallback:a.a.createElement(C.a,{color:"primary"})},null==t?a.a.createElement(C.a,{color:"secondary"}):a.a.createElement(be,Object.assign({},n,{model:t})))}var ke=n(103),_e=n(30),Ee=Object(P.a)("settings_key"),Oe=new(function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(){var e;Object(L.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty(Object(B.a)(e),Ee,{writable:!0,value:null}),e}return Object(R.a)(n,[{key:"_getSettingsKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Object(H.a)(this,Ee)[Ee]){e.next=2;break}return e.abrupt("return",Object(H.a)(this,Ee)[Ee]);case 2:return e.next=4,Be('name = "settings.json"');case 4:if(0!==(t=e.sent).length){e.next=9;break}return e.next=8,Ie("settings.json");case 8:return e.abrupt("return",e.sent);case 9:if(1!==t.length){e.next=11;break}return e.abrupt("return",t[0].id);case 11:return console.error("Invalid state. Multiple settings.json. "),n=Object(ke.a)(t),r=n[0],n.slice(1).map((function(e){return Ke(e.id)})),e.abrupt("return",r.id);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Ie("item.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Ke(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Te(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Le(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Ne(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,Be('name = "item.json"');case 3:return(t=e.sent).forEach((function(e){e.description||(e.description="")})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.t0=Le,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.t0=Te,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.t2=t,e.next=8,(0,e.t0)(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.abrupt("return",De(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(_e.a));function xe(){if(N.b.state!==N.a.SIGNED_IN)throw new Error("Incorrect state. Sign in to continue.")}function je(e,t){var n=(new Error).stack;return new Promise((function(r,a){e(t).then((function(e){e&&(e.status<200||e.status>299)?(console.log("GAPI call returned bad status",n,e),a(e)):r(e)}),(function(e){console.log("GAPI call failed ",n,e),a(e)}))}))}function Ie(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(u.a)(o.a.mark((function e(t,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(window.gapi.client.drive.files.create,{resource:{name:t,mimeType:n||"text/plain",parents:["appDataFolder"]},fields:"id"});case 2:return r=e.sent,e.abrupt("return",r.result.id);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e,t){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(u.a)(o.a.mark((function e(t,n){var r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.assert("string"===typeof n),"\r\n--"+(r="-------314159265358979323846")+"\r\n","\r\n--"+r+"--",a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify({description:n})+"\r\n---------314159265358979323846--",e.next=7,je(window.gapi.client.request,{path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"multipart"},body:a,headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.assert("string"===typeof n),e.next=3,je(window.gapi.client.request,{path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"media"},fields:"md5Checksum",body:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je(window.gapi.client.request,{path:"/drive/v3/files/".concat(t),method:"GET",params:{fields:"md5Checksum"}});case 2:return n=e.sent,e.abrupt("return",n.result.md5Checksum);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return Re.apply(this,arguments)}function Re(){return(Re=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je(window.gapi.client.drive.files.get,{fileId:t,alt:"media"});case 3:return n=e.sent,e.abrupt("return",n.body);case 7:if(e.prev=7,e.t0=e.catch(0),404===e.t0.status){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Be(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[];case 2:return e.next=4,je(window.gapi.client.drive.files.list,{spaces:"appDataFolder",fields:"files(id, description, md5Checksum), nextPageToken",pageSize:1e3,pageToken:r,orderBy:"createdTime",q:t});case 4:a=e.sent,n=n.concat(a.result.files),r=a.result.nextPageToken;case 7:if(r){e.next=2;break}case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function Ke(e){return He.apply(this,arguments)}function He(){return(He=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,je(window.gapi.client.drive.files.delete,{fileId:t});case 3:return e.abrupt("return",!0);case 6:if(e.prev=6,e.t0=e.catch(0),404!==e.t0.status){e.next=10;break}return e.abrupt("return",!1);case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}Object.seal(Oe);var Pe=n(72),Ge=n.n(Pe),We=n(77),qe=n.n(We),ze=n(96),Ve=n(104),Ue=n.n(Ve);var Je=function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(e){var r;if(Object(L.a)(this,n),(r=t.call(this))._changeKeysMutex=new ze.a,r._innerKeys=null,r._innerBackendMap=null,r._createChunkConnector=function(e){return{setValue:function(t){r._innerBackendMap.set(e,t)},setDescription:function(t){r._innerBackendMap.setDescription(e,t)},getValue:function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._innerBackendMap.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),delete:function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r._innerKeys.splice(r._innerKeys.indexOf(e),1),r._chunks.delete(e),t.next=4,r._innerBackendMap.delete(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},r._chunks=new Map,r._Chunk=function(){function e(t){var n=this,r=t.connector,a=t.serializedDescriptions,i=t.md5Checksum;Object(L.a)(this,e),this._onValueSet=Ge.a.debounce((function(){n._serializedValues=JSON.stringify(n._values),n._connector.setValue(n._serializedValues)}),1e3),this._onDescriptionSet=Ge.a.debounce((function(){n._serializedDescriptions=n._descriptions.map((function(e){return null===e?"null":e})).join(","),n._connector.setDescription(n._serializedDescriptions)}),1e3),this._fetchValuesSynchronised=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==n._fetchPromise&&(n._fetchPromise=n._fetchValues()),e.next=3,n._fetchPromise;case 3:n._fetchPromise=null;case 4:case"end":return e.stop()}}),e)}))),this._fetchPromise=null,this._fetchValues=Object(u.a)(o.a.mark((function e(){var t,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._connector.getValue();case 2:if(t=e.sent,e.prev=3,r=JSON.parse(t),Array.isArray(r)){e.next=7;break}throw new Error("Bad server data. Not valid array");case 7:for(;r.length<n._descriptions.length;)r.push("");n._values=r,n._serializedValues=t,n._initialMd5Checksum=qe()(t),n._isDirty=!1,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Bad response from server:"+e.t0.message+" "+t),n._shouldKeepOnFormatError?(n._values=Array(8).fill(""),n._isDirty=!0,n._serializedValues=null,n._onValueSet()):n._connector.delete();case 18:case"end":return e.stop()}}),e,null,[[3,14]])}))),this._connector=r,this._initialMd5Checksum=i,void 0===a?(this._values=Array(8).fill(""),this._descriptions=[],this._isDirty=!0):(this._serializedDescriptions=a,this._isDirty=!1,this._descriptions=a.split(",").map((function(e){return"null"===e?null:e})))}return Object(R.a)(e,[{key:"isFull",value:function(){return this._descriptions.length>=8}},{key:"listSubKeys",value:function(){for(var e=[],t=0;t<this._descriptions.length&&t<8;t++)null!=this._descriptions[t]&&e.push(t);return e}},{key:"createSubKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._shouldKeepOnFormatError=!0,e.prev=1,null!=this._values){e.next=5;break}return e.next=5,this._fetchValuesSynchronised();case 5:if(null!=this._values){e.next=7;break}return e.abrupt("return",null);case 7:if(!this.isFull()){e.next=9;break}throw new Error("Do not call createSubKey for full chunks");case 9:return t=this._descriptions.length,this._descriptions.push(""),this.setDescription(t,""),e.abrupt("return",t);case 13:return e.prev=13,this._shouldKeepOnFormatError=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._descriptions[t]){e.next=2;break}throw new Error("item is already deleted");case 2:if(1!==this._descriptions.filter((function(e){return null!=e})).length){e.next=7;break}return e.next=5,this._connector.delete();case 5:e.next=8;break;case 7:this.setDescription(t,null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._values){e.next=3;break}return e.next=3,this._fetchValuesSynchronised();case 3:if(null!=this._values){e.next=5;break}return e.abrupt("return");case 5:this._values[t]=n,this._isDirty=!0,this._serializedValues=null,this._onValueSet();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._descriptions[t]){e.next=2;break}return e.abrupt("return",void 0);case 2:if(null!=this._values){e.next=5;break}return e.next=5,this._fetchValuesSynchronised();case 5:if(null!=this._values){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",this._values[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(e,t){if(e>=this._descriptions.length||null==this._descriptions[e])throw new Error("null description means subkey doesn't exist. Did you call createKey?");this._descriptions[e]=t,this._serializedDescriptions=null,this._isDirty=!0,this._onDescriptionSet()}},{key:"getDescription",value:function(e){return this._descriptions[e]}},{key:"onMetadataUpdate",value:function(e,t){return this._isDirty?(null!=this._serializedValues&&null!=this._serializedDescriptions&&qe()(this._serializedValues)===t&&this._serializedDescriptions===e&&(this._isDirty=!1,this._initialMd5Checksum=t),{outdated:!1}):(this._serializedDescriptions!==e&&(this._serializedDescriptions=e,this._descriptions=e.split(",").map((function(e){return"null"===e?null:e}))),this._initialMd5Checksum!==t?(this._serializedValues=null,this._values=null,{outdated:!0}):{outdated:!1})}}]),e}(),r._splitOuterKey=function(e){var t=e.indexOf("-");return{prefixKey:Number(e.substring(0,t)),innerKey:e.substring(t+1)}},!e instanceof _e.a)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r}return Object(R.a)(n,[{key:"createKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,a,i,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(t=e.sent,e.prev=3,null!==this._innerKeys){e.next=6;break}throw new Error("You should call getAllKeys first");case 6:if(n=function(){if(0!==s._innerKeys.length)return s._innerKeys[s._innerKeys.length-1]},0!==this._innerKeys.length&&!this._chunks.get(n()).isFull()){e.next=13;break}return e.next=10,this._innerBackendMap.createKey();case 10:r=e.sent,this._innerKeys.push(r),this._chunks.set(r,new this._Chunk({connector:this._createChunkConnector(r)}));case 13:return a=n(),e.next=16,this._chunks.get(a).createSubKey();case 16:return i=e.sent,e.abrupt("return",i+"-"+a);case 18:return e.prev=18,t(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(n=e.sent,e.prev=3,r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this._chunks.get(i).delete(a);case 9:return e.prev=9,n(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[3,,9,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setValue(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Don't call getMd5 on this class. Server cannot compute md5 for this item because it is multiplexed.In order to sync call |getAllKeys| and if some item has |outdated===true| call |get|.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._splitOuterKey(t),r=n.prefixKey,a=n.innerKey,this._chunks.has(a)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",this._chunks.get(a).getValue(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,r,a,i,s=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:return t=e.sent,e.prev=3,e.next=6,this._innerBackendMap.getAllKeys();case 6:return n=e.sent,r=[],a=new Map,i=0,n.forEach((function(e){var t=!0,n=0===i++;if(s._chunks.has(e.id)){var c=s._chunks.get(e.id);a.set(e.id,c),t=c.onMetadataUpdate(e.description,e.md5Checksum).outdated}else a.set(e.id,new s._Chunk({connector:s._createChunkConnector(e.id),serializedDescriptions:e.description,isFirstChunk:n,md5Checksum:e.md5Checksum}));var o=a.get(e.id);o.listSubKeys().forEach((function(n){r.push({id:n+"-"+e.id,outdated:t,description:o.getDescription(n)})}))})),this._chunks=a,this._innerKeys=n.map((function(e){return e.id})),e.abrupt("return",r);case 14:return e.prev=14,t(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._innerBackendMap.getSettings();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:return n=e.sent,e.next=5,this._innerBackendMap.setSettings(t);case 5:n();case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setDescription(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(_e.a),Ye=function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(e){var r;if(Object(L.a)(this,n),(r=t.call(this))._innerBackendMap=null,!e instanceof _e.a)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r}return Object(R.a)(n,[{key:"_exponentialRetry",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1;case 1:if(!(n<10)){e.next=16;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),r=1*Math.pow(3,n++),console.error("Failed running ".concat(t.name," : ").concat(e.t0.message,". Will try again after ").concat(r," seconds.")),e.next=14,this._sleep(1e3*r);case 14:e.next=1;break;case 16:console.error("finish retry attempts");case 17:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.createKey.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.delete.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.set.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.get.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getMd5.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getAllKeys.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getSettings.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setSettings.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setDescription.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),n}(_e.a),Xe=function(e){Object(F.a)(n,e);var t=Object(K.a)(n);function n(e){var r;if(Object(L.a)(this,n),(r=t.call(this))._innerBackendMap=null,!e instanceof _e.a)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r._limiter=new Ue.a({maxConcurrent:5,minTime:50}),r}return Object(R.a)(n,[{key:"createKey",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.createKey()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.delete(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return r._innerBackendMap.set(t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.get(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.getMd5(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.getAllKeys()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return t._innerBackendMap.getSettings()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return n._innerBackendMap.setSettings(t)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._limiter.schedule((function(){return r._innerBackendMap.setDescription(t,n)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(_e.a);var $e=function(){var e=Object(h.a)("(prefers-color-scheme: dark)"),t=a.a.useMemo((function(){return Object(p.a)({palette:{type:e?"dark":"light",primary:{main:e?m.a[900]:y.a[800]},background:{default:e?"#303030":m.a[50],aside:e?"#777":"lightyellow"}}})}),[e]),r=a.a.useState(!0),i=Object(l.a)(r,2),s=i[0],c=i[1],g=a.a.useCallback((function(e){window.innerHeight<700&&c(!1)}),[]),v=a.a.useCallback((function(e){c(!0)}),[]),b=a.a.useState(null),w=Object(l.a)(b,2),k=w[0],_=w[1];return a.a.useEffect((function(){var e=n.e(6).then(n.bind(null,231));N.b.addStateListener(function(){var t=Object(u.a)(o.a.mark((function t(n){var r,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n!==N.a.SIGNED_IN){t.next=8;break}return t.next=3,e;case 3:r=t.sent,a=r.EntriesTableModelImpl,_(new a(new Je(new Xe(new Ye(Oe))),N.b)),t.next=9;break;case 8:_((function(e){return e&&e.dispose(),null}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}),[]),a.a.createElement(f.a,{theme:t},a.a.createElement(d.a,null),a.a.createElement(ve,{shown:s,model:k}),a.a.createElement(we,{onFocus:g,appBarShown:s,onShowAppBar:v,model:k}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement($e,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},30:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(9),a=n(19),i=n(18),s=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).requireFunction("createKey"),e.requireFunction("delete","key"),e.requireFunction("set","key","contentString"),e.requireFunction("get","key"),e.requireFunction("getMd5","key"),e.requireFunction("getAllKeys"),e.requireFunction("getSettings"),e.requireFunction("setSettings","settings"),e.requireFunction("setDescription","key","description"),e}return n}(n(68).a)},36:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n.n(r),i=n(37),s=n(158);function c(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(i.a,null,a.a.createElement(s.a,e)))}},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(0),a=n.n(r),i=n(156),s=n(107),c=Object(i.a)({container:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}});function o(e){var t=c();return a.a.createElement("div",{className:t.container},a.a.createElement(s.a,Object.assign({align:"center",variant:"h4"},e),e.children))}},47:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return u}));var r=n(25),a=n(22),i=n(9),s=n(10),c={LOADING:"loading",HIDDEN:"hidden",DELETED:"deleted"},o={EDIT_LEFT:"editLeft",EDIT_RIGHT:"editRight",NONE:"none"},u=function(){function e(t,n,r){Object(i.a)(this,e),this._data=n,this._key=t,this._initiallyCollapsed=!1,this._focused=!1,this.lastChange=o.NONE,this._setDescriptionImpl(r)}return Object(s.a)(e,[{key:"isDataLoaded",value:function(){return this._data!==c.LOADING&&this._data!==c.HIDDEN}},{key:"setDescription",value:function(e){var t=this.clone();return t._setDescriptionImpl(e),t}},{key:"setLeft",value:function(e){if(!this.isDataLoaded())return console.error("bad status"),this;var t=this.clone();return t._data=Object(a.a)(Object(a.a)({},this._data),{},{left:e}),t.lastChange=o.EDIT_LEFT,t}},{key:"setRight",value:function(e){if(!this.isDataLoaded())return console.error("bad status"),this;var t=this.clone();return t._data=Object(a.a)(Object(a.a)({},this._data),{},{right:e}),t.lastChange=o.EDIT_RIGHT,t}},{key:"setEmojiLeft",value:function(t){var n=this.setDescription(e._generateDescription(t,this._emojiArrays[1],this._creationTime));return n.lastChange=o.EDIT_LEFT,n}},{key:"setEmojiRight",value:function(t){var n=this.setDescription(e._generateDescription(this._emojiArrays[0],t,this._creationTime));return n.lastChange=o.EDIT_RIGHT,n}},{key:"setCreationTime",value:function(t){return this.setDescription(e._generateDescription(this._emojiArrays[0],this._emojiArrays[1],t))}},{key:"setInitiallyCollapsed",value:function(e){var t=this.clone();return t._initiallyCollapsed=e,t}},{key:"setFocused",value:function(e){var t=this.clone();return t._focused=e,t}},{key:"delete",value:function(){return new e(this._key,c.DELETED,c.DELETED)}},{key:"clear",value:function(){return new e(this._key,{left:"",right:""},"")}},{key:"show",value:function(){if(this._data!==c.HIDDEN)throw new Error("show() has been called for entry that is not hidden");return new e(this._key,c.LOADING,this._description)}},{key:"clone",value:function(){var t=new e(this._key,this.data);return t._emojiArrays=this._emojiArrays,t._creationTime=this._creationTime,t._description=this._description,t._initiallyCollapsed=this._initiallyCollapsed,t._focused=this._focused,t.lastChange=this.lastChange,t}},{key:"data",get:function(){return this._data instanceof Object?Object(a.a)({},this._data):this._data}},{key:"key",get:function(){return this._key}},{key:"description",get:function(){return this.isDataLoaded()?this._description:""}},{key:"left",get:function(){return this.isDataLoaded()?this._data.left:""}},{key:"right",get:function(){return this.isDataLoaded()?this._data.right:""}},{key:"emojiArrays",get:function(){return this._emojiArrays}},{key:"creationTime",get:function(){return this._creationTime}},{key:"initiallyCollapsed",get:function(){return this._initiallyCollapsed}},{key:"focused",get:function(){return this._focused}}]),Object(s.a)(e,[{key:"_setDescriptionImpl",value:function(e){if(this._emojiArrays=[[],[]],this._creationTime=null,this._description=e,"string"===typeof e&&e.length>0&&e!==c.DELETED){var t=e.split("-"),n=Object(r.a)(t,2),a=n[0],i=n[1];this._emojiArrays=a.split(":").map((function(e){return Array.from(e).map((function(e){return Number(e)}))})),2!==this._emojiArrays.length&&this._emojiArrays.push([]),this._creationTime=new Date(Number(i)),isNaN(this._creationTime.getTime())&&(this._creationTime=null)}}}],[{key:"_generateDescription",value:function(e,t,n){var r;return r=e.every((function(e){return 0===e}))&&t.every((function(e){return 0===e}))?"":e.join("")+":"+t.join(""),null!=n&&(r=r+"-"+n.getTime()),r}}]),e}()},68:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(9),a=n(10),i=function(){function e(){Object(r.a)(this,e)}return Object(a.a)(e,[{key:"requireFunction",value:function(e){var t=this;setTimeout((function(){if("function"!==typeof t[e])throw new Error(e+" is not implemented")}),0)}}]),e}()},81:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(9),a=n(10),i=function(){function e(t){if(Object(r.a)(this,e),"string"===typeof t&&(t=JSON.parse(t)),"boolean"!==typeof t.isEnabled||"string"!==typeof t.text)throw new Error("Wrong hint data "+JSON.stringify(t));this._isEnabled=t.isEnabled,this._text=t.text}return Object(a.a)(e,[{key:"setIsEnabled",value:function(t){return new e({isEnabled:t,text:this._text})}},{key:"setText",value:function(t){return new e({text:t,isEnabled:this._isEnabled})}},{key:"isEnabled",get:function(){return this._isEnabled}},{key:"text",get:function(){return this._text}}]),Object(a.a)(e,[{key:"stringify",value:function(){return JSON.stringify({isEnabled:this._isEnabled,text:this._text})}}]),e}(),s=function(){function e(t){Object(r.a)(this,e);try{if("string"===typeof t&&(t=JSON.parse(t)),!Array.isArray(t.emojiList)||!t.emojiList.every((function(e){return"string"===typeof String.fromCodePoint(e.codePoint)})))throw new Error("Bad emoji list: "+JSON.stringify(t));this._emojiList=t.emojiList,this._leftHint=new i(t.leftHint),this._rightHint=new i(t.rightHint)}catch(n){t&&console.error("Settings format error:"+n.message),this._mutateToDefaults()}}return Object(a.a)(e,[{key:"setEmojiList",value:function(t){return new e({emojiList:t,leftHint:this._leftHint,rightHint:this._rightHint})}},{key:"setLeftHint",value:function(t){return new e({emojiList:this._emojiList,leftHint:t,rightHint:this._rightHint})}},{key:"setRightHint",value:function(t){return new e({emojiList:this._emojiList,leftHint:this._leftHint,rightHint:t})}},{key:"stringify",value:function(){return JSON.stringify({emojiList:this._emojiList,leftHint:this._leftHint.stringify(),rightHint:this._rightHint.stringify()})}},{key:"emojiList",get:function(){return this._emojiList}},{key:"leftHint",get:function(){return this._leftHint}},{key:"rightHint",get:function(){return this._rightHint}}]),Object(a.a)(e,[{key:"_mutateToDefaults",value:function(){this._leftHint=new i({isEnabled:!0,text:"What happened?\nWhat were your immediate thoughts?"}),this._rightHint=new i({isEnabled:!0,text:"Why is it bad?\nWhat would your therapist say?\nIs your view of the problem biased?"}),this._emojiList=[{codePoint:128078,text:"discontent"},{codePoint:128552,text:"fear"},{codePoint:128546,text:"sadness"},{codePoint:128557,text:"grief"},{codePoint:128561,text:"horror"},{codePoint:128534,text:"pain"},{codePoint:128545,text:"anger"},{codePoint:129314,text:"disgust"}]}}]),e}()},86:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(9),a=n(19),i=n(18),s=function(e){Object(a.a)(n,e);var t=Object(i.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.call(this)).requireFunction("subscribe","callback"),e.requireFunction("unsubscribe","callback"),e.requireFunction("onUpdate","entry","omitHistory"),e.requireFunction("onSettingsUpdate","settings"),e.requireFunction("addNewItem"),e.requireFunction("addNewItemThrottled"),e.requireFunction("undo"),e.requireFunction("redo"),e.requireFunction("sync"),e}return n}(n(68).a)}},[[118,3,4]]]);
//# sourceMappingURL=main.e02b8cd4.chunk.js.map
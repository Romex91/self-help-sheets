{"version":3,"sources":["AuthClient.ts","googleIcon.js","GoogleSignInButton.js","HelpWindow.tsx","AppMenu.tsx","AppContent.tsx","GDriveMap.ts","BackendQuotaSavers/ErrorHandler.ts","BackendQuotaSavers/RequestThrottler.ts","BackendQuotaSavers/BackendMultiplexor.ts","App.tsx","serviceWorkerRegistration.ts","index.tsx","GDriveAuthClient.ts","LoadingPlaceholder.tsx","CenteredTypography.tsx","EntryModel.ts","Settings.ts"],"names":["AuthStates","AuthClient","_state","LOADING","_stateListeners","Set","Array","from","this","listener","console","assert","has","add","delete","Promise","resolve","addStateListener","state","removeStateListener","active","style","display","padding","width","height","xmlns","fill","fillRule","d","ButtonContent","children","paddingLeft","fontWeight","buttonStyle","backgroundColor","alignItems","color","boxShadow","borderRadius","border","fontSize","fontFamily","cursor","disabledStyle","opacity","GoogleSignInButton","authState","props","gdriveAuthClient","prevAuthState","buttonAnchor","setState","prevState","FAILED","Object","assign","a","SIGNED_IN","signOut","SIGNED_OUT","signIn","alertElement","Alert","severity","AlertTitle","href","ref","onClick","type","key","Popper","zIndex","open","anchorEl","placement","disablePortal","modifiers","flip","enabled","preventOverflow","hide","offset","React","PureComponent","EntriesTable","lazy","ExampleModel","callback","EntryModel","left","right","setLeft","setRight","setCreationTime","Date","now","setMoodsLeft","setMoodsRight","Settings","canRedo","canUndo","useStyles","makeStyles","theme","article","gridTemplateColumns","breakpoints","up","textAlign","marginTop","marginBottom","alignSelf","maxWidth","margin","palette","background","aside","flexDirection","justifyContent","paper","paddingTop","stretched","gridColumn","large","gridRow","tableContainer","paddingBottom","HelpWindow","forwardRef","classes","className","IconButton","onOpenSettings","size","classnames","fallback","LoadingPlaceholder","model","example","Button","onClose","SettingsWindow","buttonsContainer","titleContainer","modal","modalWindow","default","overflow","down","ModalWindowButton","styles","onWindowClose","window","history","replaceState","setOpen","location","hash","hashString","Fragment","edge","Modal","CenteredTypography","isExclusive","cloneElement","AppMenu","useState","settingsOpen","setSettingsOpen","isBot","navigator","userAgent","helpOpen","setHelpOpen","useEffect","onHashChange","addEventListener","removeEventListener","Collapse","appear","in","shown","Toolbar","Slide","direction","AppBar","Grid","container","justify","Hidden","xsDown","item","xs","Typography","variant","align","smUp","sm","Help","AppContent","signInState","setSignInState","undefined","tableProps","gdriveMap","settings_key","find","keys","length","createEmptyFile","id","error","firstKey","map","x","deleteFile","throwIfNotSignedIn","value","upload","download","result","getMd5","forEach","element","description","_getSettingsKey","settingsContent","patchDescription","Error","checkHttpStatus","arg","then","resp","status","name","gapi","client","drive","files","create","resource","mimeType","parents","fields","fileId","boundary","multipartRequestBody","delimiter","JSON","stringify","request","path","method","params","uploadType","body","headers","content","md5Checksum","get","alt","query","ret","list","spaces","pageSize","pageToken","token","orderBy","q","concat","nextPageToken","seal","ErrorHandler","_innerBackendMap","retriesCount","secondsToNextRetry","message","sleep","_exponentialRetry","createKey","bind","set","getAllKeys","getSettings","setSettings","setDescription","ms","setTimeout","RequestThrottler","_limiter","Bottleneck","maxConcurrent","minTime","schedule","BackendMultiplexor","_changeKeysMutex","Mutex","_innerKeys","_chunks","Map","acquire","release","getLastInnerKey","isFull","newInnerKey","push","Chunk","createChunkConnector","innerKey","createSubKey","keyPrefix","splitOuterKey","prefixKey","setValue","_key","getValue","newInnerKeys","outerKeys","newChunks","outdated","chunk","onMetadataUpdate","listSubKeys","subkey","getDescription","innerkey","serializedValue","serializedDescription","splice","indexOf","outerKey","separator","Number","substring","_connector","_serializedDescriptions","_initialMd5Checksum","_values","_descriptions","_serializedValues","_isDirty","onValueSet","_","debounce","onDescriptionSet","join","_fetchPromise","split","subkeys","i","_fetchValuesSynchronised","filter","serializedDescriptions","md5","fetchValues","finally","serializedValues","values","parse","isArray","App","prefersDarkMode","useMediaQuery","useMemo","createMuiTheme","primary","main","blueGrey","blue","appBarShown","setAppBarShown","onTableEntryFocus","useCallback","innerHeight","onShowAppBar","setModel","importPromise","newState","EntriesTableModelImpl","oldModel","dispose","onFocus","ThemeProvider","CssBaseline","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","ReactDOM","render","StrictMode","document","getElementById","URL","process","origin","fetch","response","contentType","ready","unregister","reload","checkValidServiceWorker","notifyStateChanged","ondone","script","createElement","async","src","appendChild","onload","onerror","loadGapi","load","init","clientId","discoveryDocs","scope","isGapiLoaded","_updateSignInState","auth2","getAuthInstance","isSignedIn","listen","mocha","prompt","current_state","flex","EntryStatus","LastChange","_data","_initiallyCollapsed","_focused","_description","_moodArrays","_creationTime","lastChange","NONE","setDescriptionImpl","data","entryData","HIDDEN","cloneModel","clone","isEntryData","EDIT_LEFT","EDIT_RIGHT","_generateDescription","creationTime","collapsed","focused","DELETED","serializedMoods","serializedCreationTime","y","leftMoods","rightMoods","isNaN","getTime","isDataLoaded","descrciption","every","Hint","_isEnabled","_text","text","isEnabled","hintData","json","_emojiList","_leftHint","_rightHint","emojiList","String","fromCodePoint","codePoint","leftHint","rightHint","mutateToDefaults"],"mappings":"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","file":"static/js/main.3057b49e.chunk.js","sourcesContent":["// PUBLIC SECTION\nexport enum AuthStates {\n  LOADING= \"loading\",\n  SIGNED_IN= \"signed_in\",\n  SIGNED_OUT= \"signed_out\",\n  FAILED= \"failed\",\n}\n\ninterface StateListener {\n  (state: AuthStates) : void\n}\n\nexport abstract class AuthClient {\n  protected _state: AuthStates = AuthStates.LOADING;\n  private _stateListeners: Set<StateListener> = new Set();\n\n  public abstract signIn(): void;\n  public abstract signOut(): void;\n\n\n\n  public get state(): AuthStates {\n    return this._state;\n  }\n\n  protected notifyStateChanged(): void {\n    for (const listener of Array.from(this._stateListeners)) {\n      listener(this._state);\n    }\n  }\n\n\n  public addStateListener(listener:StateListener): void {\n    console.assert(!this._stateListeners.has(listener));\n    this._stateListeners.add(listener);\n  }\n\n  public removeStateListener(listener:StateListener): void {\n    console.assert(this._stateListeners.has(listener));\n    this._stateListeners.delete(listener);\n  }\n\n  public async waitForStateChange(): Promise<AuthStates> {\n    return await new Promise((resolve) => {\n      const listener = (state: AuthStates) => {\n        this.removeStateListener(listener);\n        resolve(state);\n      };\n      this.addStateListener(listener);\n    });\n  }\n\n}\n","import React from \"react\";\n\nexport default ({ active }) => (\n  <div\n    style={{\n      display: \"flex\",\n      padding: 10,\n    }}\n  >\n    <svg width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g fill=\"#000\" fillRule=\"evenodd\">\n        <path\n          d=\"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z\"\n          fill=\"#EA4335\"\n        />\n        <path\n          d=\"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z\"\n          fill=\"#4285F4\"\n        />\n        <path\n          d=\"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z\"\n          fill=\"#FBBC05\"\n        />\n        <path\n          d=\"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z\"\n          fill=\"#34A853\"\n        />\n        <path fill=\"none\" d=\"M0 0h18v18H0z\" />\n      </g>\n    </svg>\n  </div>\n);\n","import React from \"react\";\nimport Icon from \"./googleIcon\";\nimport { AuthStates } from \"./AuthClient\";\nimport Popper from \"@material-ui/core/Popper\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\n\nconst ButtonContent = ({ children }) => (\n  <span\n    style={{\n      padding: 10,\n      paddingLeft: 0,\n      fontWeight: 500,\n    }}\n  >\n    {children}\n  </span>\n);\n\nlet buttonStyle = {\n  backgroundColor: \"#fff\",\n  display: \"inline-flex\",\n  alignItems: \"center\",\n  color: \"rgba(0, 0, 0, .54)\",\n  boxShadow: \"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",\n  padding: 0,\n  borderRadius: 2,\n  border: \"1px solid transparent\",\n  fontSize: 14,\n  fontWeight: \"500\",\n  fontFamily: \"Roboto, sans-serif\",\n  cursor: \"pointer\",\n};\n\nlet disabledStyle = {\n  opacity: 0.6,\n};\n\nexport class GoogleSignInButton extends React.PureComponent {\n  state = {\n    authState: this.props.gdriveAuthClient.state,\n    prevAuthState: this.props.gdriveAuthClient.LOADING,\n    buttonAnchor: null,\n  };\n\n  componentDidMount() {\n    if (this.state.authState !== this.props.gdriveAuthClient.state) {\n      this.#setAuthState(this.props.gdriveAuthClient.state);\n    }\n    this.props.gdriveAuthClient.addStateListener(this.#setAuthState);\n  }\n  componentWillUnmount() {\n    this.props.gdriveAuthClient.removeStateListener(this.#setAuthState);\n  }\n\n  #setAuthState = (authState) => {\n    this.setState((prevState) => {\n      return { ...prevState, prevAuthState: prevState.authState, authState };\n    });\n  };\n\n  #setButtonAnchor = (buttonAnchor) => {\n    this.setState((prevState) => {\n      return { ...prevState, buttonAnchor };\n    });\n  };\n\n  #getButtonStyle = () => {\n    if (\n      this.state.authState === AuthStates.FAILED ||\n      this.state.authState === AuthStates.LOADING\n    ) {\n      return Object.assign({}, buttonStyle, disabledStyle);\n    }\n\n    return buttonStyle;\n  };\n\n  #onClick = async () => {\n    if (this.state.authState === AuthStates.SIGNED_IN) {\n      this.props.gdriveAuthClient.signOut();\n    } else if (this.state.authState === AuthStates.SIGNED_OUT) {\n      this.props.gdriveAuthClient.signIn();\n    }\n  };\n\n  render() {\n    let alertElement = (() => {\n      if (this.state.authState === AuthStates.FAILED) {\n        return (\n          <Alert severity=\"error\">\n            Failed connecting to google. Check your connection and try reloading\n            the page.\n          </Alert>\n        );\n      }\n\n      if (this.state.authState === AuthStates.SIGNED_OUT) {\n        if (this.state.prevAuthState === AuthStates.SIGNED_IN) {\n          return (\n            <Alert severity=\"warning\">\n              <AlertTitle>Privacy note!</AlertTitle>\n              If other people have access to this browser <br />\n              AND you don't want them to read your sheets: <br />\n              <ol>\n                <li>\n                  sign out globally: <br />\n                  <a href=\"https://accounts.google.com/Logout\">\n                    https://accounts.google.com/Logout\n                  </a>\n                </li>\n                <li>delete Google account password from the browser</li>\n              </ol>\n            </Alert>\n          );\n        } else if (this.state.prevAuthState === AuthStates.LOADING) {\n          return (\n            <Alert severity=\"info\">\n              This site stores data in a hidden Google Drive folder. <br />\n              Sign in to proceed.\n              <br />\n            </Alert>\n          );\n        }\n      }\n    })();\n\n    return (\n      <button\n        ref={(ref) => this.#setButtonAnchor(ref)}\n        onClick={this.#onClick}\n        style={this.#getButtonStyle()}\n        type=\"button\"\n      >\n        <Icon key={0} active={this.state.active} />\n        <ButtonContent key={2}>\n          {this.state.authState === AuthStates.SIGNED_IN\n            ? \"Sign Out\"\n            : \"Sign In \"}\n        </ButtonContent>\n\n        {!!alertElement && !!this.state.buttonAnchor && (\n          <Popper\n            key={1}\n            style={{ zIndex: 1200 }}\n            open={true}\n            anchorEl={this.state.buttonAnchor}\n            placement=\"bottom-end\"\n            disablePortal={false}\n            modifiers={{\n              flip: {\n                enabled: false,\n              },\n              preventOverflow: {\n                enabled: false,\n              },\n              hide: {\n                enabled: false,\n              },\n              offset: {\n                offset: \"0,5\",\n              },\n            }}\n          >\n            {alertElement}\n          </Popper>\n        )}\n      </button>\n    );\n  }\n}\n","import React, { Suspense } from \"react\";\nimport { IconButton, Button, makeStyles } from \"@material-ui/core\";\nimport { Settings as SettingsIcon } from \"@material-ui/icons\";\nimport {\n  EntriesTableModel,\n  EntriesSubscriptionCallback,\n} from \"./EntriesTableModel\";\nimport { EntryModel } from \"./EntryModel\";\nimport { Settings } from \"./Settings\";\nimport { LoadingPlaceholder } from \"./LoadingPlaceholder\";\nimport classnames from \"classnames\";\nconst EntriesTable = React.lazy(() => import(\"./EntriesTable\"));\n\nexport class ExampleModel implements EntriesTableModel {\n  unsubscribe(/*callback: EntriesSubscription*/): void {\n    // Does nothing.\n  }\n  onUpdate(/*entry: EntryModel, omitHistory: boolean*/): void {\n    // Does nothing.\n  }\n  onSettingsUpdate(/*settings: Settings*/): void {\n    // Does nothing.\n  }\n  addNewItem(): void {\n    // Does nothing.\n  }\n  addNewItemThrottled(): void {\n    // Does nothing.\n  }\n  undo(): void {\n    // Does nothing.\n  }\n  redo(): void {\n    // Does nothing.\n  }\n  sync(): void {\n    // Does nothing.\n  }\n  dispose(): void {\n    // Does nothing.\n  }\n\n  subscribe(callback: EntriesSubscriptionCallback): void {\n    callback(\n      [\n        new EntryModel(\"0\", { left: \"\", right: \"\" }, \"\")\n          .setLeft(\n            \"Mom is going to gift a cat to my beloved and not-at-all-annoying sister Ann. It's a disaster. My life is going to turn into a living nightmare!\"\n          )\n          .setRight(\n            \"I kept in secret the terrible dread I experience every time I see a cat,  but now I have to either come out or feel it daily.\\n\\n\" +\n              \"It's not that bad.  I just need to overcome my shame of this fear and talk to Mom. I think I trust Mom about that. I'll calm down a little and talk to her.\"\n          )\n          .setCreationTime(new Date(Date.now() - 901000000))\n          .setMoodsLeft([3, 0, 0, 0, 3])\n          .setMoodsRight([1, 0, 0, 0, 2]),\n        new EntryModel(\"1\", { left: \"\", right: \"\" }, \"\")\n          .setLeft(\n            \"I talked to Mom. She didn't believe me. Adults never repsect kids. I hate her for that! And what should I do now? I'm pissed off and scared at the same time.\"\n          )\n          .setRight(\n            \"I need to leave home. Probably Gran won't mind if I live with her. If she minds I'll go homeless!\\n\\nIt is better to live on the street than in a house where nobody respects you.\\n\\n\" +\n              \"10 minutes later: Okay, I think I overreacted. She wasn't disrespectful. \" +\n              \"She didn't believe me because: \\n 1) The situation is ridiculously hard to believe \\n 2) I am always at war with my dear sister \\n 3) I lied to Mom previously. \\n\\n\" +\n              \"Good news: Gran doesn't mind me living with her. But actually, I am not that enthusiastic about leaving home.\\n\" +\n              \"I think it is time to start working with my fear. The closer the cat, the more practice I have. Maybe, the cat won't be that horrific.\\n\\n\" +\n              \"If I fail I can flee to Gran's house anytime.\"\n          )\n          .setCreationTime(new Date(Date.now() - 900000000))\n          .setMoodsLeft([3, 0, 0, 0, 3, 0, 3])\n          .setMoodsRight([1, 0, 0, 0, 2, 0, 0, 0]),\n        new EntryModel(\"2\", { left: \"\", right: \"\" }, \"\")\n          .setLeft(\n            \"Ann overheard my conversation with Mom and gossiped my fear of cats to my classmates.\\n\" +\n              \"They meow every time they see me. The crappiest part is their meowing scares me and I cannot hide it.\\n\" +\n              \"They say I am dumb. Maybe they are right.\"\n          )\n          .setRight(\n            \"I shouldn't believe that I am dumb.\\n\" +\n              \"I have good grades. It is not strong proof of high intelligence (dumb kids can have good grades if they apply themselves), but it is still a good sign. \" +\n              \"Actually, I don't see any evidence that I am dumb besides their words. \" +\n              \"My classmates are just kids they know no single thing about the world, why should I believe them? \" +\n              \"Another thing is, I am smart enough to understand that there is no good way to measure intelligence. \" +\n              \"I simply don't know whether I am smart or not.\\n\" +\n              \"A butterfly with damaged wings still can fly. \" +\n              \"In the same way, even if I'm dumb I still can be happy. And I also can be a good person which is more important. \\n\\n\" +\n              \"I should stop thinking about my intelligence and focus on something constructive. I have to utterly destroy my sister!\"\n          )\n          .setCreationTime(new Date(Date.now() - 800000000))\n          .setMoodsLeft([0, 3, 0, 3])\n          .setMoodsRight([0, 0, 0, 0, 0, 0, 3]),\n        new EntryModel(\"3\", { left: \"\", right: \"\" }, \"\")\n          .setLeft(\n            \"Writing this diary takes time. I could have more fun if I stop writing it.\"\n          )\n          .setRight(\n            \"You know what else takes time? Your repetitive negative thoughts!\\n\\nThe diary helps. For example, I stopped worrying about my intelligence the moment I wrote about it. \" +\n              \"It doesn't waste my time, to the contrary, it helps me to avoid wasting my time thinking the same thought again and again. And I actually like the process of writing the diary. Why bother?\"\n          )\n          .setCreationTime(new Date(Date.now() - 1000000))\n          .setMoodsLeft([1])\n          .setMoodsRight([]),\n        new EntryModel(\"4\", { left: \"\", right: \"\" }, \"\")\n          .setLeft(\n            \"I worry I'll give up the diary because it is less entertaining than videogames or netflix. \"\n          )\n          .setRight(\n            \"I think this is a valid concern. \" +\n              \"I appreciate the effects this diary produces but they are not that addictive.\\n\\n\" +\n              \"It is the same as tooth brushing, I need to form a habit.\\n\\n\" +\n              \"Dad says that to form a habit I should avoid beating myself \" +\n              \"up and praise myself each time I do well. I think I'll try that approach. \\n\\n\" +\n              \"Why not starting right now? I am actually proud of how constructive I am. \" +\n              \" It is great that I write the diary regularly. Yes, I procrastinate sometimes, but this is not a problem! The main thing is sometimes I DON'T procrastinate. Great job!\"\n          )\n          .setCreationTime(new Date(Date.now()))\n          .setMoodsLeft([0, 2])\n          .setMoodsRight([]),\n      ],\n      new Settings(\"\"),\n      { canRedo: false, canUndo: false }\n    );\n  }\n}\n\nconst useStyles = makeStyles((theme) => ({\n  article: {\n    display: \"grid\",\n    gridTemplateColumns: \"[first-line] 1fr [last-line]\",\n    [theme.breakpoints.up(\"sm\")]: {\n      gridTemplateColumns: \"[first-line] 1fr 1fr [last-line]\",\n    },\n\n    gridGap: \"1rem\",\n    gridAutoFlow: \"dense\",\n\n    \"& h1, h4, h5\": {\n      textAlign: \"center\",\n    },\n\n    \"& h4, h5\": {\n      marginTop: 0,\n      marginBottom: 5,\n    },\n\n    \"& ul\": {\n      paddingLeft: 20,\n      marginTop: 0,\n    },\n\n    \"& section\": {\n      \"& p\": {\n        marginTop: 0,\n      },\n      \"& aside\": {\n        border: \"1px solid lightGray\",\n        borderRadius: 4,\n        alignSelf: \"center\",\n        maxWidth: 500,\n        margin: \"0px 0px 20px 0px\",\n        padding: \"10px 10px 0px 10px\",\n        backgroundColor: theme.palette.background.aside,\n      },\n\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      border: \"1px solid lightGray\",\n      borderRadius: 4,\n      padding: \"10px 10px 0px 10px\",\n      backgroundColor: theme.palette.background.paper,\n    },\n\n    \"& footer\": {\n      padding: 20,\n      paddingTop: 0,\n      display: \"flex\",\n      justifyContent: \"space-between\",\n      flexDirection: \"row\",\n    },\n  },\n\n  stretched: {\n    gridColumn: \"first-line / last-line\",\n  },\n\n  large: {\n    gridRow: \"span 2\",\n  },\n\n  tableContainer: {\n    background: \"#0000 !important\",\n    \"& h4\": {\n      textAlign: \"center\",\n      marginBottom: 0,\n    },\n\n    paddingBottom: \"1em !important\",\n  },\n}));\n\nexport const HelpWindow = React.forwardRef<\n  HTMLElement,\n  { onClose?: () => void; onOpenSettings: () => void }\n>((props, ref) => {\n  const classes = useStyles();\n\n  return (\n    <article className={classes.article} ref={ref}>\n      <h1 className={classes.stretched}>User Guide</h1>\n      <section>\n        <h4>Privacy note</h4>\n        <p>\n          All your data will be stored in a hidden folder in your Google Drive\n          account. The developers of this site will never have access to a\n          single word you leave here.\n        </p>\n      </section>\n\n      <section className={classes.large}>\n        <h4>What is this site? </h4>\n        <p>\n          This is a tool for altering your reactions to negative emotions. The\n          main goal is to create a habit of questioning your thoughts.\n        </p>\n        <aside>\n          <p>\n            This site is only a supplementary tool for cognitive behavioral\n            therapy. It is in no way a replacement for consulting with a\n            therapist. Please, get help!\n          </p>\n          <p>\n            To learn about cognitive behavioral therapy see{\" \"}\n            <a href=\"https://feelinggood.com/\">Feeling Good</a> by David Burns.\n          </p>\n        </aside>\n      </section>\n\n      <section className={classes.large}>\n        <h4> Why does questioning help? </h4>\n        <p>\n          A suffering mind tends to speak to itself coloring its view of the\n          world negatively. Such thoughts don't help feeling good, instead they\n          defend bad moods. Reactions to negative emotions become negative\n          emotions themselves. When unhappy we tell ourselves every reason why\n          we are unhappy and this talking produces more unhappiness. Writing is\n          one of the ways of breaking this vicious circle.\n        </p>\n        <p>\n          Negative thoughts are subconscious, they are crude and contain a lot\n          of logical mistakes. By questioning our thoughts we are able to notice\n          such mistakes. When a negative thought appears wrong we gain a choice\n          to think constructively a possibility to help ourselves.\n        </p>\n\n        <aside>\n          <p>\n            We learn a habit of non-constructive subconscious thinking very\n            early in life. Changing old habits is a gradual process. This is why\n            the first two ingredients of success are <b>persistence</b> and{\" \"}\n            <b>optimism</b>.\n          </p>\n        </aside>\n      </section>\n\n      <section>\n        <h4>How to use it?</h4>\n        <p>\n          When something bothers you open the site and click <b>ADD NEW ITEM</b>{\" \"}\n          (<b>Ctrl+Enter</b>) and just start answering questions.\n        </p>\n        <p>\n          If some of the questions don't fit you click\n          <IconButton onClick={props.onOpenSettings} size=\"small\">\n            <SettingsIcon></SettingsIcon>\n          </IconButton>\n          and change them.\n        </p>\n        <aside>\n          <ul>\n            <label>\n              <h5>Tips</h5>\n            </label>\n            <li>No hurry! It is best to take time thinking before writing.</li>\n            <li>\n              Don't force yourself to write \"correct\" and \"proper\" answers. Just\n              write what you think.\n            </li>\n          </ul>\n        </aside>\n      </section>\n\n      <section\n        className={classnames({\n          [classes.tableContainer]: true,\n          [classes.stretched]: true,\n        })}\n      >\n        <h4>A fictional example of a boy struggling with his fear of cats:</h4>\n\n        <Suspense fallback={<LoadingPlaceholder />}>\n          <EntriesTable model={new ExampleModel()} example></EntriesTable>\n        </Suspense>\n      </section>\n\n      <section className={classes.stretched}>\n        <h4>Disclaimer</h4>\n        <p>\n          THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n          EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n          MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\n          IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\n          CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\n          TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\n          SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n        </p>\n\n        <aside>\n          <p>\n            This is an Open Source{\" \"}\n            <a href=\"https://github.com/Romex91/self-help-sheets\">project</a>{\" \"}\n            under the MIT License. <br />\n            Report a bug or request a feature:{\" \"}\n            <a href=\"https://github.com/Romex91/self-help-sheets/issues/new\">\n              issue form\n            </a>\n            .\n          </p>\n        </aside>\n      </section>\n\n      <footer className={classes.stretched}>\n        <p> Copyright  2020 Roman Kuksin</p>\n        <Button color=\"primary\" onClick={props.onClose}>\n          Close\n        </Button>\n      </footer>\n    </article>\n  );\n});\n","import React, { Suspense } from \"react\";\n\nimport { ErrorBoundary } from \"react-error-boundary\";\nimport { Settings as SettingsIcon, Help as HelpIcon } from \"@material-ui/icons\";\nimport {\n  AppBar,\n  Collapse,\n  Grid,\n  Hidden,\n  IconButton,\n  makeStyles,\n  Modal,\n  Slide,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { LoadingPlaceholder } from \"./LoadingPlaceholder\";\nimport { gdriveAuthClient } from \"./GDriveAuthClient\";\nimport { GoogleSignInButton } from \"./GoogleSignInButton\";\nimport { HelpWindow } from \"./HelpWindow\";\nimport { CenteredTypography } from \"./CenteredTypography\";\nimport isBot from \"isbot\";\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\nimport { EntriesTableModel } from \"./EntriesTableModel\";\nconst SettingsWindow = React.lazy(() => import(\"./SettingsWindow\"));\n\nconst useStyles = makeStyles((theme) => ({\n  buttonsContainer: {\n    display: \"flex\",\n    justifyContent: \"flex-end\",\n    alignItems: \"center\",\n  },\n\n  titleContainer: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n\n  modalWindow: {\n    maxWidth: 1000,\n    height: \"90%\",\n    width: \"90%\",\n    backgroundColor: theme.palette.background.default,\n    zIndex: 1000,\n    borderRadius: 4,\n    overflow: \"auto\",\n    display: \"flex\",\n    padding: 30,\n    [theme.breakpoints.down(\"xs\")]: {\n      padding: 10,\n    },\n  },\n}));\n\ninterface ModalWindowButtonProps {\n  setOpen: (isOpen: boolean) => void;\n  open: boolean;\n  hashString: string;\n  edge?: \"start\";\n  children: [JSX.Element, JSX.Element];\n}\n\nfunction ModalWindowButton(\n  props: React.PropsWithChildren<ModalWindowButtonProps>\n) {\n  const styles = useStyles();\n  const onButtonClick = () => {\n    props.setOpen(true);\n  };\n\n  const onWindowClose = () => {\n    window.history.replaceState(null, \"\", \" \");\n    props.setOpen(false);\n  };\n\n  if (props.open && window.location.hash !== \"#\" + props.hashString) {\n    window.location.hash = props.hashString;\n  }\n\n  return (\n    <React.Fragment>\n      <IconButton edge={props.edge} onClick={onButtonClick}>\n        {props.children[0]}\n      </IconButton>\n      <Modal open={props.open} className={styles.modal} onClose={onWindowClose}>\n        <div className={styles.modalWindow}>\n          <ErrorBoundary\n            fallback={\n              <CenteredTypography>\n                Something went wrong. <br />\n                Reload the page. <br />\n                _\n              </CenteredTypography>\n            }\n          >\n            <KeyboardEventHandler isExclusive />\n            <Suspense fallback={<LoadingPlaceholder />}>\n              {React.cloneElement(props.children[1], {\n                onClose: onWindowClose,\n              })}\n            </Suspense>\n          </ErrorBoundary>\n        </div>\n      </Modal>\n    </React.Fragment>\n  );\n}\n\ninterface AppMenuProps {\n  shown: boolean;\n  model?: EntriesTableModel;\n}\nexport function AppMenu(props: AppMenuProps): JSX.Element {\n  const [settingsOpen, setSettingsOpen] = React.useState(\n    window.location.hash === \"#settings\"\n  );\n  const [helpOpen, setHelpOpen] = React.useState(\n    window.location.hash === \"#help\" || isBot(window.navigator.userAgent)\n  );\n\n  React.useEffect(() => {\n    const onHashChange = () => {\n      setSettingsOpen(window.location.hash === \"#settings\");\n      setHelpOpen(\n        window.location.hash === \"#help\" || isBot(window.navigator.userAgent)\n      );\n    };\n    window.addEventListener(\"hashchange\", onHashChange);\n    return () => {\n      window.removeEventListener(\"hashchange\", onHashChange);\n    };\n  });\n\n  const classes = useStyles();\n  return (\n    <React.Fragment>\n      <Collapse appear={false} in={props.shown}>\n        <Toolbar />\n      </Collapse>\n      <Slide appear={false} direction=\"down\" in={props.shown}>\n        <AppBar>\n          <Toolbar>\n            <Grid container justify=\"space-between\">\n              <Hidden xsDown>\n                <Grid item xs={4}></Grid>\n              </Hidden>\n              <Grid item xs={4} className={classes.titleContainer}>\n                <Hidden xsDown>\n                  <Typography variant=\"h6\" align=\"center\">\n                    Self-help sheets\n                  </Typography>\n                  <Typography variant=\"caption\" align=\"center\">\n                    Document your inner dialog\n                  </Typography>\n                </Hidden>\n                <Hidden smUp>\n                  <Typography align=\"center\">Self-help sheets</Typography>\n                </Hidden>\n              </Grid>\n              <Grid item className={classes.buttonsContainer} xs={8} sm={4}>\n                <ModalWindowButton\n                  hashString=\"help\"\n                  open={helpOpen}\n                  setOpen={setHelpOpen}\n                >\n                  <HelpIcon />\n                  <HelpWindow\n                    onOpenSettings={() => {\n                      setHelpOpen(false);\n                      setSettingsOpen(true);\n                    }}\n                  ></HelpWindow>\n                </ModalWindowButton>\n\n                <ModalWindowButton\n                  open={settingsOpen}\n                  setOpen={setSettingsOpen}\n                  hashString=\"settings\"\n                  edge=\"start\"\n                >\n                  <SettingsIcon />\n\n                  <SettingsWindow model={props.model} />\n                </ModalWindowButton>\n\n                <GoogleSignInButton\n                  gdriveAuthClient={gdriveAuthClient}\n                ></GoogleSignInButton>\n              </Grid>\n            </Grid>\n          </Toolbar>\n        </AppBar>\n      </Slide>\n    </React.Fragment>\n  );\n}\n","import React, { Suspense } from \"react\";\nimport { gdriveAuthClient } from \"./GDriveAuthClient\";\nimport { CenteredTypography } from \"./CenteredTypography\";\nimport { LoadingPlaceholder } from \"./LoadingPlaceholder\";\nimport { AuthStates } from \"./AuthClient\";\nconst EntriesTable = React.lazy(() => import(\"./EntriesTable\"));\n\nexport function AppContent(props: {\n  tableProps?: React.ComponentProps<typeof EntriesTable>;\n}): JSX.Element {\n  const [signInState, setSignInState] = React.useState(gdriveAuthClient.state);\n  React.useEffect(() => {\n    gdriveAuthClient.addStateListener(setSignInState);\n  }, []);\n\n  if (signInState === AuthStates.SIGNED_OUT) {\n    return <CenteredTypography>Sign in to proceed...</CenteredTypography>;\n  } else if (signInState === AuthStates.FAILED) {\n    return (\n      <CenteredTypography>\n        S-meth#ng wen# wr00ng..^ Relo the page.\n        <br />\n        Check th networ con#5.0%^&\n        <br />    .   .\n        <br />\n      </CenteredTypography>\n    );\n  } else {\n    return (\n      <Suspense fallback={<LoadingPlaceholder color=\"primary\" />}>\n        {props.tableProps == undefined ? (\n          <LoadingPlaceholder color=\"secondary\" />\n        ) : (\n          <EntriesTable {...props.tableProps} />\n        )}\n      </Suspense>\n    );\n  }\n}\n","import { gdriveAuthClient } from \"./GDriveAuthClient\";\nimport { BackendMap, BackendKeyMeta } from \"./BackendMap\";\nimport { AuthStates } from \"./AuthClient\";\nimport assert from \"assert\";\n\nclass GDriveMap implements BackendMap {\n  private settings_key: string | null = null;\n\n  async _getSettingsKey(): Promise<string> {\n    if (this.settings_key !== null) {\n      return this.settings_key;\n    }\n\n    const keys: BackendKeyMeta[] = await find('name = \"settings.json\"');\n    if (keys.length === 0) {\n      return await createEmptyFile(\"settings.json\");\n    }\n    if (keys.length === 1) {\n      return keys[0].id;\n    }\n\n    console.error(\"Invalid state. Multiple settings.json. \");\n    const [firstKey, ...restKeys] = keys;\n\n    restKeys.map((x) => deleteFile(x.id));\n\n    return firstKey.id;\n  }\n\n  async createKey(): Promise<string> {\n    throwIfNotSignedIn();\n    return await createEmptyFile(\"item.json\");\n  }\n\n  async delete(key: string): Promise<boolean> {\n    throwIfNotSignedIn();\n    return await deleteFile(key);\n  }\n\n  async set(key: string, value: string): Promise<void> {\n    throwIfNotSignedIn();\n    return await upload(key, value);\n  }\n\n  async get(key: string): Promise<string | undefined> {\n    throwIfNotSignedIn();\n    const result = await download(key);\n    return result;\n  }\n\n  async getMd5(key: string): Promise<string> {\n    throwIfNotSignedIn();\n    return await getMd5(key);\n  }\n\n  async getAllKeys() {\n    throwIfNotSignedIn();\n    const result = await find('name = \"item.json\"');\n    result.forEach((element) => {\n      if (!element.description) element.description = \"\";\n    });\n    return result;\n  }\n\n  async getSettings() {\n    throwIfNotSignedIn();\n    const settingsContent = await download(await this._getSettingsKey());\n    assert(settingsContent != undefined);\n    return settingsContent;\n  }\n\n  async setSettings(settingsContent: string) {\n    throwIfNotSignedIn();\n    await upload(await this._getSettingsKey(), settingsContent);\n  }\n\n  async setDescription(key: string, description: string) {\n    throwIfNotSignedIn();\n    return patchDescription(key, description);\n  }\n}\n\nexport const gdriveMap = new GDriveMap();\nObject.seal(gdriveMap);\n\n// PRIVATE SECTION\n// Borrowed from here: https://habr.com/ru/post/440844/\n\nfunction throwIfNotSignedIn() {\n  if (gdriveAuthClient.state !== AuthStates.SIGNED_IN)\n    throw new Error(\"Incorrect state. Sign in to continue.\");\n}\n\nfunction checkHttpStatus<Response extends { status?: number }>(\n  arg: Promise<Response>\n): Promise<Response> {\n  return arg.then((resp) => {\n    if (resp && resp.status && (resp.status < 200 || resp.status > 299))\n      throw resp;\n    return resp;\n  });\n}\n\n// returns fileId\nasync function createEmptyFile(name: string) {\n  const result = await checkHttpStatus(\n    window.gapi.client.drive.files.create({\n      resource: {\n        name: name,\n        mimeType: \"text/plain\",\n        parents: [\"appDataFolder\"],\n      },\n      fields: \"id\",\n    })\n  );\n\n  if (!result.result.id)\n    throw new Error(\n      \"GDrive created an empty file but didn't return |id| field. This shouldn't happen.\"\n    );\n\n  return result.result.id;\n}\n\nasync function patchDescription(fileId: string, description: string) {\n  const boundary = \"-------314159265358979323846\";\n  const delimiter = \"\\r\\n--\" + boundary + \"\\r\\n\";\n  const close_delim = \"\\r\\n--\" + boundary + \"--\";\n\n  const multipartRequestBody =\n    delimiter +\n    \"Content-Type: application/json\\r\\n\\r\\n\" +\n    JSON.stringify({ description }) +\n    close_delim;\n\n  await checkHttpStatus(\n    window.gapi.client.request({\n      path: `/upload/drive/v3/files/${fileId}`,\n      method: \"PATCH\",\n      params: { uploadType: \"multipart\" },\n      body: multipartRequestBody,\n      headers: {\n        \"Content-Type\": 'multipart/mixed; boundary=\"' + boundary + '\"',\n      },\n    })\n  );\n}\n\nasync function upload(fileId: string, content: string) {\n  await checkHttpStatus(\n    window.gapi.client.request({\n      path: `/upload/drive/v3/files/${fileId}`,\n      method: \"PATCH\",\n      params: { uploadType: \"media\" },\n      body: content,\n    })\n  );\n}\n\nasync function getMd5(fileId: string) {\n  const result = await checkHttpStatus(\n    window.gapi.client.request({\n      path: `/drive/v3/files/${fileId}`,\n      method: \"GET\",\n      params: { fields: \"md5Checksum\" },\n    })\n  );\n\n  return result.result.md5Checksum;\n}\n\nasync function download(fileId: string) {\n  try {\n    const resp = await checkHttpStatus(\n      window.gapi.client.drive.files.get({\n        fileId: fileId,\n        alt: \"media\",\n      })\n    );\n\n    return resp.body;\n  } catch (e) {\n    if (e.status !== 404) throw e;\n    return undefined;\n  }\n}\n\n// returns file ids sorted by creation time\nasync function find(query: string): Promise<BackendKeyMeta[]> {\n  let ret: BackendKeyMeta[] = [];\n  let token: string | undefined;\n  do {\n    const resp = await checkHttpStatus(\n      window.gapi.client.drive.files.list({\n        spaces: \"appDataFolder\",\n        fields: \"files(id, description, md5Checksum), nextPageToken\",\n        pageSize: 1000,\n        pageToken: token,\n        orderBy: \"createdTime\",\n        q: query,\n      })\n    );\n    if (!resp.result.files) {\n      throw new Error(\n        \"|gapi.client.drive.files.list| request is successful but doesn't contain |files| field.\"\n      );\n    }\n    ret = ret.concat(\n      resp.result.files.map(\n        (x): BackendKeyMeta => {\n          if (x.id && x.md5Checksum) {\n            return {\n              id: x.id,\n              md5Checksum: x.md5Checksum,\n              description: x.description,\n            };\n          }\n\n          throw new Error(\n            \"|gapi.client.drive.files.list| request is successful but some |files| miss |id| or |md5Checksum| fields.\"\n          );\n        }\n      )\n    );\n    token = resp.result.nextPageToken;\n  } while (token);\n  return ret;\n}\n\nasync function deleteFile(fileId: string) {\n  try {\n    await checkHttpStatus(\n      window.gapi.client.drive.files.delete({\n        fileId: fileId,\n      })\n    );\n    return true;\n  } catch (err) {\n    if (err.status === 404) {\n      return false;\n    }\n    throw err;\n  }\n}\n","import { BackendMap, BackendKeyMeta } from \"../BackendMap\";\r\n\r\nexport class ErrorHandler implements BackendMap {\r\n  constructor(private _innerBackendMap: BackendMap) {}\r\n\r\n  async _exponentialRetry<T>(callback: (this: void) => Promise<T>): Promise<T> {\r\n    let retriesCount = 1;\r\n    while (retriesCount < 10) {\r\n      try {\r\n        return await callback();\r\n      } catch (error) {\r\n        const secondsToNextRetry = 1 * 2 ** retriesCount++;\r\n        console.error(\r\n          `Failed running ${callback.name} : ${error.message}. Will try again after ${secondsToNextRetry} seconds.`\r\n        );\r\n        await this.sleep(secondsToNextRetry * 1000);\r\n      }\r\n    }\r\n\r\n    throw new Error(`Failed running ${callback.name} after 10 attemts.`);\r\n  }\r\n\r\n  async createKey(): Promise<string> {\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.createKey.bind(this._innerBackendMap)\r\n    );\r\n  }\r\n\r\n  async delete(key: string) : Promise<boolean>{\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.delete.bind(this._innerBackendMap, key)\r\n    );\r\n  }\r\n\r\n  async set(key: string, value: string):Promise<void> {\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.set.bind(this._innerBackendMap, key, value)\r\n    );\r\n  }\r\n\r\n  async get(key: string) :Promise<string|undefined>{\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.get.bind(this._innerBackendMap, key)\r\n    );\r\n  }\r\n\r\n  async getMd5(key: string) : Promise<string>{\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.getMd5.bind(this._innerBackendMap, key)\r\n    );\r\n  }\r\n\r\n  async getAllKeys():Promise<BackendKeyMeta[]> {\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.getAllKeys.bind(this._innerBackendMap)\r\n    );\r\n  }\r\n\r\n  async getSettings() :Promise<string>{\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.getSettings.bind(this._innerBackendMap)\r\n    );\r\n  }\r\n\r\n  async setSettings(settingsContent: string):Promise<void> {\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.setSettings.bind(\r\n        this._innerBackendMap,\r\n        settingsContent\r\n      )\r\n    );\r\n  }\r\n\r\n  async setDescription(key: string, description: string):Promise<void> {\r\n    return await this._exponentialRetry(\r\n      this._innerBackendMap.setDescription.bind(\r\n        this._innerBackendMap,\r\n        key,\r\n        description\r\n      )\r\n    );\r\n  }\r\n\r\n  private sleep(ms: number) {\r\n    return new Promise((resolve) => setTimeout(resolve, ms));\r\n  }\r\n}\r\n","import { BackendKeyMeta, BackendMap } from \"../BackendMap\";\r\n\r\nimport Bottleneck from \"bottleneck\";\r\n\r\nexport class RequestThrottler implements BackendMap {\r\n  private _limiter = new Bottleneck({\r\n    maxConcurrent: 5,\r\n    minTime: 50,\r\n  });\r\n\r\n  constructor(private _innerBackendMap: BackendMap) {}\r\n\r\n  async createKey(): Promise<string> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.createKey()\r\n    );\r\n  }\r\n\r\n  async delete(key: string): Promise<boolean> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.delete(key)\r\n    );\r\n  }\r\n\r\n  async set(key: string, value: string): Promise<void> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.set(key, value)\r\n    );\r\n  }\r\n\r\n  async get(key: string): Promise<string| undefined> {\r\n    return await this._limiter.schedule(() => this._innerBackendMap.get(key));\r\n  }\r\n\r\n  async getMd5(key: string): Promise<string> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.getMd5(key)\r\n    );\r\n  }\r\n\r\n  async getAllKeys(): Promise<BackendKeyMeta[]> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.getAllKeys()\r\n    );\r\n  }\r\n\r\n  async getSettings(): Promise<string> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.getSettings()\r\n    );\r\n  }\r\n\r\n  async setSettings(settingsContent: string): Promise<void> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.setSettings(settingsContent)\r\n    );\r\n  }\r\n\r\n  async setDescription(key: string, description: string) : Promise<void> {\r\n    return await this._limiter.schedule(() =>\r\n      this._innerBackendMap.setDescription(key, description)\r\n    );\r\n  }\r\n}\r\n","import { BackendMap, BackendKeyMeta } from \"../BackendMap\";\nimport { ErrorHandler } from \"./ErrorHandler\";\nimport { RequestThrottler } from \"./RequestThrottler\";\n\nimport _ from \"lodash\";\nimport md5 from \"md5\";\nimport { Mutex } from \"async-mutex\";\n\nconst chunkSize = 8;\n\nexport function applyQuotaSavers(backendMap: BackendMap): BackendMultiplexor {\n  return new BackendMultiplexor(\n    new RequestThrottler(new ErrorHandler(backendMap))\n  );\n}\n\n// Asociates several pseudo keys with each Google Drive key.\n// Reduces amount of calls to _innerBackendMap methods without changing\n// its interface.\n//\n// Prevents users of this class from accessing md5 because server cannot\n// compute md5 for multiplexed sub-items.\n// It replaces |md5checksum| with |outdated|=true in getAllKeys result.\n// |outdated| means that the server has fresher data so the client\n// should call |get| for it.\nexport class BackendMultiplexor implements BackendMap {\n  private _changeKeysMutex = new Mutex();\n  private _innerKeys?: string[];\n\n  // Contains instances of |this._Chunk| for each key inside |this._innerKeys|.\n  private _chunks = new Map();\n\n  constructor(private _innerBackendMap: BackendMap) {}\n\n  async createKey(): Promise<string> {\n    const release = await this._changeKeysMutex.acquire();\n    try {\n      if (this._innerKeys == undefined) {\n        throw new Error(\"You should call getAllKeys first\");\n      }\n\n      const getLastInnerKey = () => {\n        if (!this._innerKeys || this._innerKeys.length === 0) return undefined;\n        return this._innerKeys[this._innerKeys.length - 1];\n      };\n\n      if (\n        this._innerKeys.length === 0 ||\n        this._chunks.get(getLastInnerKey()).isFull()\n      ) {\n        const newInnerKey = await this._innerBackendMap.createKey();\n\n        this._innerKeys.push(newInnerKey);\n        this._chunks.set(\n          newInnerKey,\n          new Chunk(this.createChunkConnector(newInnerKey), undefined, \"\")\n        );\n      }\n\n      const innerKey = getLastInnerKey();\n      const keyPrefix = await this._chunks.get(innerKey).createSubKey();\n      return keyPrefix + \"-\" + innerKey;\n    } finally {\n      release();\n    }\n  }\n\n  async delete(key: string): Promise<boolean> {\n    const release = await this._changeKeysMutex.acquire();\n    try {\n      const { prefixKey, innerKey } = this.splitOuterKey(key);\n      if (!this._chunks.has(innerKey)) return false;\n\n      return await this._chunks.get(innerKey).delete(prefixKey);\n    } finally {\n      release();\n    }\n  }\n\n  async set(key: string, value: string): Promise<void> {\n    const { prefixKey, innerKey } = this.splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return;\n    this._chunks.get(innerKey).setValue(prefixKey, value);\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  async getMd5(_key: string): Promise<string> {\n    throw new Error(\n      \"Don't call getMd5 on this class. \" +\n        \"Server cannot compute md5 for this item because it is multiplexed.\" +\n        \"In order to sync call |getAllKeys| and see if some item has |outdated===true| and call |get| for them.\"\n    );\n  }\n\n  async get(key: string): Promise<string | undefined> {\n    const { prefixKey, innerKey } = this.splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return undefined;\n    return this._chunks.get(innerKey).getValue(prefixKey);\n  }\n\n  async getAllKeys(): Promise<(BackendKeyMeta & { outdated: boolean })[]> {\n    const release = await this._changeKeysMutex.acquire();\n    try {\n      const newInnerKeys = await this._innerBackendMap.getAllKeys();\n      const outerKeys: (BackendKeyMeta & { outdated: boolean })[] = [];\n      const newChunks: Map<string, Chunk> = new Map();\n\n      newInnerKeys.forEach((innerKey) => {\n        let outdated = true;\n\n        if (this._chunks.has(innerKey.id)) {\n          const chunk = this._chunks.get(innerKey.id);\n          newChunks.set(innerKey.id, chunk);\n\n          outdated = chunk.onMetadataUpdate(\n            innerKey.description,\n            innerKey.md5Checksum\n          ).outdated;\n        } else {\n          newChunks.set(\n            innerKey.id,\n            new Chunk(\n              this.createChunkConnector(innerKey.id),\n              innerKey.description,\n              innerKey.md5Checksum ?? \"\"\n            )\n          );\n        }\n        const chunk = newChunks.get(innerKey.id);\n        chunk?.listSubKeys().forEach((subkey) => {\n          outerKeys.push({\n            id: subkey + \"-\" + innerKey.id,\n            outdated,\n            description: chunk?.getDescription(subkey),\n          });\n        });\n      });\n\n      this._chunks = newChunks;\n      this._innerKeys = newInnerKeys.map((x) => x.id);\n\n      return outerKeys;\n    } finally {\n      release();\n    }\n  }\n\n  async getSettings(): Promise<string> {\n    return await this._innerBackendMap.getSettings();\n  }\n\n  async setSettings(settingsContent: string): Promise<void> {\n    const release = await this._changeKeysMutex.acquire();\n    await this._innerBackendMap.setSettings(settingsContent);\n    release();\n  }\n\n  async setDescription(key: string, description: string): Promise<void> {\n    const { prefixKey, innerKey } = this.splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return;\n    this._chunks.get(innerKey).setDescription(prefixKey, description);\n  }\n\n  private createChunkConnector(innerkey: string): ChunkConnector {\n    return {\n      setValue: (serializedValue) => {\n        this._innerBackendMap.set(innerkey, serializedValue);\n      },\n      setDescription: (serializedDescription) => {\n        this._innerBackendMap.setDescription(innerkey, serializedDescription);\n      },\n      getValue: async () => {\n        return await this._innerBackendMap.get(innerkey);\n      },\n      delete: async () => {\n        if (this._innerKeys == undefined) return false;\n        this._innerKeys.splice(this._innerKeys.indexOf(innerkey), 1);\n        this._chunks.delete(innerkey);\n        return await this._innerBackendMap.delete(innerkey);\n      },\n    };\n  }\n\n  private splitOuterKey(\n    outerKey: string\n  ): { prefixKey: number; innerKey: string } {\n    const separator = outerKey.indexOf(\"-\");\n    const prefixKey = Number(outerKey.substring(0, separator));\n    const innerKey = outerKey.substring(separator + 1);\n    return { prefixKey, innerKey };\n  }\n}\n\ninterface ChunkConnector {\n  setValue(serializedValue: string): void;\n  setDescription(serializedDescription: string): void;\n  getValue(): Promise<string | undefined>;\n  delete(): Promise<boolean>;\n}\n\n// Each inner key contains a chunk of outer keys.\n// If innerBackendMap creates key \"abcdefg\", BackendMultiplexor will\n// use it to store chunk of sub-keys : \"0-abcdefg\", \"1-abcdefg\", ..., \"chunkSize-abcdefg\"\n//\n// To get \"4-abcdefg\" description you should make the next call:\n// this._chunks[\"abcdefg\"].getDescription(4)\n//\n// md5Checksum is common for all subkeys.\nclass Chunk {\n  // |values| and |descriptions| are arrays containing up-to chunkSize elements.\n  private _values?: string[];\n  private _descriptions: (string | undefined)[];\n\n  // result of JSON.stringify(this.values);\n  private _serializedValues?: string;\n\n  // |isDirty| is set true when |set| for one of subkeys has been called.\n  // In that case BackendMultiplexor will think that it has the most fresh data\n  // and it will ignore updates in |getAllKeys| until it contains |md5Checksum|\n  // equal to md5(this._serializedValues).\n  private _isDirty: boolean;\n\n  constructor(\n    private _connector: ChunkConnector,\n    private _serializedDescriptions: string | undefined,\n    private _initialMd5Checksum: string\n  ) {\n    if (_serializedDescriptions == undefined) {\n      this._values = Array(chunkSize).fill(\"\");\n      this._descriptions = [];\n      this._isDirty = true;\n    } else {\n      this._isDirty = false;\n      this._descriptions = _serializedDescriptions\n        .split(\",\")\n        .map((x) => (x === \"null\" ? undefined : x));\n    }\n  }\n\n  isFull() {\n    return this._descriptions.length >= chunkSize;\n  }\n\n  listSubKeys(): number[] {\n    const subkeys = [];\n    for (let i = 0; i < this._descriptions.length && i < chunkSize; i++)\n      if (this._descriptions[i] != undefined) subkeys.push(i);\n    return subkeys;\n  }\n\n  async createSubKey() {\n    if (this._values == undefined) await this._fetchValuesSynchronised();\n    if (this._values == undefined) return undefined;\n\n    if (this.isFull())\n      throw new Error(\"Do not call createSubKey for full chunks\");\n\n    const subkey = this._descriptions.length;\n    this._descriptions.push(\"\");\n    // Just to set correct state;\n    this.setDescription(subkey, \"\");\n\n    return subkey;\n  }\n\n  async delete(subkey: number) {\n    if (this._descriptions[subkey] == undefined)\n      throw new Error(\"item is already deleted\");\n\n    if (this._descriptions.filter((x) => x != undefined).length === 1)\n      await this._connector.delete();\n    else this.setDescription(subkey, undefined);\n  }\n\n  async setValue(subkey: number, value: string) {\n    if (this._values == undefined) await this._fetchValuesSynchronised();\n    if (this._values == undefined) return;\n\n    this._values[subkey] = value;\n    this._isDirty = true;\n    this._serializedValues = undefined;\n    this.onValueSet();\n  }\n\n  async getValue(subkey: number) {\n    if (this._descriptions[subkey] === undefined) return undefined;\n    if (this._values == undefined) await this._fetchValuesSynchronised();\n    if (this._values == undefined) return undefined;\n\n    return this._values[subkey];\n  }\n\n  setDescription(subkey: number, description: string | undefined) {\n    if (\n      subkey >= this._descriptions.length ||\n      this._descriptions[subkey] == undefined\n    ) {\n      throw new Error(\n        \"undefined description means subkey doesn't exist. Did you call createKey?\"\n      );\n    }\n\n    this._descriptions[subkey] = description;\n    this._serializedDescriptions = undefined;\n    this._isDirty = true;\n\n    this.onDescriptionSet();\n  }\n\n  getDescription(subkey: number): string | undefined {\n    return this._descriptions[subkey];\n  }\n\n  onMetadataUpdate(\n    serializedDescriptions: string | undefined,\n    md5Checksum: string\n  ) {\n    if (this._isDirty) {\n      if (\n        this._serializedValues != undefined &&\n        this._serializedDescriptions != undefined &&\n        md5(this._serializedValues) === md5Checksum &&\n        this._serializedDescriptions === serializedDescriptions\n      ) {\n        this._isDirty = false;\n        this._initialMd5Checksum = md5Checksum;\n      }\n      return { outdated: false };\n    }\n\n    if (\n      this._serializedDescriptions !== serializedDescriptions &&\n      serializedDescriptions != undefined\n    ) {\n      this._serializedDescriptions = serializedDescriptions;\n      this._descriptions = serializedDescriptions\n        .split(\",\")\n        .map((x) => (x === \"null\" ? undefined : x));\n    }\n\n    if (this._initialMd5Checksum !== md5Checksum) {\n      this._serializedValues = undefined;\n      this._values = undefined;\n      return { outdated: true };\n    }\n\n    return { outdated: false };\n  }\n\n  private onValueSet = _.debounce(() => {\n    this._serializedValues = JSON.stringify(this._values);\n    this._connector.setValue(this._serializedValues);\n  }, 1000);\n\n  private onDescriptionSet = _.debounce(() => {\n    this._serializedDescriptions = this._descriptions\n      .map((x) => (x == undefined ? \"null\" : x))\n      .join(\",\");\n\n    this._connector.setDescription(this._serializedDescriptions);\n  }, 1000);\n\n  private async _fetchValuesSynchronised() {\n    if (this._fetchPromise == undefined) {\n      this._fetchPromise = this.fetchValues().finally(() => {\n        this._fetchPromise = undefined;\n      });\n    }\n    await this._fetchPromise;\n  }\n\n  private _fetchPromise?: Promise<void>;\n\n  private async fetchValues() {\n    const serializedValues = await this._connector.getValue();\n    try {\n      if (!serializedValues)\n        throw new Error(\"Bad server data. Not valid array\");\n\n      const values = JSON.parse(serializedValues);\n      if (!Array.isArray(values)) {\n        throw new Error(\"Bad server data. Not valid array\");\n      }\n\n      while (values.length < this._descriptions.length) {\n        values.push(\"\");\n      }\n      this._values = values;\n      this._serializedValues = serializedValues;\n      this._initialMd5Checksum = md5(serializedValues);\n      this._isDirty = false;\n    } catch (error) {\n      // In theory, server may contain arbitrary data.\n      // BackendMultiplexor should be able recover in this case.\n      console.error(\n        \"Bad response from server:\" + error.message + \" \" + serializedValues\n      );\n\n      if (this._values == undefined) {\n        this._isDirty = false;\n        this._values = Array(chunkSize).fill(undefined);\n        this._serializedValues = serializedValues;\n        this._initialMd5Checksum = serializedValues\n          ? md5(serializedValues)\n          : \"\";\n      }\n    }\n  }\n}\n","import React from \"react\";\nimport \"./App.css\";\nimport \"fontsource-roboto\";\nimport {\n  createMuiTheme,\n  CssBaseline,\n  ThemeProvider,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport { blue, blueGrey } from \"@material-ui/core/colors\";\n\nimport { AppMenu } from \"./AppMenu\";\nimport { AppContent } from \"./AppContent\";\nimport { gdriveMap } from \"./GDriveMap\";\nimport { gdriveAuthClient } from \"./GDriveAuthClient\";\n\nimport { EntriesTableModel } from \"./EntriesTableModel\";\n\nimport { applyQuotaSavers } from \"./BackendQuotaSavers/BackendMultiplexor\";\nimport { AuthStates } from \"./AuthClient\";\n\n// Widen MUI color pallete by adding |aside| to make typescript happy.\ndeclare module \"@material-ui/core/styles/createPalette\" {\n  interface TypeBackground {\n    aside: string;\n  }\n}\n\nfunction App(): JSX.Element {\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? \"dark\" : \"light\",\n          primary: { main: prefersDarkMode ? blueGrey[900] : blue[800] },\n          background: {\n            default: prefersDarkMode ? \"#303030\" : blueGrey[50],\n            aside: prefersDarkMode ? \"#777\" : \"lightyellow\",\n          },\n        },\n      }),\n    [prefersDarkMode]\n  );\n  const [appBarShown, setAppBarShown] = React.useState(true);\n  const onTableEntryFocus = React.useCallback(() => {\n    if (window.innerHeight < 700) {\n      setAppBarShown(false);\n    }\n  }, []);\n\n  const onShowAppBar = React.useCallback(() => {\n    setAppBarShown(true);\n  }, []);\n\n  const [model, setModel] = React.useState<EntriesTableModel | undefined>(\n    undefined\n  );\n\n  React.useEffect(() => {\n    const importPromise = import(\"./EntriesTableModelImpl\");\n    gdriveAuthClient.addStateListener(async (newState) => {\n      if (newState === AuthStates.SIGNED_IN) {\n        const { EntriesTableModelImpl } = await importPromise;\n        setModel(\n          new EntriesTableModelImpl(\n            applyQuotaSavers(gdriveMap),\n            gdriveAuthClient\n          )\n        );\n      } else {\n        setModel((oldModel) => {\n          if (oldModel) oldModel.dispose();\n          return undefined;\n        });\n      }\n    });\n  }, []);\n\n  const tableProps = model\n    ? {\n        model,\n        appBarShown,\n        onShowAppBar,\n        example: false,\n        onFocus: onTableEntryFocus,\n      }\n    : undefined;\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppMenu shown={appBarShown} model={model}></AppMenu>\n      <AppContent tableProps={tableProps} />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://cra.link/PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config): void {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://cra.link/PWA\"\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://cra.link/PWA.\"\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { \"Service-Worker\": \"script\" },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\"\n      );\n    });\n}\n\nexport function unregister(): void {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorkerRegistration\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\nserviceWorker.register();\n","import isBot from \"isbot\";\nimport {AuthClient, AuthStates} from \"./AuthClient\"\n\nexport class GDriveAuthClient extends AuthClient {\n  constructor() {\n    super();\n    if (isBot(window.navigator.userAgent)) {\n      this._state = AuthStates.SIGNED_OUT;\n      this.notifyStateChanged();\n      return;\n    }\n\n    loadGapi(async () => {\n      try {\n        if (!window.gapi) {\n          throw new Error(\"Failed loading GAPI\");\n        }\n\n        await new Promise<void>((resolve) =>\n          window.gapi.load(\"client:auth2\", resolve)\n        );\n\n        await window.gapi.client.init({\n          clientId:\n            \"479709565206-4ek8a502261s9sussiehpa5v146ns2ku.apps.googleusercontent.com\",\n          discoveryDocs: [\n            \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\",\n          ],\n          scope: \"https://www.googleapis.com/auth/drive.appfolder\",\n        });\n\n        if (!isGapiLoaded()) {\n          throw new Error(\"Failed registering client_id.\");\n        }\n\n        this._updateSignInState();\n\n        window.gapi.auth2\n          .getAuthInstance()\n          .isSignedIn.listen(this._updateSignInState.bind(this));\n      } catch (error) {\n        console.log(error);\n        this._state = AuthStates.FAILED;\n        this.notifyStateChanged();\n        return;\n      }\n    });\n  }\n\n  signIn(): void {\n    console.assert(isGapiLoaded());\n    if ((window as unknown as {mocha: unknown}).mocha != undefined) {\n      window.gapi.auth2.getAuthInstance().signIn();\n    } else {\n      window.gapi.auth2.getAuthInstance().signIn({\n        prompt: \"select_account\",\n      });\n    }\n  }\n\n  signOut(): void {\n    console.assert(isGapiLoaded());\n    const auth_instance = window.gapi.auth2.getAuthInstance();\n    auth_instance.signOut();\n  }\n\n  private _updateSignInState(): void {\n    console.assert(this._state !== AuthStates.FAILED);\n    const current_state = isSignedIn()\n      ? AuthStates.SIGNED_IN\n      : AuthStates.SIGNED_OUT;\n    if (this._state !== current_state) {\n      this._state = current_state;\n      this.notifyStateChanged();\n    }\n  }\n}\n\nexport const gdriveAuthClient = new GDriveAuthClient();\n\n// PRIVATE SECTION\nfunction loadGapi(ondone: ()=>void) {\n  console.assert(typeof ondone == \"function\");\n  console.assert(ondone.length === 0);\n  const script = document.createElement(\"script\");\n  script.async = true;\n  script.src = \"https://apis.google.com/js/api.js\";\n  document.body.appendChild(script);\n  script.onload = ondone;\n  script.onerror = ondone;\n}\n\nfunction isGapiLoaded() {\n  return window.gapi && window.gapi.auth2 && window.gapi.client;\n}\n\nfunction isSignedIn() {\n  console.assert(isGapiLoaded());\n  return window.gapi.auth2.getAuthInstance().isSignedIn.get();\n}\n","import React from \"react\";\n\nimport { CenteredTypography } from \"./CenteredTypography\";\nimport { CircularProgress } from \"@material-ui/core\";\n\nexport function LoadingPlaceholder(\n  props: React.ComponentProps<typeof CircularProgress>\n): JSX.Element {\n  return (\n    <React.Fragment>\n      <CenteredTypography>\n        <CircularProgress {...props} />\n      </CenteredTypography>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport { Typography, makeStyles } from \"@material-ui/core\";\n\nconst useStyles = makeStyles({\n  container: {\n    flex: 1,\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  },\n});\n\nexport function CenteredTypography(\n  props: React.ComponentProps<typeof Typography>\n): JSX.Element {\n  const classes = useStyles();\n  return (\n    <div className={classes.container}>\n      <Typography align=\"center\" variant=\"h4\" {...props}>\n        {props.children}\n      </Typography>\n    </div>\n  );\n}\n","export enum EntryStatus {\n  // The http request for the text of the entry has been sent.\n  LOADING = \"loading\",\n  // This entry has never been rendered because user never\n  // scrolled to its position.\n  HIDDEN = \"hidden\",\n  // User pressed DELETE button.\n  DELETED = \"deleted\",\n}\n\nexport enum LastChange {\n  EDIT_LEFT,\n  EDIT_RIGHT,\n  NONE,\n}\n\nexport interface EntryData {\n  left: string;\n  right: string;\n}\n\n// EntryModel is immutable. setLeft setRight delete and clear return a new copy.\nexport class EntryModel {\n  _initiallyCollapsed;\n  _focused;\n\n  private _description = \"\";\n\n  // Cached values for performance. Gets recomputed only when setDescription is called.\n  private _moodArrays: [number[], number[]] = [[], []];\n  private _creationTime?: Date;\n\n  public lastChange: LastChange = LastChange.NONE;\n\n  static isEntryData(data: EntryData | EntryStatus): data is EntryData {\n    const entryData = data as EntryData;\n    return entryData.left !== undefined && entryData.right !== undefined;\n  }\n\n  constructor(\n    private _key: string,\n    private _data: EntryData | EntryStatus,\n    description: string\n  ) {\n    this._initiallyCollapsed = false;\n    this._focused = false;\n\n    this.setDescriptionImpl(description);\n  }\n\n  isDataLoaded(): boolean {\n    return (\n      this._data !== EntryStatus.LOADING && this._data !== EntryStatus.HIDDEN\n    );\n  }\n\n  get data(): EntryData | EntryStatus {\n    if (this._data instanceof Object) return { ...this._data };\n    return this._data;\n  }\n\n  get key(): string {\n    return this._key;\n  }\n\n  get description(): string {\n    if (!this.isDataLoaded()) return \"\";\n    return this._description;\n  }\n  setDescription(description: string): EntryModel {\n    const cloneModel = this.clone();\n    cloneModel.setDescriptionImpl(description);\n    return cloneModel;\n  }\n\n  get left(): string {\n    if (!EntryModel.isEntryData(this._data)) return \"\";\n    return this._data.left;\n  }\n  setLeft(left: string): EntryModel {\n    if (!EntryModel.isEntryData(this._data)) {\n      console.error(\"bad status\");\n      return this;\n    }\n\n    const cloneModel = this.clone();\n    cloneModel._data = { ...this._data, left };\n    cloneModel.lastChange = LastChange.EDIT_LEFT;\n    return cloneModel;\n  }\n\n  get right(): string {\n    if (!EntryModel.isEntryData(this._data)) return \"\";\n    return this._data.right;\n  }\n  setRight(right: string): EntryModel {\n    if (!EntryModel.isEntryData(this._data)) {\n      console.error(\"bad status\");\n      return this;\n    }\n\n    const cloneModel = this.clone();\n    cloneModel._data = { ...this._data, right };\n    cloneModel.lastChange = LastChange.EDIT_RIGHT;\n    return cloneModel;\n  }\n\n  get moodArrays(): [number[], number[]] {\n    return this._moodArrays;\n  }\n\n  setMoodsLeft(left: number[]): EntryModel {\n    const result = this.setDescription(\n      EntryModel._generateDescription(\n        left,\n        this._moodArrays[1],\n        this._creationTime\n      )\n    );\n    result.lastChange = LastChange.EDIT_LEFT;\n    return result;\n  }\n\n  setMoodsRight(right: number[]): EntryModel {\n    const result = this.setDescription(\n      EntryModel._generateDescription(\n        this._moodArrays[0],\n        right,\n        this._creationTime\n      )\n    );\n    result.lastChange = LastChange.EDIT_RIGHT;\n    return result;\n  }\n\n  get creationTime(): Date | undefined {\n    return this._creationTime;\n  }\n  setCreationTime(creationTime: Date): EntryModel {\n    return this.setDescription(\n      EntryModel._generateDescription(\n        this._moodArrays[0],\n        this._moodArrays[1],\n        creationTime\n      )\n    );\n  }\n\n  get initiallyCollapsed(): boolean {\n    return this._initiallyCollapsed;\n  }\n  setInitiallyCollapsed(collapsed: boolean): EntryModel {\n    const cloneModel = this.clone();\n    cloneModel._initiallyCollapsed = collapsed;\n    return cloneModel;\n  }\n\n  get focused(): boolean {\n    return this._focused;\n  }\n  setFocused(focused: boolean): EntryModel {\n    const cloneModel = this.clone();\n    cloneModel._focused = focused;\n    return cloneModel;\n  }\n\n  delete(): EntryModel {\n    return new EntryModel(this._key, EntryStatus.DELETED, EntryStatus.DELETED);\n  }\n\n  clear(): EntryModel {\n    return new EntryModel(this._key, { left: \"\", right: \"\" }, \"\");\n  }\n\n  show(): EntryModel {\n    if (this._data !== EntryStatus.HIDDEN)\n      throw new Error(\"show() has been called for entry that is not hidden\");\n    return new EntryModel(this._key, EntryStatus.LOADING, this._description);\n  }\n\n  clone(): EntryModel {\n    // this.data creates shallow copy of this._data\n    const cloneModel = new EntryModel(this._key, this.data, \"\");\n    cloneModel._moodArrays = this._moodArrays;\n    cloneModel._creationTime = this._creationTime;\n    cloneModel._description = this._description;\n    cloneModel._initiallyCollapsed = this._initiallyCollapsed;\n    cloneModel._focused = this._focused;\n    cloneModel.lastChange = this.lastChange;\n\n    return cloneModel;\n  }\n\n  private setDescriptionImpl(description: string): void {\n    this._moodArrays = [[], []];\n    this._creationTime = undefined;\n    this._description = description;\n    if (description.length > 0 && description !== EntryStatus.DELETED) {\n      const [serializedMoods, serializedCreationTime] = description.split(\"-\");\n\n      const [leftMoods = [], rightMoods = []] = serializedMoods\n        .split(\":\")\n        .map((x) => Array.from(x).map((y) => Number(y)));\n\n      this._moodArrays = [leftMoods, rightMoods];\n\n      this._creationTime = new Date(Number(serializedCreationTime));\n      if (isNaN(this._creationTime.getTime())) {\n        this._creationTime = undefined;\n      }\n    }\n  }\n\n  static _generateDescription(\n    leftMoods: number[],\n    rightMoods: number[],\n    creationTime?: Date\n  ): string {\n    let descrciption;\n    if (leftMoods.every((x) => x === 0) && rightMoods.every((x) => x === 0)) {\n      descrciption = \"\";\n    } else {\n      descrciption = leftMoods.join(\"\") + \":\" + rightMoods.join(\"\");\n    }\n\n    if (creationTime != undefined)\n      descrciption = descrciption + \"-\" + creationTime.getTime();\n    return descrciption;\n  }\n}\n","import assert from \"assert\";\r\n\r\nexport interface HintData {\r\n  isEnabled: boolean;\r\n  text: string;\r\n}\r\n\r\nexport interface EmojiItem {\r\n  codePoint: number;\r\n  text: string;\r\n}\r\n\r\ninterface SettingsData {\r\n  emojiList: EmojiItem[];\r\n  leftHint: HintData;\r\n  rightHint: HintData;\r\n}\r\n\r\nexport class Hint implements HintData {\r\n  private _isEnabled = false;\r\n  private _text = \"\";\r\n\r\n  get isEnabled(): boolean {\r\n    return this._isEnabled;\r\n  }\r\n  get text(): string {\r\n    return this._text;\r\n  }\r\n\r\n  setIsEnabled(isEnabled: boolean): Hint {\r\n    return new Hint({ isEnabled, text: this._text });\r\n  }\r\n\r\n  setText(text: string): Hint {\r\n    return new Hint({ text, isEnabled: this._isEnabled });\r\n  }\r\n\r\n  stringify(): string {\r\n    const hintData: HintData = { isEnabled: this.isEnabled, text: this.text };\r\n    return JSON.stringify(hintData);\r\n  }\r\n\r\n  constructor(data: HintData | string) {\r\n    if (typeof data === \"string\") {\r\n      if (data.length === 0) return;\r\n      data = JSON.parse(data) as HintData;\r\n    }\r\n\r\n    if (\r\n      data == undefined ||\r\n      data.text == undefined ||\r\n      data.isEnabled == undefined\r\n    )\r\n      throw new Error(\"Wrong hint data \" + JSON.stringify(data));\r\n\r\n    this._isEnabled = data.isEnabled;\r\n    this._text = data.text;\r\n  }\r\n}\r\n\r\nexport class Settings implements SettingsData {\r\n  private _emojiList: EmojiItem[] = [];\r\n  private _leftHint = new Hint(\"\");\r\n  private _rightHint = new Hint(\"\");\r\n\r\n  get emojiList(): EmojiItem[] {\r\n    return this._emojiList;\r\n  }\r\n\r\n  get leftHint(): Hint {\r\n    return this._leftHint;\r\n  }\r\n  get rightHint(): Hint {\r\n    return this._rightHint;\r\n  }\r\n\r\n  setEmojiList(emojiList: EmojiItem[]): Settings {\r\n    return new Settings({\r\n      emojiList,\r\n      leftHint: this._leftHint,\r\n      rightHint: this._rightHint,\r\n    });\r\n  }\r\n  setLeftHint(leftHint: HintData): Settings {\r\n    return new Settings({\r\n      emojiList: this._emojiList,\r\n      leftHint,\r\n      rightHint: this._rightHint,\r\n    });\r\n  }\r\n\r\n  setRightHint(rightHint: HintData): Settings {\r\n    return new Settings({\r\n      emojiList: this._emojiList,\r\n      leftHint: this._leftHint,\r\n      rightHint,\r\n    });\r\n  }\r\n\r\n  stringify(): string {\r\n    return JSON.stringify({\r\n      emojiList: this._emojiList,\r\n      leftHint: this._leftHint.stringify(),\r\n      rightHint: this._rightHint.stringify(),\r\n    });\r\n  }\r\n\r\n  constructor(json: string | SettingsData) {\r\n    try {\r\n      if (typeof json === \"string\") json = JSON.parse(json) as SettingsData;\r\n      assert(typeof json !== \"string\");\r\n\r\n      if (\r\n        !Array.isArray(json.emojiList) ||\r\n        !json.emojiList.every(\r\n          (x) => typeof String.fromCodePoint(x.codePoint) === \"string\"\r\n        )\r\n      ) {\r\n        throw new Error(\"Bad emoji list: \" + JSON.stringify(json));\r\n      }\r\n\r\n      this._emojiList = json.emojiList;\r\n\r\n      this._leftHint = new Hint(json.leftHint);\r\n      this._rightHint = new Hint(json.rightHint);\r\n    } catch (error) {\r\n      if (json != \"\") console.error(\"Settings format error: \" + error.message);\r\n      this.mutateToDefaults();\r\n    }\r\n  }\r\n\r\n  private mutateToDefaults(): void {\r\n    this._leftHint = new Hint({\r\n      isEnabled: true,\r\n      text: \"What happened?\\nWhat were your immediate thoughts?\",\r\n    });\r\n\r\n    this._rightHint = new Hint({\r\n      isEnabled: true,\r\n      text:\r\n        \"Why is it bad?\\n\" +\r\n        \"What would your therapist say?\\n\" +\r\n        \"Is your view of the problem biased?\",\r\n    });\r\n\r\n    this._emojiList = [\r\n      { codePoint: 0x1f44e, text: \"discontent\" },\r\n      { codePoint: 0x1f628, text: \"fear\" },\r\n      { codePoint: 0x1f622, text: \"sadness\" },\r\n      { codePoint: 0x1f62d, text: \"grief\" },\r\n      { codePoint: 0x1f631, text: \"horror\" },\r\n      { codePoint: 0x1f616, text: \"pain\" },\r\n      { codePoint: 0x1f621, text: \"anger\" },\r\n      { codePoint: 0x1f922, text: \"disgust\" },\r\n    ];\r\n  }\r\n}\r\n"],"sourceRoot":""}
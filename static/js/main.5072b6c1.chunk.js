(this["webpackJsonpself-help-sheets"]=this["webpackJsonpself-help-sheets"]||[]).push([[0],{104:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(13),s=n.n(i),c=(n(92),n(14)),o=(n(93),n(94),n(138)),u=n(81),l=n(142),h=n(143),p=n(37),d=n(2),f=n.n(d),b=n(4),y=n(11),v=n(12),m=n(7),g=n(20),k={LOADING:"loading",SIGNED_IN:"signed_in",SIGNED_OUT:"signed_out",FAILED:"failed"};Object.freeze(k);var _=Object(g.a)("state"),w=Object(g.a)("stateListeners"),j=new(function(){function e(){var t=this;Object(y.a)(this,e),Object.defineProperty(this,_,{writable:!0,value:k.LOADING}),Object.defineProperty(this,w,{writable:!0,value:new Set}),function(e){console.assert("function"==typeof e),console.assert(0===e.length);var t=document.createElement("script");t.async=!0,t.src="https://apis.google.com/js/api.js",document.body.appendChild(t),t.onload=e,t.onerror=e}(Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.gapi){e.next=3;break}throw new Error("Failed loading GAPI");case 3:return e.next=5,new Promise((function(e){return window.gapi.load("client:auth2",e)}));case 5:return e.next=7,window.gapi.client.init({clientId:"479709565206-4ek8a502261s9sussiehpa5v146ns2ku.apps.googleusercontent.com",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],scope:"https://www.googleapis.com/auth/drive.appfolder"});case 7:if(x()){e.next=9;break}throw new Error("Failed registering client_id.");case 9:t._updateSignInState(),window.gapi.auth2.getAuthInstance().isSignedIn.listen(t._updateSignInState.bind(t)),e.next=19;break;case 13:return e.prev=13,e.t0=e.catch(0),console.log(e.t0),Object(m.a)(t,_)[_]=k.FAILED,t._notifyStateChanged(),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[0,13]])}))))}return Object(v.a)(e,[{key:"addStateListener",value:function(e){console.assert("function"==typeof e),console.assert(1===e.length),console.assert(!Object(m.a)(this,w)[w].has(e)),Object(m.a)(this,w)[w].add(e)}},{key:"removeStateListener",value:function(e){console.assert("function"==typeof e),console.assert(1===e.length),console.assert(Object(m.a)(this,w)[w].has(e)),Object(m.a)(this,w)[w].delete(e)}},{key:"waitForStateChange",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.addStateListener((function n(r){t.removeStateListener(n),e(r)}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"state",get:function(){return Object(m.a)(this,_)[_]}}]),Object(v.a)(e,[{key:"signIn",value:function(){console.assert(x()),window.mocha?window.gapi.auth2.getAuthInstance().signIn():window.gapi.auth2.getAuthInstance().signIn({prompt:"select_account"})}},{key:"signOut",value:function(){console.assert(x()),window.gapi.auth2.getAuthInstance().signOut()}},{key:"_notifyStateChanged",value:function(){var e,t=Object(p.a)(Object(m.a)(this,w)[w]);try{for(t.s();!(e=t.n()).done;){(0,e.value)(Object(m.a)(this,_)[_])}}catch(n){t.e(n)}finally{t.f()}}},{key:"_updateSignInState",value:function(){console.assert(Object(m.a)(this,_)[_]!==k.FAILED);var e=(console.assert(x()),window.gapi.auth2.getAuthInstance().isSignedIn.get()?k.SIGNED_IN:k.SIGNED_OUT);Object(m.a)(this,_)[_]!==e&&(Object(m.a)(this,_)[_]=e,this._notifyStateChanged())}}]),e}());function x(){return window.gapi&&window.gapi.auth2&&window.gapi.client}Object.seal(j);var O=n(16),E=n(22),C=n(18),S=n(17),D=function(e){e.active;return a.a.createElement("div",{style:{display:"flex",padding:10}},a.a.createElement("svg",{width:"18",height:"18",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{fill:"#000",fillRule:"evenodd"},a.a.createElement("path",{d:"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z",fill:"#EA4335"}),a.a.createElement("path",{d:"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z",fill:"#4285F4"}),a.a.createElement("path",{d:"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z",fill:"#FBBC05"}),a.a.createElement("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z",fill:"#34A853"}),a.a.createElement("path",{fill:"none",d:"M0 0h18v18H0z"}))))},A=n(130),M=n(146),I=n(129),R=function(e){var t=e.children;return a.a.createElement("span",{style:{padding:10,paddingLeft:0,fontWeight:500}},t)},B={backgroundColor:"#fff",display:"inline-flex",alignItems:"center",color:"rgba(0, 0, 0, .54)",boxShadow:"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)",padding:0,borderRadius:2,border:"1px solid transparent",fontSize:14,fontWeight:"500",fontFamily:"Roboto, sans-serif",cursor:"pointer"},K={opacity:.6},P=Object(g.a)("setAuthState"),z=Object(g.a)("setButtonAnchor"),F=Object(g.a)("getButtonStyle"),N=Object(g.a)("onClick"),T=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).state={authState:e.props.gdriveAuthClient.state,prevAuthState:e.props.gdriveAuthClient.LOADING,buttonAnchor:null},Object.defineProperty(Object(E.a)(e),P,{writable:!0,value:function(t){e.setState((function(e){return Object(O.a)(Object(O.a)({},e),{},{prevAuthState:e.authState,authState:t})}))}}),Object.defineProperty(Object(E.a)(e),z,{writable:!0,value:function(t){e.setState((function(e){return Object(O.a)(Object(O.a)({},e),{},{buttonAnchor:t})}))}}),Object.defineProperty(Object(E.a)(e),F,{writable:!0,value:function(){return e.state.authState===k.FAILED||e.state.authState===k.LOADING?Object.assign({},B,K):B}}),Object.defineProperty(Object(E.a)(e),N,{writable:!0,value:function(){var t=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state.authState===k.SIGNED_IN?e.props.gdriveAuthClient.signOut():e.state.authState===k.SIGNED_OUT&&e.props.gdriveAuthClient.signIn();case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}),e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.state.authState!==this.props.gdriveAuthClient.state&&Object(m.a)(this,P)[P](this.props.gdriveAuthClient.state),this.props.gdriveAuthClient.addStateListener(Object(m.a)(this,P)[P])}},{key:"componentWillUnmount",value:function(){this.props.gdriveAuthClient.removeStateListener(Object(m.a)(this,P)[P])}},{key:"render",value:function(){var e=this,t=function(){if(e.state.authState===k.FAILED)return a.a.createElement(M.a,{severity:"error"},"Failed connecting to google. Check your connection and try reloading the page.");if(e.state.authState===k.SIGNED_OUT){if(e.state.prevAuthState===k.SIGNED_IN)return a.a.createElement(M.a,{severity:"warning"},a.a.createElement(I.a,null,"Privacy note!"),"If other people have access to this browser ",a.a.createElement("br",null),"AND you don't want them to read your sheets: ",a.a.createElement("br",null),a.a.createElement("ol",null,a.a.createElement("li",null,"sign out globally: ",a.a.createElement("br",null),a.a.createElement("a",{href:"https://accounts.google.com/Logout"},"https://accounts.google.com/Logout")),a.a.createElement("li",null,"delete Google account password from the browser")));if(e.state.prevAuthState===k.LOADING)return a.a.createElement(M.a,{severity:"info"},"This site stores data in a hidden Google Drive folder. ",a.a.createElement("br",null),"Sign in to proceed.",a.a.createElement("br",null))}}();return a.a.createElement("button",{ref:function(t){return Object(m.a)(e,z)[z](t)},onClick:Object(m.a)(this,N)[N],style:Object(m.a)(this,F)[F](),type:"button"},a.a.createElement(D,{key:0,active:this.state.active}),a.a.createElement(R,{key:2},this.state.authState===k.SIGNED_IN?"Sign Out":"Sign in with Google"),!!t&&!!this.state.buttonAnchor&&a.a.createElement(A.a,{key:1,style:{zIndex:1200},open:!0,anchorEl:this.state.buttonAnchor,placement:"bottom-end",disablePortal:!1,modifiers:{flip:{enabled:!1},preventOverflow:{enabled:!1},hide:{enabled:!1},offset:{offset:"0,5"}}},t))}}]),n}(a.a.PureComponent),L=n(131),q=Object(L.a)((function(e){return{root:{position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",backgroundColor:e.palette.background.paper,zIndex:1}}})),G=a.a.forwardRef((function(e,t){var n=q();return a.a.createElement("article",Object.assign({className:n.root},e,{ref:t}),a.a.createElement("h1",null,"User Guide"))})),V=Object(L.a)((function(e){return{root:{position:"absolute",top:"5%",left:"5%",width:"90%",height:"90%",backgroundColor:e.palette.background.paper,zIndex:1}}})),H=a.a.forwardRef((function(e,t){var n=V();return a.a.createElement("article",Object.assign({className:n.root},e,{ref:t}),a.a.createElement("h1",null,"User Guide"))})),U=n(134),W=n(137),Y=n(139),J=n(145),$=n(144),Q=n(132),X=n(133),Z=n(135),ee=n(136),te=n(148),ne=n(107),re=Object(L.a)({placeholder:{flex:1},showAppBarButton:{position:"fixed",top:0,left:"50%",transform:"translate(-50%, -30%)",zIndex:2e3}});function ae(e){var t=a.a.useState(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(J.a,Object.assign({},e,{onClick:function(){i(!0)}}),e.children[0]),a.a.createElement($.a,{open:r,onClose:function(){i(!1)}},e.children[1]))}function ie(e){var t=re();return a.a.createElement(a.a.Fragment,null,a.a.createElement(Q.a,{appear:!1,in:e.shown},a.a.createElement(X.a,null)),!e.shown&&a.a.createElement(J.a,{className:t.showAppBarButton,onClick:e.onShow},a.a.createElement(U.a,{color:"primary",fontSize:"large"})),a.a.createElement(Z.a,{appear:!1,direction:"down",in:e.shown},a.a.createElement(ee.a,null,a.a.createElement(X.a,null,a.a.createElement(ae,{edge:"start"},a.a.createElement(W.a,null),a.a.createElement(H,null)),a.a.createElement(te.a,{xsDown:!0},a.a.createElement(ne.a,null,"Settings")),a.a.createElement(ne.a,{className:t.placeholder,variant:"body2",align:"center"},"Self help sheets",a.a.createElement(te.a,{xsDown:!0},a.a.createElement("br",null),"Document your inner dialog")),a.a.createElement(ae,null,a.a.createElement(Y.a,null),a.a.createElement(G,null)),a.a.createElement(T,{gdriveAuthClient:j})))))}var se=n(49),ce=n(19),oe=n(53),ue=n(147),le=n(141),he=n(54),pe=n(140),de=Object(L.a)((function(e){return{container:{alignSelf:"center",margin:2,cursor:"pointer",borderColor:function(e){return e?"gray":"#0000"},border:"solid 2px",borderRadius:4,position:"relative"},popup:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",left:-17,top:"1.5em",zIndex:2,background:e.palette.background.paper,border:"gray solid 2px",borderRadius:4},setupItem:{border:"2px solid",borderColor:function(e){return e?"darkgray":"#0000"},borderRadius:4,fontSize:24,display:"flex",alignItems:"center",justifyContent:"center"},icon:{cursor:"pointer",width:15,margin:0,padding:"4px 1px",height:"40px",border:"1px solid #0000","&:hover":{borderColor:"lightgray"}},emoji:{opacity:function(e){return 3===e?1:2===e?.7:.3}}}}));function fe(e){var t=de(e.value);return a.a.createElement("span",{className:t.emoji,role:"img","aria-label":e.text},String.fromCodePoint(e.emoji))}function be(e){var t=e.checked,n=e.value,r=Object(ce.a)(e,["checked","value"]),i=de(),s=5*(3-n)+1;return a.a.createElement(he.a,Object.assign({className:i.icon,viewBox:"1 1 7 15"},r),a.a.createElement("rect",{width:"9",height:s,fill:t?"lightgreen":"lightgray"}),a.a.createElement("rect",{y:s,width:"9",height:16-s,fill:t?"red":"gray"}))}function ye(e){var t=e.value,n=e.isActive,r=Object(ce.a)(e,["value","isActive"]),i=de(n);return a.a.createElement("div",{className:i.setupItem},a.a.createElement(fe,Object.assign({},r,{value:3})),a.a.createElement(be,{onClick:function(){return r.onChange(0)},checked:0===t,value:0}),a.a.createElement(be,{onClick:function(){return r.onChange(1)},checked:1===t,value:1}),a.a.createElement(be,{onClick:function(){return r.onChange(2)},checked:2===t,value:2}),a.a.createElement(be,{onClick:function(){return r.onChange(3)},checked:3===t,value:3}))}function ve(e){var t=a.a.useState(!1),n=Object(c.a)(t,2),r=n[0],i=n[1],s=a.a.useState(-1),o=Object(c.a)(s,2),u=o[0],l=o[1],h=a.a.useRef(),p=de(r);if(0===e.emojiArray.length)return null;var d=e.emojiArray.filter((function(e){return e.value>0})),f=0;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{tabIndex:0,onFocus:function(){i(!0)},onBlur:function(){h.current.contains(document.activeElement)||i(!1)},className:p.container,onKeyDown:function(t){if("ArrowLeft"===t.key){if(u>=0&&u<e.emojiArray.length){var n=Object(se.a)(e.emojiArray);n[u].value--,n[u].value<0&&(n[u].value=3),e.onEmojiArrayChange(n)}}else if("ArrowRight"===t.key){if(u>=0&&u<e.emojiArray.length){var r=Object(se.a)(e.emojiArray);r[u].value++,r[u].value>3&&(r[u].value=0),e.onEmojiArrayChange(r)}}else if("ArrowDown"===t.key)++u>=e.emojiArray.length&&(u=0),l(u);else if("ArrowUp"===t.key)--u<0&&(u=e.emojiArray.length-1),l(u);else{if("Escape"!==t.key&&"Enter"!==t.key)return;e.inputRef.current.focus()}t.preventDefault()}},d.length>0?d.map((function(e){return a.a.createElement(fe,{key:e.codePoint,emoji:e.codePoint,text:e.text,value:e.value})})):a.a.createElement(ne.a,{variant:"caption",color:"textSecondary"},"add mood"),r&&a.a.createElement(pe.a,{in:r},a.a.createElement("div",{ref:h,className:p.popup},a.a.createElement(ne.a,{align:"center",variant:"body1"},e.text),e.emojiArray.map((function(t){return a.a.createElement(ye,{key:t.codePoint,isActive:f++===u,emoji:t.codePoint,text:t.text,value:t.value,onChange:function(n){e.onEmojiArrayChange(e.emojiArray.map((function(e){return e.codePoint===t.codePoint?Object(O.a)(Object(O.a)({},e),{},{value:n}):e})))}})})),a.a.createElement(ne.a,{align:"center",variant:"caption"},"Use arrow keys.")))))}var me=n(78),ge=n.n(me),ke=n(65),_e=n.n(ke),we="loading",je="hidden",xe="deleted",Oe=function(){function e(t,n,r,a){Object(y.a)(this,e),this._data=n,this._key=t,this._emojiArrays=null!=r?r:[[],[]],this._creationTime=a}return Object(v.a)(e,[{key:"isDataLoaded",value:function(){return this._data!==we&&this._data!==je}},{key:"isVacant",value:function(){return this.isDataLoaded()&&(this.data===xe||this._emojiArrays.every((function(e){return 0===e.length}))&&""===this.left&&""===this.right)}},{key:"setLeft",value:function(t){return this.isDataLoaded()?new e(this._key,Object(O.a)(Object(O.a)({},this._data),{},{left:t}),this._emojiArrays,this._creationTime):(console.error("bad status"),this)}},{key:"setRight",value:function(t){return this.isDataLoaded()?new e(this._key,Object(O.a)(Object(O.a)({},this._data),{},{right:t}),this._emojiArrays,this._creationTime):(console.error("bad status"),this)}},{key:"delete",value:function(){return new e(this._key,xe)}},{key:"clear",value:function(){return new e(this._key,{left:"",right:"",description:""})}},{key:"show",value:function(){return new e(this._key,we)}},{key:"setEmojiArrays",value:function(t,n){return this.setDescription(e._generateDescription(t.map((function(e){return e.value})),n.map((function(e){return e.value})),this._creationTime))}},{key:"setCreationTime",value:function(t){return this.setDescription(e._generateDescription(this._emojiArrays[0],this._emojiArrays[1],t))}},{key:"setDescription",value:function(t){if(!this.isDataLoaded())return this;var n,r=[[],[]];if("string"===typeof t){var a=t.split("-"),i=Object(c.a)(a,2),s=i[0],o=i[1],u=Array.from(s).map((function(e){return Number(e)})),l=Math.ceil(u.length/2);r=[u.slice(0,l),u.slice(l)],n=new Date(Number(o)),isNaN(n.getTime())&&(n=null)}return new e(this._key,Object(O.a)(Object(O.a)({},this._data),{},{description:t}),r,n)}},{key:"data",get:function(){return this._data instanceof Object?Object(O.a)({},this._data):this._data}},{key:"key",get:function(){return this._key}},{key:"description",get:function(){return this.isDataLoaded()?this._data.description:""}},{key:"left",get:function(){return this.isDataLoaded()?this._data.left:""}},{key:"right",get:function(){return this.isDataLoaded()?this._data.right:""}},{key:"emojiArrays",get:function(){return this._emojiArrays}},{key:"creationTime",get:function(){return this._creationTime}}]),Object(v.a)(e,null,[{key:"_generateDescription",value:function(e,t,n){var r;return r=e.every((function(e){return 0===e}))&&t.every((function(e){return 0===e}))?"":e.join("")+t.join(""),null!=n&&(r=r+"-"+n.getTime()),r}}]),e}(),Ee=Object(L.a)((function(e){return{inner:{display:"flex",flex:1,flexDirection:"column",position:"relative"},input:{padding:0},outer:{padding:5,display:"flex",alignItems:"flex-start",flexDirection:"row",border:"lightgray solid 1px",borderRadius:4},date:{border:"0px !important"}}}));function Ce(e){var t=e.emojiText,n=e.emojiArray,r=e.onDelete,i=e.isFirst,s=e.creationTime,c=e.onEmojiArrayChange,o=Object(ce.a)(e,["emojiText","emojiArray","onDelete","isFirst","creationTime","onEmojiArrayChange"]),u=Ee(),l=a.a.useRef();return a.a.createElement("div",{className:u.outer},a.a.createElement("div",{className:u.inner},s&&a.a.createElement(ne.a,{variant:"caption",onClick:function(){return l.current.focus()},color:"textSecondary",align:"center"},_e()(s).format("h:mm a")),a.a.createElement(ue.a,Object.assign({className:u.input,fullWidth:!0,multiline:!0,variant:"outlined",inputRef:l},o)),a.a.createElement(ve,{text:t,onEmojiArrayChange:c,emojiArray:n,inputRef:l})),!!r&&a.a.createElement(J.a,{"aria-label":"delete",size:"small",onClick:r},a.a.createElement(ge.a,{color:i?"disabled":"action",fontSize:"small"})))}var Se=a.a.forwardRef((function(e,t){var n=e.isFirst,r=e.onUpdate,i=(e.onRightChanged,e.entry),s=e.settings,c=Object(ce.a)(e,["isFirst","onUpdate","onRightChanged","entry","settings"]),o=Ee();if(i instanceof Date){var u=_e()(i).calendar({sameDay:"[Today], MMM Do, ddd",lastDay:"[Yesterday] , MMM Do, ddd",lastWeek:"MMM Do YYYY, ddd",sameElse:"MMM Do YYYY, ddd"});return a.a.createElement("tr",{ref:t,className:o.date},a.a.createElement("td",{colSpan:2},a.a.createElement(ne.a,{variant:"body2",align:"center",color:"textSecondary"},u)," "))}console.assert(i instanceof Oe),a.a.useEffect((function(){i.data===je&&r(i.show())}));for(var l=[],h=[],p=0;p<s.emojiList.length;p++)l.push(Object(O.a)({value:null==i.emojiArrays[0][p]?0:i.emojiArrays[0][p]},s.emojiList[p])),h.push(Object(O.a)({value:null==i.emojiArrays[1][p]?0:i.emojiArrays[1][p]},s.emojiList[p]));var d=function(e){n&&(e=e.setCreationTime(new Date(Date.now()))),r(e)};return a.a.createElement("tr",{ref:t},a.a.createElement("td",{key:"issueElement"},a.a.createElement("h5",null,"issue"),i.isDataLoaded()?a.a.createElement(Ce,Object.assign({color:"secondary",creationTime:!n&&i.creationTime,placeholder:n?"Start typing to create a new item.":"What bothers you?",value:i.left,onChange:function(e){return d(i.setLeft(e.target.value))},emojiText:"How do you feel now?",emojiArray:l,onEmojiArrayChange:function(e){return d(i.setEmojiArrays(e,h))}},c)):a.a.createElement(le.a,{variant:"rect",height:56})),a.a.createElement("td",{key:"resolutionElement"},a.a.createElement("h5",null,"resolution"),i.isDataLoaded()?a.a.createElement(Ce,Object.assign({color:"primary",placeholder:n?"Start typing to create a new item.":"What can you do to resolve the problem?",isFirst:n,variant:"outlined",value:i.right,onDelete:function(e){return r(i.delete())},onChange:function(e){return d(i.setRight(e.target.value))},emojiText:"How do you feel after writing resolution?",emojiArray:h,onEmojiArrayChange:function(e){return d(i.setEmojiArrays(l,e))}},c)):a.a.createElement(le.a,{variant:"rect",height:56})))})),De=n(79),Ae=n.n(De),Me=n(48),Ie=n.n(Me),Re=n(8),Be=Object(g.a)("onHeightChanged"),Ke=Object(g.a)("resizeObserver"),Pe=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).ref=a.a.createRef(),Object.defineProperty(Object(E.a)(e),Be,{writable:!0,value:function(){e.ref.current&&e.props.onHeightChanged(e.props.entry,e.ref.current.offsetHeight)}}),Object.defineProperty(Object(E.a)(e),Ke,{writable:!0,value:null}),e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){this.ref.current&&(Object(m.a)(this,Be)[Be](),Object(m.a)(this,Ke)[Ke]=new ResizeObserver(Object(m.a)(this,Be)[Be]),Object(m.a)(this,Ke)[Ke].observe(this.ref.current))}},{key:"componentWillUnmount",value:function(){this.ref.current.contains(document.activeElement)&&this.props.scrollableContainerRef.current&&this.props.scrollableContainerRef.current.focus(),Object(m.a)(this,Ke)[Ke]&&(Object(m.a)(this,Ke)[Ke].disconnect(),Object(m.a)(this,Ke)[Ke]=null)}},{key:"render",value:function(){var e=this.props,t=(e.scrollableContainerRef,e.ItemComponent),n=(e.onHeightChanged,Object(ce.a)(e,["scrollableContainerRef","ItemComponent","onHeightChanged"]));return a.a.createElement(t,Object.assign({ref:this.ref},n))}}]),n}(a.a.PureComponent);function ze(e){var t=e.entries,n=e.defaultHeight,r=void 0===n?30:n,i=e.scrollableContainerRef,s=e.ItemComponent,o=e.PlaceholderComponent,u=Object(ce.a)(e,["entries","defaultHeight","scrollableContainerRef","ItemComponent","PlaceholderComponent"]),l=a.a.useState(0),h=Object(c.a)(l,2),d=h[0],f=h[1],b=a.a.useState(window.innerHeight),y=Object(c.a)(b,2),v=y[0],m=y[1],g=a.a.useState(new WeakMap),k=Object(c.a)(g,1)[0],_=a.a.useCallback((function(e,t){k.set(e,t)}),[k]),w=function(){i.current&&f(i.current.scrollTop),m(window.innerHeight)};a.a.useEffect((function(){return i.current&&(i.current.onscroll=w),window.addEventListener("resize",w),function(){window.removeEventListener("resize",w)}}));var j,x=[],O=0,E=0,C=0,S=!0,D=Object(p.a)(t);try{for(D.s();!(j=D.n()).done;){var A=j.value,M=r;k.has(A)&&(M=k.get(A)),O<d-window.innerHeight?E+=M:O<d+2*v?x.push(a.a.createElement(Pe,Object.assign({key:A.key,isFirst:S,onHeightChanged:_,entry:A,ItemComponent:s,scrollableContainerRef:i},u))):C+=M,O+=M,S=!1}}catch(I){D.e(I)}finally{D.f()}return 0!==E&&x.unshift(a.a.createElement(o,{height:E,key:"placeholderTop"})),0!==C&&x.push(a.a.createElement(o,{height:C,key:"placeholderBottom"})),x}function Fe(e){var t=e.height,n=Object(ce.a)(e,["height"]);return a.a.createElement("tr",n,a.a.createElement("td",{colSpan:"2"},a.a.createElement("div",{style:{height:t}})))}var Ne=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return(e=t.call.apply(t,[this].concat(i))).state={entries:[],settings:{emojiList:[{codePoint:128078,text:"discontent"},{codePoint:128552,text:"fear"},{codePoint:128546,text:"sadness"},{codePoint:128557,text:"grief"},{codePoint:128561,text:"horror"},{codePoint:128534,text:"pain"},{codePoint:128545,text:"anger"},{codePoint:129314,text:"disgust"}]}},e._onEntriesChanged=function(t){if(t.length>1)for(var n=(t=Object(se.a)(t))[t.length-1].creationTime,r=t.length-2;r>=0;r--){var a=t[r].creationTime;null!=n?null!=a&&a.getYear()===n.getYear()&&a.getMonth()===n.getMonth()&&a.getDay()===n.getDay()||(n.key="time"+n.getTime(),t.splice(r+1,0,n),n=a):n=t[r].creationTime}e.setState({entries:t})},e._tableRef=a.a.createRef(),e._scrollableContainerRef=a.a.createRef(),e._columnResizer=null,e._resizeObserver=null,e}return Object(v.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.model.subscribe(this._onEntriesChanged),this._columnResizer=new Ae.a(this._tableRef.current,{liveDrag:!0,minWidth:100,gripInnerHtml:"<div class='".concat(this.props.classes.grip,"'></div>"),onResize:function(e){window.dispatchEvent(new Event("resize"))}}),window.removeEventListener("resize",this._columnResizer.onResize),this._resizeObserver=new ResizeObserver(Ie.a.throttle((function(){e._columnResizer.onResize()}),200)),this._resizeObserver.observe(this._tableRef.current)}},{key:"componentDidUpdate",value:function(e){this.props.model!==e.model&&(e.model.unsubscribe(this._onEntriesChanged),this.props.model.subscribe(this._onEntriesChanged))}},{key:"componentWillUnmount",value:function(){this.props.model.unsubscribe(this._onEntriesChanged),this._columnResizer.destroy(),this._resizeObserver.unobserve(this._tableRef.current)}},{key:"render",value:function(){return a.a.createElement("div",{ref:this._scrollableContainerRef,className:this.props.classes.container,tabIndex:0},a.a.createElement("table",{cellPadding:0,cellSpacing:0,className:this.props.classes.entriesTable,ref:this._tableRef},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,a.a.createElement("div",null,"issue")),a.a.createElement("th",null,a.a.createElement("div",null,"resolution")))),a.a.createElement("tbody",null,a.a.createElement(ze,{entries:this.state.entries,ItemComponent:Se,PlaceholderComponent:Fe,scrollableContainerRef:this._scrollableContainerRef,onUpdate:this.props.model.onUpdate,onFocus:this.props.onFocus,settings:this.state.settings}))))}}]),n}(a.a.PureComponent),Te=Object(Re.a)((function(e){return{container:{overflow:"auto",flex:1,willChange:"transform"},grip:{width:10,marginLeft:5,position:"absolute",height:"100%",backgroundColor:"#0000",cursor:"col-resize"},entriesTable:Object(oe.a)({width:"100%",borderSpacing:0,"& th":{backgroundColor:e.palette.background.paper,zIndex:3,top:0,position:"sticky",borderSpacing:0,borderBottom:"1px solid #000"},"& td":{padding:2,verticalAlign:"top",overflow:"inherit !important"},"& td:nth-child(even)":{borderLeft:"5px solid #0000"},"& td:nth-child(odd)":{borderRight:"5px solid #0000"},"& h5":{display:"none"}},e.breakpoints.down("xs"),{"& thead":{display:"none"},"& h5":{display:"block",margin:0},"& tbody tr":{display:"grid",padding:5,border:"1px solid #000"},"& td:nth-child(even)":{borderLeft:0},"& td:nth-child(odd)":{borderRight:0},"& tbody td":{display:"block"}})}}))(Ne),Le=function(){function e(){Object(y.a)(this,e)}return Object(v.a)(e,[{key:"requireFunction",value:function(e){for(var t=this,n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];setTimeout((function(){if("function"!==typeof t[e])throw new Error(e+" is not implemented");if(t[e].length!==r.length)throw new Error(e+" has wrong arguments number")}),0)}}]),e}(),qe=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(y.a)(this,n),(e=t.call(this)).requireFunction("createKey"),e.requireFunction("delete","key"),e.requireFunction("set","key","contentString"),e.requireFunction("get","key"),e.requireFunction("getMd5","key"),e.requireFunction("getAllKeys"),e.requireFunction("getSettings"),e.requireFunction("setSettings","settings"),e.requireFunction("setDescription","key","description"),e}return n}(Le),Ge=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e,r){var a;return Object(y.a)(this,n),console.assert(e instanceof qe),(a=t.call(this)).sync=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a._disposed){e.next=2;break}return e.abrupt("return");case 2:if(a._authClient.state===k.SIGNED_IN){e.next=7;break}return e.next=5,a._authClient.waitForStateChange();case 5:e.next=2;break;case 7:return e.next=9,a._backendMap.getAllKeys();case 9:return t=e.sent,n=new Map,t.forEach((function(e){var r;a._entries.has(e.id)?r=a._entries.get(e.id):(e.outdated=!0,r=new Oe(e.id,n.size<t.length-30?je:we)),r.isDataLoaded()&&r.data!==xe&&e.description!==a._descriptions.get(e.id)&&(r=r.setDescription(e.description)),n.set(e.id,r),a._descriptions.set(e.id,e.description)})),r=[],t.reverse().forEach((function(e){e.outdated&&n.get(e.id).data!==je&&r.push(a._fetch(e.id))})),a._entries.has(null)&&n.set(null,a._entries.get(null)),a._entries=n,a._onEntriesChanged(),e.next=19,Promise.all(r);case 19:setTimeout(a.sync,15e3);case 20:case"end":return e.stop()}}),e)}))),a.onUpdate=function(e){if(a._entries.has(e.key)){var t=a._entries.get(e.key);e.data!==we?(a._sendEntryToBackend(e),a._addHistoryItem(e),a._entries.set(e.key,e),a._onEntriesChanged()):t.data===je&&(a._fetch(e.key),a._entries.set(e.key,e))}},a._disposed=!1,a._historyIndex=0,a._history=[],a._authClient=null,a._backendMap=null,a._entries=new Map,a._descriptions=new Map,a._subscriptions=new Set,a._onKeyPress=function(e){if(e.ctrlKey){if(90===e.keyCode)a.undo();else{if(89!==e.keyCode)return;a.redo()}e.preventDefault()}},a._fetch=function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,i,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a._backendMap.get(t);case 2:if(n=e.sent,a._entries.has(t)){e.next=6;break}return console.error("Entry for fetch doesn't exist anymore. "+t),e.abrupt("return");case 6:if(void 0!==n){e.next=11;break}return console.error("Key "+t+" is missing"),a._entries.delete(t),a._onEntriesChanged(),e.abrupt("return");case 11:if(e.prev=11,""!==n){e.next=18;break}r=new Oe(t,{}).delete(),a._addHistoryItem(r),a._entries.set(t,r),e.next=25;break;case 18:if((i=JSON.parse(n))===xe||null!=i.left&&null!=i.right){e.next=21;break}throw new Error("bad format "+n);case 21:s=new Oe(t,i),i!==xe&&(s=s.setDescription(a._descriptions.get(t))),a._addHistoryItem(s),a._entries.set(t,s);case 25:e.next=31;break;case 27:e.prev=27,e.t0=e.catch(11),console.error(e.t0.message+" "+t+" "+n),a._entries.get(t).isDataLoaded()||(a._entries.delete(t),a._descriptions.delete(t),a._backendMap.delete(t));case 31:a._onEntriesChanged();case 32:case"end":return e.stop()}}),e,null,[[11,27]])})));return function(t){return e.apply(this,arguments)}}(),a._onEntriesChanged=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=a._getFilteredEntriesArray()).length>0&&a._notifySubscribers(t),0!==t.length&&(!t[0].isDataLoaded()||t[0].isVacant())){e.next=19;break}if(!a._entries.has(null)){e.next=5;break}return e.abrupt("return");case 5:return a._entries.set(null,new Oe(null,{}).delete()),e.next=8,a._backendMap.createKey();case 8:if(n=e.sent,a._entries.has(null)){e.next=11;break}throw new Error("A null key should persist until the new key is created");case 11:return r=new Oe(n,a._entries.get(null).data),a._entries.set(n,r),e.next=15,a._sendEntryToBackend(r);case 15:return a._entries.delete(null),e.next=18,a._onEntriesChanged();case 18:return e.abrupt("return");case 19:case"end":return e.stop()}}),e)}))),a._backendMap=e,a._authClient=r,a.sync(),window.addEventListener("keydown",a._onKeyPress),a}return Object(v.a)(n,[{key:"dispose",value:function(){this._disposed=!0,window.removeEventListener("keydown",this._onKeyPress),this._subscriptions=new Set}},{key:"subscribe",value:function(e){this._subscriptions.add(e),this._entries.size>0&&e(this._getFilteredEntriesArray())}},{key:"unsubscribe",value:function(e){this._subscriptions.delete(e)}},{key:"undo",value:function(){if(0!==this._historyIndex){this._historyIndex--;var e=this._history[this._historyIndex].old;this._entries.set(e.key,e),this._sendEntryToBackend(e),this._onEntriesChanged()}}},{key:"redo",value:function(){if(!(this._historyIndex>=this._history.length)){var e=this._history[this._historyIndex++].new;this._entries.set(e.key,e),this._sendEntryToBackend(e),this._onEntriesChanged()}}},{key:"_addHistoryItem",value:function(e){if(null==e.key)throw new Error("null key shouldn't have value. There is no point to restore it.");this._entries.has(e.key)&&this._entries.get(e.key).isDataLoaded()&&(this._history=this._history.slice(0,this._historyIndex),this._history.push({old:this._entries.has(e.key)?this._entries.get(e.key):new Oe(e.key,{}).delete(),new:e}),this._historyIndex=this._history.length)}},{key:"_sendEntryToBackend",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,r=n.description,a=Object(ce.a)(n,["description"]),t.data===xe&&(a=xe,r=""),i=null,r!==this._descriptions.get(t.key)&&(i=this._backendMap.setDescription(t.key,r),this._descriptions.set(t.key,r)),e.next=6,Promise.all([i,this._backendMap.set(t.key,JSON.stringify(a))]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFilteredEntriesArray",value:function(){var e,t=Array.from(this._entries.values()).reverse(),n=-1,r=Object(p.a)(t);try{for(r.s();!(e=r.n()).done;){if(!e.value.isVacant())break;n++}}catch(i){r.e(i)}finally{r.f()}var a=t.slice(n>0?n:0);return 0===a.length?a:(a[0].data===xe&&(a[0]=a[0].clear()),a=a.filter((function(e){return e.data!==xe&&null!==e.key})))}},{key:"_notifySubscribers",value:function(e){this._subscriptions.forEach((function(t){t(e)}))}}]),n}(function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;return Object(y.a)(this,n),(e=t.call(this)).requireFunction("subscribe","callback"),e.requireFunction("unsubscribe","callback"),e.requireFunction("onUpdate","entry"),e.requireFunction("undo"),e.requireFunction("redo"),e.requireFunction("sync"),e}return n}(Le)),Ve=n(80),He=Object(g.a)("settings_key"),Ue=new(function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(){var e;Object(y.a)(this,n);for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];return e=t.call.apply(t,[this].concat(a)),Object.defineProperty(Object(E.a)(e),He,{writable:!0,value:null}),e}return Object(v.a)(n,[{key:"_getSettingsKey",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===Object(m.a)(this,He)[He]){e.next=2;break}return e.abrupt("return",Object(m.a)(this,He)[He]);case 2:return e.next=4,it('name = "settings.json"');case 4:if(0!==(t=e.sent).length){e.next=9;break}return e.next=8,Je("settings.json");case 8:return e.abrupt("return",e.sent);case 9:if(1!==t.length){e.next=11;break}return e.abrupt("return",t[0].id);case 11:return console.error("Invalid state. Multiple settings.json. "),n=Object(Ve.a)(t),r=n[0],n.slice(1).map((function(e){return ct(e)})),e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,Je("item.json");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,ct(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,Ze(t,n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,rt(t);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,tt(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.next=3,it('name = "item.json"');case 3:return(t=e.sent).forEach((function(e){e.description||(e.description="")})),e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.t0=rt,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.t0=Ze,e.next=4,this._getSettingsKey();case 4:return e.t1=e.sent,e.t2=t,e.next=8,(0,e.t0)(e.t1,e.t2);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return We(),e.abrupt("return",Qe(t,n));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(qe));function We(){if(j.state!==k.SIGNED_IN)throw new Error("Incorrect state. Sign in to continue.")}function Ye(e,t){var n=(new Error).stack;return new Promise((function(r,a){e(t).then((function(e){e&&(e.status<200||e.status>299)?(console.log("GAPI call returned bad status",n,e),a(e)):r(e)}),(function(e){console.log("GAPI call failed ",n,e),a(e)}))}))}function Je(e,t){return $e.apply(this,arguments)}function $e(){return($e=Object(b.a)(f.a.mark((function e(t,n){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(window.gapi.client.drive.files.create,{resource:{name:t,mimeType:n||"text/plain",parents:["appDataFolder"]},fields:"id"});case 2:return r=e.sent,e.abrupt("return",r.result.id);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=Object(b.a)(f.a.mark((function e(t,n){var r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.assert("string"===typeof n),"\r\n--"+(r="-------314159265358979323846")+"\r\n","\r\n--"+r+"--",a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+JSON.stringify({description:n})+"\r\n---------314159265358979323846--",e.next=7,Ye(window.gapi.client.request,{path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"multipart"},body:a,headers:{"Content-Type":'multipart/mixed; boundary="'+r+'"'}});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e,t){return et.apply(this,arguments)}function et(){return(et=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.assert("string"===typeof n),e.next=3,Ye(window.gapi.client.request,{path:"/upload/drive/v3/files/".concat(t),method:"PATCH",params:{uploadType:"media"},fields:"md5Checksum",body:n});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tt(e){return nt.apply(this,arguments)}function nt(){return(nt=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(window.gapi.client.request,{path:"/drive/v3/files/".concat(t),method:"GET",params:{fields:"md5Checksum"}});case 2:return n=e.sent,e.abrupt("return",n.result.md5Checksum);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rt(e){return at.apply(this,arguments)}function at(){return(at=Object(b.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(window.gapi.client.drive.files.get,{fileId:t,alt:"media"});case 3:return n=e.sent,e.abrupt("return",n.body);case 7:if(e.prev=7,e.t0=e.catch(0),404===e.t0.status){e.next=11;break}throw e.t0;case 11:return e.abrupt("return",void 0);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function it(e){return st.apply(this,arguments)}function st(){return(st=Object(b.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,n=[];case 2:return e.next=4,Ye(window.gapi.client.drive.files.list,{spaces:"appDataFolder",fields:"files(id, description, md5Checksum), nextPageToken",pageSize:1e3,pageToken:r,orderBy:"createdTime",q:t});case 4:a=e.sent,n=n.concat(a.result.files),r=a.result.nextPageToken;case 7:if(r){e.next=2;break}case 8:return e.abrupt("return",n);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",[]);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}function ct(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ye(window.gapi.client.drive.files.delete,{fileId:t});case 3:return e.abrupt("return",!0);case 6:if(e.prev=6,e.t0=e.catch(0),404!==e.t0.status){e.next=10;break}return e.abrupt("return",!1);case 10:throw e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}Object.seal(Ue);var ut=n(66),lt=n.n(ut),ht=n(82);var pt=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e){var r;if(Object(y.a)(this,n),(r=t.call(this))._changeKeysMutex=new ht.a,r._innerKeys=null,r._innerBackendMap=null,r._createChunkConnector=function(e){return{setValue:function(t){r._innerBackendMap.set(e,t)},setDescription:function(t){r._innerBackendMap.setDescription(e,t)},getValue:function(){var t=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._innerBackendMap.get(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),delete:function(){var t=Object(b.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r._innerKeys.splice(r._innerKeys.indexOf(e),1),r._chunks.delete(e),t.next=4,r._innerBackendMap.delete(e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}},r._chunks=new Map,r._Chunk=function(){function e(t){var n=this,r=t.connector,a=t.serializedDescriptions;Object(y.a)(this,e),this._onValueSet=Ie.a.debounce((function(){n._serializedValues=JSON.stringify(n._values),n._connector.setValue(n._serializedValues)}),1e3),this._onDescriptionSet=Ie.a.debounce((function(){n._serializedDescriptions=n._descriptions.map((function(e){return null===e?"null":e})).join(","),n._connector.setDescription(n._serializedDescriptions)}),1e3),this._fetchValuesSynchronised=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null==n._fetchPromise&&(n._fetchPromise=n._fetchValues()),e.next=3,n._fetchPromise;case 3:n._fetchPromise=null;case 4:case"end":return e.stop()}}),e)}))),this._fetchPromise=null,this._fetchValues=Object(b.a)(f.a.mark((function e(){var t,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._connector.getValue();case 2:if(t=e.sent,e.prev=3,r=JSON.parse(t),Array.isArray(r)){e.next=7;break}throw new Error("Bad server data. Not valid array");case 7:for(;r.length<n._descriptions.length;)r.push("");n._values=r,n._serializedValues=t,n._initialMd5Checksum=lt()(t),n._isDirty=!1,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(3),console.error("Bad response from server:"+e.t0.message+" "+t),n._shouldKeepOnFormatError?(n._values=Array(8).fill(""),n._isDirty=!0,n._serializedValues=null,n._onValueSet()):n._connector.delete();case 18:case"end":return e.stop()}}),e,null,[[3,14]])}))),this._connector=r,void 0===a?(this._values=Array(8).fill(""),this._descriptions=[],this._isDirty=!0):(this._serializedDescriptions=a,this._isDirty=!1,this._descriptions=a.split(",").map((function(e){return"null"===e?null:e})))}return Object(v.a)(e,[{key:"isFull",value:function(){return this._descriptions.length>=8}},{key:"listSubKeys",value:function(){for(var e=[],t=0;t<this._descriptions.length&&t<8;t++)null!=this._descriptions[t]&&e.push(t);return e}},{key:"createSubKey",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._shouldKeepOnFormatError=!0,e.prev=1,null!=this._values){e.next=5;break}return e.next=5,this._fetchValuesSynchronised();case 5:if(null!=this._values){e.next=7;break}return e.abrupt("return",null);case 7:if(!this.isFull()){e.next=9;break}throw new Error("Do not call createSubKey for full chunks");case 9:return t=this._descriptions.length,this._descriptions.push(""),this.setDescription(t,""),e.abrupt("return",t);case 13:return e.prev=13,this._shouldKeepOnFormatError=!1,e.finish(13);case 16:case"end":return e.stop()}}),e,this,[[1,,13,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._descriptions[t]){e.next=2;break}throw new Error("item is already deleted");case 2:if(1!==this._descriptions.filter((function(e){return null!=e})).length){e.next=7;break}return e.next=5,this._connector.delete();case 5:e.next=8;break;case 7:this.setDescription(t,null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setValue",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=this._values){e.next=3;break}return e.next=3,this._fetchValuesSynchronised();case 3:if(null!=this._values){e.next=5;break}return e.abrupt("return");case 5:this._values[t]=n,this._isDirty=!0,this._serializedValues=null,this._onValueSet();case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getValue",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._descriptions[t]){e.next=2;break}return e.abrupt("return",void 0);case 2:if(null!=this._values){e.next=5;break}return e.next=5,this._fetchValuesSynchronised();case 5:if(null!=this._values){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",this._values[t]);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(e,t){if(e>=this._descriptions.length||null==this._descriptions[e])throw new Error("null description means subkey doesn't exist. Did you call createKey?");this._descriptions[e]=t,this._serializedDescriptions=null,this._isDirty=!0,this._onDescriptionSet()}},{key:"getDescription",value:function(e){return this._descriptions[e]}},{key:"onMetadataUpdate",value:function(e,t){return this._isDirty?(null!=this._serializedValues&&null!=this._serializedDescriptions&&lt()(this._serializedValues)===t&&this._serializedDescriptions===e&&(this._isDirty=!1,this._initialMd5Checksum=t),{outdated:!1}):(this._serializedDescriptions!==e&&(this._serializedDescriptions=e,this._descriptions=e.split(",").map((function(e){return"null"===e?null:e}))),this._initialMd5Checksum!==t?(this._serializedValues=null,this._values=null,{outdated:!0}):{outdated:!1})}}]),e}(),r._splitOuterKey=function(e){var t=e.indexOf("-");return{prefixKey:Number(e.substring(0,t)),innerKey:e.substring(t+1)}},!e instanceof qe)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r}return Object(v.a)(n,[{key:"createKey",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,a,i,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(t=e.sent,e.prev=3,null!==this._innerKeys){e.next=6;break}throw new Error("You should call getAllKeys first");case 6:if(n=function(){if(0!==s._innerKeys.length)return s._innerKeys[s._innerKeys.length-1]},0!==this._innerKeys.length&&!this._chunks.get(n()).isFull()){e.next=13;break}return e.next=10,this._innerBackendMap.createKey();case 10:r=e.sent,this._innerKeys.push(r),this._chunks.set(r,new this._Chunk({connector:this._createChunkConnector(r)}));case 13:return a=n(),e.next=16,this._chunks.get(a).createSubKey();case 16:return i=e.sent,e.abrupt("return",i+"-"+a);case 18:return e.prev=18,t(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[3,,18,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:if(n=e.sent,e.prev=3,r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this._chunks.get(i).delete(a);case 9:return e.prev=9,n(),e.finish(9);case 12:case"end":return e.stop()}}),e,this,[[3,,9,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setValue(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Don't call getMd5 on this class. Server cannot compute md5 for this item because it is multiplexed.In order to sync call |getAllKeys| and if some item has |outdated===true| call |get|.");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this._splitOuterKey(t),r=n.prefixKey,a=n.innerKey,this._chunks.has(a)){e.next=3;break}return e.abrupt("return",void 0);case 3:return e.abrupt("return",this._chunks.get(a).getValue(r));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(b.a)(f.a.mark((function e(){var t,n,r,a,i,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._changeKeysMutex.acquire();case 2:return t=e.sent,e.prev=3,e.next=6,this._innerBackendMap.getAllKeys();case 6:return n=e.sent,r=[],a=new Map,i=0,n.forEach((function(e){var t=!0,n=0===i++;if(s._chunks.has(e.id)){var c=s._chunks.get(e.id);a.set(e.id,c),t=c.onMetadataUpdate(e.description,e.md5Checksum).outdated}else a.set(e.id,new s._Chunk({connector:s._createChunkConnector(e.id),serializedDescriptions:e.description,isFirstChunk:n}));var o=a.get(e.id);o.listSubKeys().forEach((function(n){r.push({id:n+"-"+e.id,outdated:t,description:o.getDescription(n)})}))})),this._chunks=a,this._innerKeys=n.map((function(e){return e.id})),e.abrupt("return",r);case 14:return e.prev=14,t(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[3,,14,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._innerBackendMap.getSettings();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._innerBackendMap.setSettings(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){var r,a,i;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this._splitOuterKey(t),a=r.prefixKey,i=r.innerKey,this._chunks.has(i)){e.next=3;break}return e.abrupt("return");case 3:this._chunks.get(i).setDescription(a,n);case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(qe),dt=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e){var r;if(Object(y.a)(this,n),(r=t.call(this))._innerBackendMap=null,!e instanceof qe)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r}return Object(v.a)(n,[{key:"_exponentialRetry",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=1;case 1:if(!(n<6)){e.next=16;break}return e.prev=2,e.next=5,t();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),r=1*Math.pow(2,n++),console.error("Failed running ".concat(t.name," : ").concat(e.t0.message,". Will try again after ").concat(r," seconds.")),e.next=14,this._sleep(1e3*r);case 14:e.next=1;break;case 16:console.error("finish retry attempts");case 17:case"end":return e.stop()}}),e,this,[[2,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"createKey",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.createKey.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.delete.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.set.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.get.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getMd5.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllKeys",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getAllKeys.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.getSettings.bind(this._innerBackendMap));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setSettings",value:function(){var e=Object(b.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setSettings.bind(this._innerBackendMap,t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setDescription",value:function(){var e=Object(b.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._exponentialRetry(this._innerBackendMap.setDescription.bind(this._innerBackendMap,t,n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}}]),n}(qe),ft=function(e){Object(C.a)(n,e);var t=Object(S.a)(n);function n(e){var r;if(Object(y.a)(this,n),(r=t.call(this))._innerBackendMap=null,r._pendingGetRequests=new Map,r._handlePendingRequests=null,!e instanceof qe)throw new Error("CachingBackendMap have to accepts instance of BackendMap");return r._innerBackendMap=e,r}return Object(v.a)(n,[{key:"createKey",value:function(){return this._innerBackendMap.createKey()}},{key:"delete",value:function(e){return this._innerBackendMap.delete(e)}},{key:"set",value:function(e,t){return this._innerBackendMap.set(e,t)}},{key:"get",value:function(){var e=Object(b.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){n._pendingGetRequests.set(t,e),null===n._handlePendingRequests&&(n._handlePendingRequests=Object(b.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){var e=Object(b.a)(f.a.mark((function e(){var t,r,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==n._pendingGetRequests.size){e.next=3;break}return n._handlePendingRequests=null,e.abrupt("return",!1);case 3:return t=Object(c.a)(n._pendingGetRequests.entries().next().value,2),r=t[0],a=t[1],n._pendingGetRequests.delete(r),e.t0=a,e.next=8,n._innerBackendMap.get(r);case 8:return e.t1=e.sent,(0,e.t0)(e.t1),e.abrupt("return",!0);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=4,Promise.all([t(),t(),t(),t()]);case 4:if(!e.sent.every((function(e){return!1===e}))){e.next=7;break}return e.abrupt("return");case 7:e.next=0;break;case 9:case"end":return e.stop()}}),e)}))),n._handlePendingRequests())}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMd5",value:function(e){return this._innerBackendMap.getMd5(e)}},{key:"getAllKeys",value:function(){return this._innerBackendMap.getAllKeys()}},{key:"getSettings",value:function(){return this._innerBackendMap.getSettings()}},{key:"setSettings",value:function(e){return this._innerBackendMap.setSettings(e)}},{key:"setDescription",value:function(e,t){return this._innerBackendMap.setDescription(e,t)}}]),n}(qe),bt=Object(L.a)({container:{flex:1,display:"flex",justifyContent:"center",alignItems:"center"}});function yt(e){var t=bt();return a.a.createElement("div",{className:t.container},a.a.createElement(ne.a,Object.assign({variant:"h4"},e),e.children))}function vt(e){var t=a.a.useState(j.state),n=Object(c.a)(t,2),i=n[0],s=n[1],o=a.a.useState(null),u=Object(c.a)(o,2),l=u[0],h=u[1];return Object(r.useEffect)((function(){j.waitForStateChange().then((function(e){e===k.SIGNED_IN?h(new Ge(new pt(new ft(new dt(Ue))),j)):(l&&l.dispose(),h(null)),s(e)}))})),i===k.SIGNED_IN&&l?a.a.createElement(Te,Object.assign({},e,{model:l})):i===k.SIGNED_OUT?a.a.createElement(yt,null,"Sign in to proceed..."):a.a.createElement(yt,null," Loading...")}var mt=function(){var e=Object(o.a)("(prefers-color-scheme: dark)"),t=a.a.useMemo((function(){return Object(u.a)({palette:{type:e?"dark":"light"}})}),[e]),n=a.a.useState(!0),r=Object(c.a)(n,2),i=r[0],s=r[1],p=a.a.useCallback((function(e){window.innerHeight<700&&s(!1)}),[]),d=a.a.useCallback((function(e){s(!0)}),[]);return a.a.createElement(l.a,{theme:t},a.a.createElement(h.a,null),a.a.createElement(ie,{shown:i,onShow:d}),a.a.createElement(vt,{onFocus:p}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},87:function(e,t,n){e.exports=n(104)},92:function(e,t,n){},93:function(e,t,n){}},[[87,1,2]]]);
//# sourceMappingURL=main.5072b6c1.chunk.js.map
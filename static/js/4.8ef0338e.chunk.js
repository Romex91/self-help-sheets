(this["webpackJsonpself-help-sheets"]=this["webpackJsonpself-help-sheets"]||[]).push([[4],{235:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));var a=n(2),r=n.n(a),i=n(4),o=n(56),l=n(15),s=n(0),c=n.n(s),u=n(164),m=n(113),f=n(230),d=n(234),p=n(233),E=n(211),h=n(198),v=n(195),g=n(231),b=n(162),x=n(188),j=n(197),w=n(232),k=n(219),y=n.n(k),C=n(13),L=n(49),A=n(62);function P(e,t,n){return S.apply(this,arguments)}function S(){return(S=Object(i.a)(r.a.mark((function e(t,n,a){var i,o,l;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){t.subscribe((function n(a){t.unsubscribe(n),e(a)}))}));case 2:return i=e.sent,o=!1,l=i.map((function(e){var t=e.emojiArrays.map((function(e){return O(e,n,a)}));return t.some((function(e){return e.someValuesAreDeleted}))&&(o=!0),e.setEmojiLeft(t[0].newArray).setEmojiRight(t[1].newArray)})),e.abrupt("return",{someValuesAreDeleted:o,newEntries:l});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e,t,n){for(var a=new Map,r=0;r<t.length;r++)a.set(t[r].codePoint,e[r]);for(var i=[],o=0;o<n.length;o++){var l=a.get(n[o].codePoint);i.push(null==l?0:l)}return{newArray:i,someValuesAreDeleted:t.some((function(e){return a.get(e.codePoint)>0&&null==n.find((function(t){return t.codePoint===e.codePoint}))}))}}var I=c.a.memo(y.a),D=Object(u.a)((function(e){return{emojiIcon:{margin:"0px 5px 5px 0px ",fontSize:20,display:"flex",alignItems:"center",paddingLeft:10},hintContainer:{display:"flex",flexDirection:"column"},buttons:{marginTop:20,display:"flex",justifyContent:"space-between"},input:{backgroundColor:e.palette.background.paper}}}));function U(e){var t=D();return c.a.createElement("div",{className:t.hintContainer},c.a.createElement(m.a,{variant:"h6"},e.label+":"),c.a.createElement(f.a,{value:"end",label:"Enable popup",control:c.a.createElement(d.a,{checked:e.value.isEnabled,onChange:function(t){e.onChange(e.value.setIsEnabled(t.target.checked))}})}),c.a.createElement(p.a,{value:e.value.text,onChange:function(t){return e.onChange(e.value.setText(t.target.value))},className:t.input,variant:"outlined",multiline:!0}))}function N(e){var t=D(),n=c.a.useState(C.b.state),a=Object(l.a)(n,2),s=a[0],u=a[1],f=c.a.useState(null),d=Object(l.a)(f,2),p=d[0],k=d[1];c.a.useEffect((function(){C.b.addStateListener(u)}),[]),c.a.useEffect((function(){var t=function(e,t){k((function(e){return null==e?t:e}))};return null!=e.model&&e.model.subscribe(t),function(){null!=e.model&&e.model.unsubscribe(t)}}),[e.model]);var y=c.a.useCallback((function(t,n){k((function(t){var a=n.emoji.codePointAt(0),r=n.names.length>0?n.names[n.names.length-1]:"";if(-1!==t.emojiList.findIndex((function(e){return e.codePoint===a})))return alert(r+" is already selected"),t;var i=Object(o.a)(t.emojiList);i.push({codePoint:a,text:r});var l=t.setEmojiList(i);e.model.onSettingsUpdate(l),k(l)}))}),[e.model]);if(s===C.a.SIGNED_OUT)return c.a.createElement(L.a,null,"Sign in to proceed...");if(s===C.a.LOADING||null==p||null==e.model)return c.a.createElement(c.a.Fragment,null,c.a.createElement(E.a,{invisible:!0,open:!0},c.a.createElement(h.a,{color:"inherit"})),c.a.createElement(L.a,null,"Loading..."));var S=function(){var t=Object(i.a)(r.a.mark((function t(n){var a,i,l,s,c,u;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=Object(o.a)(p.emojiList),-1!==(i=a.findIndex((function(e){return e.codePoint===n})))){t.next=4;break}return t.abrupt("return");case 4:return a.splice(i,1),t.next=7,P(e.model,p.emojiList,a);case 7:if(l=t.sent,s=l.someValuesAreDeleted,c=l.newEntries,!s||window.confirm("This will delete some moods from some of the entries. Are you sure?")){t.next=12;break}return t.abrupt("return");case 12:c.forEach((function(t){e.model.onUpdate(t)})),u=p.setEmojiList(a),e.model.onSettingsUpdate(u),k(u);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(i.a)(r.a.mark((function t(){var n,a,i,o,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new A.a,t.next=3,P(e.model,p.emojiList,n.emojiList);case 3:a=t.sent,i=a.someValuesAreDeleted,o=a.newEntries,l=i?"This will delete some moods from some entries. Reset settings?":"Reset settings?",window.confirm(l)&&(o.forEach((function(t){e.model.onUpdate(t)})),e.model.onSettingsUpdate(n),k(n));case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return c.a.createElement(v.a,{container:!0,justify:"center",spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(m.a,{variant:"h4",align:"center"},"Settings")),c.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(m.a,{variant:"h5"},"Helper questions")),c.a.createElement(v.a,{item:!0,xs:12,sm:6},c.a.createElement(U,{label:"Left",value:p.leftHint,onChange:function(t){var n=p.setLeftHint(t);e.model.onSettingsUpdate(n),k(n)}})),c.a.createElement(v.a,{item:!0,xs:12,sm:6},c.a.createElement(U,{label:"Right",value:p.rightHint,onChange:function(t){var n=p.setRightHint(t);e.model.onSettingsUpdate(n),k(n)}})),c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(g.a,null))),c.a.createElement(v.a,{container:!0,item:!0,xs:12,spacing:2},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(m.a,{variant:"h5"},"Moods")),c.a.createElement(v.a,{container:!0,alignItems:"flex-start",justify:"flex-start",alignContent:"flex-start",item:!0,xs:12,sm:6},c.a.createElement(v.a,{item:!0,xs:12},c.a.createElement(m.a,{variant:"h6"},"Active: ")),p.emojiList.map((function(e){return c.a.createElement(v.a,{item:!0,key:e.codePoint},c.a.createElement(b.a,{className:t.emojiIcon},c.a.createElement(m.a,null,String.fromCodePoint(e.codePoint)),c.a.createElement(x.a,{onClick:function(){return S(e.codePoint)}},c.a.createElement(w.a,null))))}))),c.a.createElement(v.a,{item:!0,xs:12,sm:6},c.a.createElement(m.a,{variant:"h6"},"Add new:"),c.a.createElement(I,{disableSkinTonePicker:!0,disableAutoFocus:!0,onEmojiClick:y})),c.a.createElement(v.a,{item:!0,xs:12,className:t.buttons},c.a.createElement(j.a,{color:"secondary",onClick:O},"Reset defaults"),c.a.createElement(j.a,{color:"primary",onClick:e.onClose},"Close"))))}}}]);
//# sourceMappingURL=4.8ef0338e.chunk.js.map
(this["webpackJsonpself-help-sheets"]=this["webpackJsonpself-help-sheets"]||[]).push([[1],{239:function(e,t,n){"use strict";n.r(t);var a=n(205),r=n(9),o=n(10),i=n(20),l=n(19),c=n(57),s=n(17),u=n(0),d=n.n(u),m=n(23),p=n(26),f=n(156),h=n(188),b=n(107),g=n(220),v=n(200),y=n(183),E=n(236),j=n(216),C=n.n(j),w=n(209),x=n.n(w),O=n(67),k=n(235),R=Object(f.a)((function(e){return{outer:{position:"relative"},popup:{position:"absolute",display:"flex",flexDirection:"column",justifyContent:"center",minWidth:140,zIndex:2,padding:10,background:e.palette.background.paper,border:"gray solid 2px",borderRadius:4}}})),D=d.a.forwardRef((function(e,t){var n=R();return e.in&&d.a.createElement("div",{className:n.outer},d.a.createElement(k.a,{in:e.in},d.a.createElement("div",{ref:t,className:n.popup},e.children)))})),A=Object(f.a)((function(e){return{container:{alignSelf:"flex-start",margin:2,cursor:"pointer",borderColor:function(e){return e?"gray":"#0000"},border:"solid 2px",borderRadius:4,position:"relative",backgroundColor:e.palette.background.paper},setupItem:{border:"2px solid",borderColor:function(e){return e?"darkgray":"#0000"},borderRadius:4,fontSize:20,display:"flex",alignItems:"center",justifyContent:"center"},icon:{cursor:"pointer",width:15,margin:0,padding:"4px 1px",height:"30px",border:"1px solid #0000",borderColor:function(e){return e?"gray":"#0000"}},emoji:{userSelect:"none",fontWeight:function(e){return 3===e?"bold":"unset"},opacity:function(e){return 3===e?1:2===e?.7:.3}}}}));function z(e){var t=e.emoji,n=e.text,a=Object(c.a)(e,["emoji","text"]),r=A(a.value);return d.a.createElement("span",Object.assign({className:r.emoji,role:"img","aria-label":n},a),String.fromCodePoint(t))}function S(e){var t=e.selectedValue,n=e.value,a=Object(c.a)(e,["selectedValue","value"]),r=A(t===n),o=5*(3-n)+1;return d.a.createElement(O.a,Object.assign({className:r.icon,viewBox:"1 1 7 15"},a),d.a.createElement("rect",{y:o,width:"9",height:16-o,fill:n<=t?"red":"lightGray"}))}function _(e){var t=e.value,n=e.isActive,a=Object(c.a)(e,["value","isActive"]),r=A(n);return d.a.createElement("div",{className:r.setupItem},d.a.createElement(z,Object.assign({},a,{value:3,onClick:function(){return a.onChange((t+1)%4)}})),d.a.createElement(S,{onClick:function(){return a.onChange(0)},selectedValue:t,value:0}),d.a.createElement(S,{onClick:function(){return a.onChange(1)},selectedValue:t,value:1}),d.a.createElement(S,{onClick:function(){return a.onChange(2)},selectedValue:t,value:2}),d.a.createElement(S,{onClick:function(){return a.onChange(3)},selectedValue:t,value:3}))}function T(e){var t=d.a.useState(!1),n=Object(p.a)(t,2),r=n[0],o=n[1],i=d.a.useState(-1),l=Object(p.a)(i,2),c=l[0],s=l[1],u=d.a.useRef(),f=A(r);if(0===e.emojiArray.length)return null;var h=e.emojiArray.filter((function(e){return e.value>0})),g=0;return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{tabIndex:0,onClick:function(e){e.stopPropagation()},onFocus:function(t){e.onFocus(t),o(!0)},onBlur:function(t){u.current.contains(document.activeElement)||(o(!1),e.onBlur(t))},className:f.container,onKeyDown:function(t){if("ArrowLeft"===t.key){if(c<0&&s(c=0),c<e.emojiArray.length){var n=Object(a.a)(e.emojiArray);n[c].value--,n[c].value<0&&(n[c].value=3),e.onEmojiArrayChange(n)}}else if("ArrowRight"===t.key){if(c<0&&s(c=0),c<e.emojiArray.length){var r=Object(a.a)(e.emojiArray);r[c].value++,r[c].value>3&&(r[c].value=0),e.onEmojiArrayChange(r)}}else if("ArrowDown"===t.key)++c>=e.emojiArray.length&&(c=0),s(c);else if("ArrowUp"===t.key)--c<0&&(c=e.emojiArray.length-1),s(c);else{if("Escape"!==t.key&&"Enter"!==t.key)return;e.inputRef.current.focus()}t.preventDefault()}},h.length>0?h.map((function(e){return d.a.createElement(z,{key:e.codePoint,emoji:e.codePoint,text:e.text,value:e.value})})):d.a.createElement(b.a,{variant:"caption",color:"textSecondary"},"add mood"),d.a.createElement(D,{in:r,ref:u},d.a.createElement(b.a,{align:"center",variant:"body1"},e.text),e.emojiArray.map((function(t){return d.a.createElement(_,{key:t.codePoint,isActive:g++===c,emoji:t.codePoint,text:t.text,value:t.value,onChange:function(n){e.onEmojiArrayChange(e.emojiArray.map((function(e){return e.codePoint===t.codePoint?Object(m.a)(Object(m.a)({},e),{},{value:n}):e})))}})})),d.a.createElement(b.a,{align:"center",variant:"caption"},"Use arrow keys."))," "))}var I=n(47),F=function(e){return{border:"solid",borderRadius:4,backgroundColor:e.palette.background.paper,padding:function(e){return e.focused?4:5},borderWidth:function(e){return!0===e.focused?2:1},borderColor:function(t){return!0===t.focused?e.palette.primary.light:"gray"}}},H=Object(f.a)((function(e){return{inner:Object(s.a)({display:"flex",flex:1,flexDirection:"column",position:"relative"},e.breakpoints.up("sm"),F(e)),input:{padding:"0px 7px",marginTop:function(e){return e.hasCreationTime?0:19},minHeight:function(e){return e.hasEmoji?76:104},alignItems:"flex-start"},outer:Object(s.a)({display:"flex",alignItems:"flex-start",flexDirection:"row"},e.breakpoints.down("xs"),F(e)),date:{border:"0px !important",marginBottom:"0px !important",paddingBottom:"0px !important"},hint:{backgroundColor:e.palette.background.paper,whiteSpace:"pre-line"}}}));function M(e){var t=e.onFocus,n=e.emojiText,a=e.emojiArray,r=e.onDelete,o=e.creationTime,i=e.onEmojiArrayChange,l=e.onCollapseExited,s=e.collapsed,u=e.example,m=e.deleteXsDown,f=e.deleteSmUp,E=Object(c.a)(e,["onFocus","emojiText","emojiArray","onDelete","creationTime","onEmojiArrayChange","onCollapseExited","collapsed","example","deleteXsDown","deleteSmUp"]),j=d.a.useState(!1),w=Object(p.a)(j,2),O=w[0],k=w[1],R=d.a.useState(!1),A=Object(p.a)(R,2),z=A[0],S=A[1];d.a.useEffect((function(){O&&t(null,!0)}),[O,t]);var _=H({hasCreationTime:!!o,hasEmoji:a.length>0,focused:O||z}),I=d.a.useRef();return d.a.useEffect((function(){!s&&E.autoFocus&&I.current.focus()}),[s,E.autoFocus]),d.a.createElement(h.a,{in:!s,onExited:l,onEntered:function(){E.autoFocus&&I.current.focus()}},d.a.createElement("div",{className:_.outer},d.a.createElement("div",{className:_.inner,onClick:function(e){0===window.getSelection().toString().length&&I.current.focus()}},o&&d.a.createElement(b.a,{variant:"caption",color:"textSecondary",align:"center"},x()(o).format("h:mm a")),d.a.createElement(g.a,Object.assign({className:_.input,fullWidth:!0,multiline:!0,placeholder:E.hint?E.hint.text:"",variant:"outlined",inputRef:I,onFocus:function(e){k(!0),t(e)},onBlur:function(e){k(!1)}},E)),d.a.createElement(T,{text:n,onEmojiArrayChange:i,emojiArray:a,inputRef:I,onFocus:function(e){t(e),S(!0)},onBlur:function(e){S(!1)}}),null!=E.hint&&E.hint.isEnabled&&E.value.length>0&&d.a.createElement(D,{in:O},d.a.createElement(b.a,{className:_.hint,color:"textSecondary",padding:10},E.hint.text))),d.a.createElement(v.a,{xsDown:!m,smUp:!f},d.a.createElement(y.a,{disabled:!!u,"aria-label":"delete",size:"small",onClick:r},d.a.createElement(C.a,{color:u?"disabled":"action",fontSize:"small"})))))}var N=d.a.forwardRef((function(e,t){var n=e.onFocus,a=e.onUpdate,r=(e.onRightChanged,e.entry),o=e.settings,i=Object(c.a)(e,["onFocus","onUpdate","onRightChanged","entry","settings"]),l=H(),s=!!r.text||r.initiallyCollapsed,u=d.a.useState(s),f=Object(p.a)(u,2),g=f[0],v=f[1];if(d.a.useEffect((function(){s&&v(!1)}),[s]),r.text)return d.a.createElement("tr",{ref:t,className:l.date},d.a.createElement("td",{colSpan:2},d.a.createElement(h.a,{in:!g},d.a.createElement(b.a,{variant:"body2",align:"center",color:"textSecondary"},r.text))));console.assert(r instanceof I.a),d.a.useEffect((function(){r.initiallyCollapsed&&a(r.setInitiallyCollapsed(!1),!0)}),[r,a]),d.a.useEffect((function(){r.data===I.b.HIDDEN&&a(r.show(),!0)}));var y=[],j=[];if(null!=o)for(var C=0;C<o.emojiList.length;C++)y.push(Object(m.a)({value:null==r.emojiArrays[0][C]?0:r.emojiArrays[0][C]},o.emojiList[C])),j.push(Object(m.a)({value:null==r.emojiArrays[1][C]?0:r.emojiArrays[1][C]},o.emojiList[C]));var w=function(e){a(e)},x=function(e,t){r.focused&&a(r.setFocused(!1),!0),!t&&n&&n(e)};return d.a.createElement("tr",{ref:t},d.a.createElement("td",{key:"issueElement"},r.isDataLoaded()?d.a.createElement(M,Object.assign({autoFocus:r.focused&&r.lastChange!==I.c.EDIT_RIGHT,color:"secondary",creationTime:r.creationTime,value:r.left,onChange:function(e){return w(r.setLeft(e.target.value))},onFocus:x,onDelete:function(){v(!0)},deleteXsDown:!0,collapsed:g,hint:null==o?null:o.leftHint,emojiText:"How do you feel now?",emojiArray:y,onEmojiArrayChange:function(e){return w(r.setEmojiLeft(e.map((function(e){return e.value}))))}},i)):d.a.createElement(E.a,{variant:"rect",height:135})),d.a.createElement("td",{key:"resolutionElement"},r.isDataLoaded()?d.a.createElement(M,Object.assign({autoFocus:r.focused&&r.lastChange===I.c.EDIT_RIGHT,color:"primary",variant:"outlined",value:r.right,onChange:function(e){return w(r.setRight(e.target.value))},onFocus:x,deleteSmUp:!0,onDelete:function(){v(!0)},collapsed:g,onCollapseExited:function(e){return a(r.delete())},hint:null==o?null:o.rightHint,emojiText:"How do you feel after writing resolution?",emojiArray:j,onEmojiArrayChange:function(e){return w(r.setEmojiRight(e.map((function(e){return e.value}))))}},i)):d.a.createElement(E.a,{variant:"rect",height:135})))})),P=n(219),B=n.n(P),U=n(72),L=n.n(U),Y=n(192),W=n(187),V=n(7),K=n(85),G=n(30),X=n(13),J=n(27),q=Object(J.a)("onHeightChanged"),Q=Object(J.a)("resizeObserver"),Z=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).ref=d.a.createRef(),Object.defineProperty(Object(G.a)(e),q,{writable:!0,value:function(){e.ref.current&&e.props.onHeightChanged(e.props.entry,e.ref.current.offsetHeight)}}),Object.defineProperty(Object(G.a)(e),Q,{writable:!0,value:null}),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.ref.current&&(Object(X.a)(this,Q)[Q]=new ResizeObserver(Object(X.a)(this,q)[q]),Object(X.a)(this,Q)[Q].observe(this.ref.current))}},{key:"componentWillUnmount",value:function(){Object(X.a)(this,Q)[Q]&&(Object(X.a)(this,Q)[Q].disconnect(),Object(X.a)(this,Q)[Q]=null)}},{key:"render",value:function(){var e=this.props,t=(e.scrollableContainerRef,e.ItemComponent),n=(e.onHeightChanged,Object(c.a)(e,["scrollableContainerRef","ItemComponent","onHeightChanged"]));return d.a.createElement(t,Object.assign({ref:this.ref},n))}}]),n}(d.a.PureComponent);function $(e){var t=e.entries,n=e.defaultHeight,a=void 0===n?150:n,r=e.scrollableContainerRef,o=e.ItemComponent,i=e.PlaceholderComponent,l=Object(c.a)(e,["entries","defaultHeight","scrollableContainerRef","ItemComponent","PlaceholderComponent"]),s=d.a.useState(0),u=Object(p.a)(s,2),m=u[0],f=u[1],h=d.a.useState(window.innerHeight),b=Object(p.a)(h,2),g=b[0],v=b[1],y=d.a.useState(new Map),E=Object(p.a)(y,2),j=E[0],C=E[1],w=d.a.useCallback((function(e,t){C((function(n){var a=new Map(n);return a.set(e.key,t),a}))}),[]),x=new Set(t.map((function(e){return e.key}))),O=[];j.forEach((function(e,t){x.has(t)||O.push(t)})),O.length>0&&C((function(e){var t=new Map(e);return O.forEach((function(n){e.has(n)&&t.delete(n)})),t}));var k=function(){r.current&&f(r.current.scrollTop),v(window.innerHeight)};d.a.useEffect((function(){return r.current&&(r.current.onscroll=k),window.addEventListener("resize",k),function(){window.removeEventListener("resize",k)}}));var R,D=[],A=0,z=0,S=0,_=Object(K.a)(t);try{for(_.s();!(R=_.n()).done;){var T=R.value,I=a;j.has(T.key)&&(I=j.get(T.key)),!l.example&&A+I<m-window.innerHeight?(T.focused&&r.current&&(r.current.scrollTop=A),z+=I):l.example||A<m+2*g?D.push(d.a.createElement(Z,Object.assign({key:T.key,onHeightChanged:w,entry:T,ItemComponent:o,scrollableContainerRef:r},l))):(T.focused&&r.current&&(r.current.scrollTop=A),S+=I),A+=I}}catch(F){_.e(F)}finally{_.f()}return 0!==z&&D.unshift(d.a.createElement(i,{height:z,key:"placeholderTop"})),0!==S&&D.push(d.a.createElement(i,{height:S,key:"placeholderBottom"})),D}var ee=n(87),te=n.n(ee),ne=n(237);function ae(e){var t=e.height,n=Object(c.a)(e,["height"]);return d.a.createElement("tr",n,d.a.createElement("td",{colSpan:"2"},d.a.createElement("div",{style:{height:t}})))}var re=function(e){Object(i.a)(n,e);var t=Object(l.a)(n);function n(){var e;Object(r.a)(this,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))).state={entries:[]},e._onEntriesChanged=function(t,n,r){var o=r.canRedo,i=r.canUndo;if(t.length>0){for(var l=function(e){this.key=this.text=x()(e).calendar({sameDay:"[Today], MMM Do, ddd",lastDay:"[Yesterday] , MMM Do, ddd",lastWeek:"MMM Do YYYY, ddd",sameElse:"MMM Do YYYY, ddd"})},c=(t=Object(a.a)(t))[t.length-1].creationTime,s=t.length-2;s>=0;s--){var u=t[s].creationTime;null!=c?!e.props.example&&(null==u||u.getTime()<c.getTime())||null!=u&&u.getYear()===c.getYear()&&u.getMonth()===c.getMonth()&&u.getDay()===c.getDay()||(t.splice(s+1,0,new l(c)),c=u):c=u}null!=c&&t.splice(0,0,new l(c))}e.setState({entries:t,settings:n,canRedo:o,canUndo:i})},e._scrollBy=function(t){requestAnimationFrame((function(){if(null!=e._scrollableContainerRef.current){var n=Date.now()-e._lastScrollTime;e._lastScrollTime=Date.now(),e._scrollableContainerRef.current.scrollBy({top:t,behavior:n>300?"smooth":"auto"})}}))},e._onKeyPress=function(t,n){if("ctrl+z"===t||"cmd+z"===t)e.props.model.undo(),n.preventDefault();else if("ctrl+y"===t||"cmd+y"===t||"ctrl+shift+z"===t||"cmd+shift+z"===t)e.props.model.redo(),n.preventDefault();else if("ctrl+enter"===t||"cmd+enter"===t)e.props.model.addNewItemThrottled(),n.preventDefault();else{if(0===n.target.tabIndex)return;"pageup"===t?(e._scrollBy(.8*-window.innerHeight),n.preventDefault()):"pagedown"===t?(e._scrollBy(.8*window.innerHeight),n.preventDefault()):"down"===t?(e._scrollBy(100),n.preventDefault()):"up"===t&&(e._scrollBy(-100),n.preventDefault())}},e._tableRef=d.a.createRef(),e._scrollableContainerRef=d.a.createRef(),e._columnResizer=null,e._resizeObserver=null,e._lastScrollTime=Date.now(),e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.model.subscribe(this._onEntriesChanged),this.props.example||(this._columnResizer=new B.a(this._tableRef.current,{liveDrag:!0,minWidth:100,gripInnerHtml:"<div class='".concat(this.props.classes.grip,"'></div>"),onResize:function(e){window.dispatchEvent(new Event("resize"))}}),window.removeEventListener("resize",this._columnResizer.onResize),this._resizeObserver=new ResizeObserver(L.a.throttle((function(){e._columnResizer.onResize()}),200)),this._resizeObserver.observe(this._tableRef.current))}},{key:"componentDidUpdate",value:function(e){this.props.model!==e.model&&(e.model.unsubscribe(this._onEntriesChanged),this.props.model.subscribe(this._onEntriesChanged))}},{key:"componentWillUnmount",value:function(){this.props.model.unsubscribe(this._onEntriesChanged),this.props.example||(this._columnResizer.destroy(),this._resizeObserver.unobserve(this._tableRef.current))}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(te.a,{handleFocusableElements:!0,handleKeys:["ctrl+z","cmd+z","ctrl+shift+z","cmd+shift+z","ctrl+y","cmd+y","ctrl+enter","cmd+enter","up","down","pagedown","pageup"],onKeyEvent:this._onKeyPress}),!this.props.example&&d.a.createElement(Y.a,{className:this.props.classes.buttonsContainer,container:!0,justify:"space-between",spacing:0},d.a.createElement(Y.a,{item:!0,xs:1,sm:2},!this.props.appBarShown&&d.a.createElement(y.a,{size:"small",onClick:this.props.onShowAppBar},d.a.createElement(ne.a,{color:"primary"}))),d.a.createElement(Y.a,{className:this.props.classes.buttons,item:!0,xs:6,sm:3},d.a.createElement(W.a,{size:"small",onClick:function(){e.props.model.addNewItemThrottled()}},"Add new item")),d.a.createElement(Y.a,{className:this.props.classes.buttons,item:!0,xs:5,sm:2},d.a.createElement(W.a,{fullWidth:!0,size:"small",fontSize:"small",onClick:this.props.model.undo,disabled:!this.state.canUndo},"Undo"),d.a.createElement(W.a,{fullWidth:!0,size:"small",fontSize:"small",disabled:!this.state.canRedo,onClick:this.props.model.redo},"Redo"))),d.a.createElement("div",{ref:this._scrollableContainerRef,className:this.props.classes.scrollableContainer},d.a.createElement("table",{cellPadding:0,cellSpacing:0,className:this.props.classes.entriesTable,ref:this._tableRef},d.a.createElement("thead",null,d.a.createElement("tr",null,d.a.createElement("th",null),d.a.createElement("th",null))),d.a.createElement("tbody",null,d.a.createElement($,{entries:this.state.entries,ItemComponent:N,PlaceholderComponent:ae,scrollableContainerRef:this._scrollableContainerRef,onUpdate:this.props.model.onUpdate,onFocus:this.props.onFocus,settings:this.state.settings,example:this.props.example})))))}}]),n}(d.a.PureComponent);t.default=Object(V.a)((function(e){return{scrollableContainer:{overflow:function(e){return e.example?"hide":"auto"},flex:1,willChange:"transform"},grip:{"&:hover":{backgroundColor:"#00F8",transitionDuration:"0s"},width:8,zIndex:10,position:"absolute",height:"100%",backgroundColor:"#0000",cursor:"col-resize",transitionProperty:"background-color",transitionDuration:"1s"},entriesTable:Object(s.a)({width:"100%",borderSpacing:0,"& td":{padding:2,verticalAlign:"top",borderLeft:"5px solid #0000",overflow:"inherit !important"},"& td:nth-child(odd)":{borderRight:"5px solid #0000",borderLeft:"20px solid #0000"}},e.breakpoints.down("xs"),{"& thead":{display:"none"},"& tbody tr":{display:"grid",padding:5,marginBottom:5,borderRadius:4,border:"1px solid",borderColor:e.palette.text.secondary},"& td:nth-child(odd)":{borderRight:0,borderLeft:0},"& tbody td":{display:"block",borderLeft:0}}),buttonsContainer:{backgroundColor:e.palette.background.paper,borderBottom:"1px solid lightGray"},buttons:{display:"flex",justifyContent:"center"}}}))(re)}}]);
//# sourceMappingURL=1.cea1ff7b.chunk.js.map
{"version":3,"sources":["Popup.js","EmojiPicker.js","Entry.js","VirtualizedList.js","EntriesTable.js"],"names":["useStyles","makeStyles","theme","outer","position","popup","display","flexDirection","justifyContent","minWidth","zIndex","padding","background","palette","paper","border","borderRadius","Popup","React","forwardRef","props","ref","classes","in","className","Zoom","children","container","alignSelf","margin","cursor","borderColor","focused","backgroundColor","setupItem","isActive","fontSize","alignItems","icon","width","height","isSelected","emoji","userSelect","fontWeight","value","opacity","EmojiItem","text","role","aria-label","String","fromCodePoint","RadioIcon","selectedValue","SvgIcon","viewBox","y","fill","EmojiSetupItem","onClick","onChange","EmojiPicker","useState","setFocus","selectedRow","setSelectedRow","popupRef","useRef","emojiArray","length","activeEmojiArray","filter","x","rowCounter","Fragment","tabIndex","event","stopPropagation","onFocus","onBlur","current","contains","document","activeElement","onKeyDown","key","clone","onEmojiArrayChange","inputRef","focus","preventDefault","map","codePoint","Typography","variant","color","align","paperStyle","borderWidth","primary","light","inner","flex","breakpoints","up","input","marginTop","hasCreationTime","minHeight","hasEmoji","down","date","marginBottom","paddingBottom","hint","whiteSpace","SubItem","onFocusOuter","emojiText","onDelete","creationTime","onCollapseExited","collapsed","example","deleteXsDown","deleteSmUp","setFocused","emojiFocused","setEmojiFocused","useEffect","autoFocus","Collapse","onExited","onEntered","window","getSelection","toString","moment","format","InputBase","fullWidth","multiline","placeholder","isEnabled","Hidden","xsDown","smUp","IconButton","disabled","size","Entry","onUpdate","entry","onRightChanged","settings","otherProps","initiallyCollapsed","setCollapsed","colSpan","console","assert","EntryModel","setInitiallyCollapsed","data","EntryStatus","HIDDEN","show","emojiLeft","emojiRight","i","emojiList","push","emojiArrays","onEntryChanged","updatedEntry","alreadyFocused","isDataLoaded","lastChange","LastChange","EDIT_RIGHT","left","setLeft","target","leftHint","newLeftEmojiArray","setEmojiLeft","Skeleton","right","setRight","delete","rightHint","newRightEmojiArray","setEmojiRight","VirtualizedItem","createRef","onHeightChanged","offsetHeight","this","ResizeObserver","observe","disconnect","ItemComponent","scrollableContainerRef","PureComponent","VirtualizedList","entries","defaultHeight","PlaceholderComponent","scrollY","setScrollY","innerHeight","windowHeight","setWindowHeight","Map","realHeightsMap","setRealHeightsMap","useCallback","oldMap","newMap","set","keys","Set","keysToDelete","forEach","_value","has","onResizeOrScroll","scrollTop","onscroll","addEventListener","removeEventListener","visibleEntries","currentHeight","placeholderTop","placeholderBottom","entryHeight","get","unshift","Placeholder","rest","style","EntriesTableRaw","state","_onEntriesChanged","canRedo","canUndo","DateEntry","calendar","sameDay","lastDay","lastWeek","sameElse","dateToInsert","currentCreationTime","getTime","getYear","getMonth","getDay","splice","setState","_scrollBy","top","requestAnimationFrame","_scrollableContainerRef","timeSinceLastScroll","Date","now","_lastScrollTime","scrollBy","behavior","_onKeyPress","e","model","undo","redo","addNewItemThrottled","_tableRef","_columnResizer","_resizeObserver","subscribe","ColumnResizer","liveDrag","gripInnerHtml","grip","onResize","dispatchEvent","Event","_","throttle","prevProps","unsubscribe","destroy","unobserve","handleFocusableElements","handleKeys","onKeyEvent","Grid","buttonsContainer","justify","spacing","item","xs","sm","appBarShown","onShowAppBar","buttons","Button","scrollableContainer","cellPadding","cellSpacing","entriesTable","withStyles","overflow","willChange","transitionDuration","transitionProperty","borderSpacing","verticalAlign","borderLeft","borderRight","secondary","borderBottom"],"mappings":"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","file":"static/js/1.dea887e5.chunk.js","sourcesContent":["// Material ui popper is too slow buggy and overcomplicated.\r\n// Do not expect much from this popup. It doesn't respect screen boundaries etc.\r\n\r\nimport React from \"react\";\r\nimport { Zoom, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  outer: {\r\n    position: \"relative\",\r\n  },\r\n  popup: {\r\n    position: \"absolute\",\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    justifyContent: \"center\",\r\n    minWidth: 140,\r\n    zIndex: 2,\r\n    padding: 10,\r\n    background: theme.palette.background.paper,\r\n    border: \"gray solid 2px\",\r\n    borderRadius: 4,\r\n  },\r\n}));\r\n\r\nexport const Popup = React.forwardRef((props, ref) => {\r\n  const classes = useStyles();\r\n  return (\r\n    props.in && (\r\n      <div className={classes.outer}>\r\n        <Zoom in={props.in}>\r\n          <div ref={ref} className={classes.popup}>\r\n            {props.children}\r\n          </div>\r\n        </Zoom>\r\n      </div>\r\n    )\r\n  );\r\n});\r\n","import React from \"react\";\nimport { Typography, makeStyles, SvgIcon } from \"@material-ui/core\";\nimport { Popup } from \"./Popup\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    alignSelf: \"flex-start\",\n    margin: 2,\n    cursor: \"pointer\",\n    borderColor: (focused) => (focused ? \"gray\" : \"#0000\"),\n    border: \"solid 2px\",\n    borderRadius: 4,\n    position: \"relative\",\n    backgroundColor: theme.palette.background.paper,\n  },\n  setupItem: {\n    border: \"2px solid\",\n    borderColor: (isActive) => (isActive ? \"darkgray\" : \"#0000\"),\n    borderRadius: 4,\n    fontSize: 20,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n\n  icon: {\n    cursor: \"pointer\",\n    width: 15,\n    margin: 0,\n    padding: \"4px 1px\",\n    height: \"30px\",\n    border: \"1px solid #0000\",\n\n    borderColor: (isSelected) => (isSelected ? \"gray\" : \"#0000\"),\n  },\n\n  emoji: {\n    userSelect: \"none\",\n    fontWeight: (value) => (value === 3 ? \"bold\" : \"unset\"),\n    opacity: (value) => (value === 3 ? 1 : value === 2 ? 0.7 : 0.3),\n  },\n}));\n\nfunction EmojiItem({ emoji, text, ...props }) {\n  const classes = useStyles(props.value);\n  return (\n    <span className={classes.emoji} role=\"img\" aria-label={text} {...props}>\n      {String.fromCodePoint(emoji)}\n    </span>\n  );\n}\n\nfunction RadioIcon({ selectedValue, value, ...props }) {\n  const classes = useStyles(selectedValue === value);\n\n  let height = 5 * (3 - value) + 1;\n  return (\n    <SvgIcon className={classes.icon} viewBox=\"1 1 7 15\" {...props}>\n      <rect\n        y={height}\n        width=\"9\"\n        height={16 - height}\n        fill={value <= selectedValue ? \"red\" : \"lightGray\"}\n      />\n    </SvgIcon>\n  );\n}\n\nfunction EmojiSetupItem({ value, isActive, ...props }) {\n  const classes = useStyles(isActive);\n  return (\n    <div className={classes.setupItem}>\n      <EmojiItem\n        {...props}\n        value={3}\n        onClick={() => props.onChange((value + 1) % 4)}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(0)}\n        selectedValue={value}\n        value={0}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(1)}\n        selectedValue={value}\n        value={1}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(2)}\n        selectedValue={value}\n        value={2}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(3)}\n        selectedValue={value}\n        value={3}\n      />\n    </div>\n  );\n}\n\nexport function EmojiPicker(props) {\n  const [focused, setFocus] = React.useState(false);\n  let [selectedRow, setSelectedRow] = React.useState(-1);\n\n  const popupRef = React.useRef();\n  const classes = useStyles(focused);\n\n  let onClick = (event) => {\n    event.stopPropagation();\n  };\n\n  let onFocus = (event) => {\n    props.onFocus(event);\n    setFocus(true);\n  };\n\n  let onBlur = (event) => {\n    if (!popupRef.current.contains(document.activeElement)) {\n      setFocus(false);\n      props.onBlur(event);\n    }\n  };\n\n  let onKeyDown = (event) => {\n    if (event.key === \"ArrowLeft\") {\n      if (selectedRow < 0) setSelectedRow((selectedRow = 0));\n      if (selectedRow < props.emojiArray.length) {\n        let clone = [...props.emojiArray];\n        clone[selectedRow].value--;\n        if (clone[selectedRow].value < 0) {\n          clone[selectedRow].value = 3;\n        }\n        props.onEmojiArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowRight\") {\n      if (selectedRow < 0) setSelectedRow((selectedRow = 0));\n      if (selectedRow < props.emojiArray.length) {\n        let clone = [...props.emojiArray];\n        clone[selectedRow].value++;\n        if (clone[selectedRow].value > 3) {\n          clone[selectedRow].value = 0;\n        }\n        props.onEmojiArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowDown\") {\n      selectedRow++;\n      if (selectedRow >= props.emojiArray.length) {\n        selectedRow = 0;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"ArrowUp\") {\n      selectedRow--;\n      if (selectedRow < 0) {\n        selectedRow = props.emojiArray.length - 1;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"Escape\" || event.key === \"Enter\") {\n      props.inputRef.current.focus();\n    } else {\n      return;\n    }\n\n    event.preventDefault();\n  };\n\n  if (props.emojiArray.length === 0) return null;\n\n  let activeEmojiArray = props.emojiArray.filter((x) => x.value > 0);\n\n  let rowCounter = 0;\n\n  return (\n    <React.Fragment>\n      <div\n        tabIndex={0}\n        onClick={onClick}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        className={classes.container}\n        onKeyDown={onKeyDown}\n      >\n        {activeEmojiArray.length > 0 ? (\n          activeEmojiArray.map((x) => (\n            <EmojiItem\n              key={x.codePoint}\n              emoji={x.codePoint}\n              text={x.text}\n              value={x.value}\n            />\n          ))\n        ) : (\n          <Typography variant=\"caption\" color=\"textSecondary\">\n            add mood\n          </Typography>\n        )}\n        <Popup in={focused} ref={popupRef}>\n          <Typography align=\"center\" variant=\"body1\">\n            {props.text}\n          </Typography>\n          {props.emojiArray.map((x) => (\n            <EmojiSetupItem\n              key={x.codePoint}\n              isActive={rowCounter++ === selectedRow}\n              emoji={x.codePoint}\n              text={x.text}\n              value={x.value}\n              onChange={(value) => {\n                props.onEmojiArrayChange(\n                  props.emojiArray.map((y) =>\n                    y.codePoint === x.codePoint ? { ...y, value } : y\n                  )\n                );\n              }}\n            />\n          ))}\n\n          <Typography align=\"center\" variant=\"caption\">\n            Use arrow keys.\n          </Typography>\n        </Popup>{\" \"}\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport {\n  IconButton,\n  InputBase,\n  makeStyles,\n  Typography,\n  Collapse,\n  Hidden,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport moment from \"moment\";\nimport { EmojiPicker } from \"./EmojiPicker\";\nimport { Popup } from \"./Popup\";\nimport { EntryModel, EntryStatus, LastChange } from \"./EntryModel\";\n\nconst paperStyle = (theme) => ({\n  border: \"solid\",\n  borderRadius: 4,\n  backgroundColor: theme.palette.background.paper,\n  padding: ({ focused }) => (focused ? 4 : 5),\n  borderWidth: ({ focused }) => {\n    return focused === true ? 2 : 1;\n  },\n  borderColor: ({ focused }) => {\n    return focused === true ? theme.palette.primary.light : \"gray\";\n  },\n});\n\nconst useStyles = makeStyles((theme) => ({\n  inner: {\n    display: \"flex\",\n    flex: 1,\n\n    flexDirection: \"column\",\n    position: \"relative\",\n    [theme.breakpoints.up(\"sm\")]: paperStyle(theme),\n  },\n  input: {\n    padding: \"0px 7px\",\n    marginTop: ({ hasCreationTime }) => (hasCreationTime ? 0 : 19),\n    minHeight: ({ hasEmoji }) => (hasEmoji ? 76 : 76 + 28),\n    alignItems: \"flex-start\",\n  },\n  outer: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexDirection: \"row\",\n    [theme.breakpoints.down(\"xs\")]: paperStyle(theme),\n  },\n  date: {\n    border: \"0px !important\",\n    marginBottom: \"0px !important\",\n    paddingBottom: \"0px !important\",\n  },\n  hint: {\n    backgroundColor: theme.palette.background.paper,\n    whiteSpace: \"pre-line\",\n  },\n}));\n\nfunction SubItem({\n  onFocus: onFocusOuter,\n  emojiText,\n  emojiArray,\n  onDelete,\n  creationTime,\n  onEmojiArrayChange,\n  onCollapseExited,\n  collapsed,\n  example,\n  deleteXsDown,\n  deleteSmUp,\n  ...props\n}) {\n  const [focused, setFocused] = React.useState(false);\n  const [emojiFocused, setEmojiFocused] = React.useState(false);\n\n  React.useEffect(() => {\n    if (focused) {\n      onFocusOuter(null, true);\n    }\n  }, [focused, onFocusOuter]);\n\n  const classes = useStyles({\n    hasCreationTime: !!creationTime,\n    hasEmoji: emojiArray.length > 0,\n    focused: focused || emojiFocused,\n  });\n  const inputRef = React.useRef();\n\n  const onFocus = (event) => {\n    setFocused(true);\n    onFocusOuter(event);\n  };\n\n  const onBlur = (event) => {\n    setFocused(false);\n  };\n\n  const onEmojiFocused = (event) => {\n    onFocusOuter(event);\n    setEmojiFocused(true);\n  };\n  const onEmojiBlur = (event) => {\n    setEmojiFocused(false);\n  };\n\n  React.useEffect(() => {\n    if (!collapsed && props.autoFocus) {\n      inputRef.current.focus();\n    }\n  }, [collapsed, props.autoFocus]);\n\n  return (\n    <Collapse\n      in={!collapsed}\n      onExited={onCollapseExited}\n      onEntered={() => {\n        if (props.autoFocus) {\n          inputRef.current.focus();\n        }\n      }}\n    >\n      <div className={classes.outer}>\n        <div\n          className={classes.inner}\n          onClick={(event) => {\n            if (window.getSelection().toString().length === 0) {\n              inputRef.current.focus();\n            }\n          }}\n        >\n          {creationTime && (\n            <Typography variant=\"caption\" color=\"textSecondary\" align=\"center\">\n              {moment(creationTime).format(\"h:mm a\")}\n            </Typography>\n          )}\n\n          <InputBase\n            className={classes.input}\n            fullWidth\n            multiline\n            placeholder={!!props.hint ? props.hint.text : \"\"}\n            variant=\"outlined\"\n            inputRef={inputRef}\n            onFocus={onFocus}\n            onBlur={onBlur}\n            {...props}\n          />\n          <EmojiPicker\n            text={emojiText}\n            onEmojiArrayChange={onEmojiArrayChange}\n            emojiArray={emojiArray}\n            inputRef={inputRef}\n            onFocus={onEmojiFocused}\n            onBlur={onEmojiBlur}\n          ></EmojiPicker>\n          {props.hint != null &&\n            props.hint.isEnabled &&\n            props.value.length > 0 && (\n              <Popup in={focused}>\n                <Typography\n                  className={classes.hint}\n                  color=\"textSecondary\"\n                  padding={10}\n                >\n                  {props.hint.text}\n                </Typography>\n              </Popup>\n            )}\n        </div>\n\n        <Hidden xsDown={!deleteXsDown} smUp={!deleteSmUp}>\n          <IconButton\n            disabled={!!example}\n            aria-label=\"delete\"\n            size=\"small\"\n            onClick={onDelete}\n          >\n            <DeleteIcon\n              color={!!example ? \"disabled\" : \"action\"}\n              fontSize=\"small\"\n            ></DeleteIcon>\n          </IconButton>\n        </Hidden>\n      </div>\n    </Collapse>\n  );\n}\n\nexport const Entry = React.forwardRef(\n  (\n    {\n      onFocus: onFocusOuter,\n      onUpdate,\n      onRightChanged,\n      entry,\n      settings,\n      ...otherProps\n    },\n    ref\n  ) => {\n    const classes = useStyles();\n\n    const initiallyCollapsed = !!entry.text || entry.initiallyCollapsed;\n    const [collapsed, setCollapsed] = React.useState(initiallyCollapsed);\n    React.useEffect(() => {\n      if (initiallyCollapsed) {\n        setCollapsed(false);\n      }\n    }, [initiallyCollapsed]);\n\n    if (!!entry.text) {\n      return (\n        <tr ref={ref} className={classes.date}>\n          <td colSpan={2}>\n            <Collapse in={!collapsed}>\n              <Typography variant=\"body2\" align=\"center\" color=\"textSecondary\">\n                {entry.text}\n              </Typography>\n            </Collapse>\n          </td>\n        </tr>\n      );\n    }\n\n    console.assert(entry instanceof EntryModel);\n\n    React.useEffect(() => {\n      if (entry.initiallyCollapsed) {\n        onUpdate(entry.setInitiallyCollapsed(false), true);\n      }\n    }, [entry, onUpdate]);\n\n    React.useEffect(() => {\n      if (entry.data === EntryStatus.HIDDEN) onUpdate(entry.show(), true);\n    });\n\n    let emojiLeft = [];\n    let emojiRight = [];\n\n    if (settings != null) {\n      for (let i = 0; i < settings.emojiList.length; i++) {\n        emojiLeft.push({\n          value: entry.emojiArrays[0][i] == null ? 0 : entry.emojiArrays[0][i],\n          ...settings.emojiList[i],\n        });\n        emojiRight.push({\n          value: entry.emojiArrays[1][i] == null ? 0 : entry.emojiArrays[1][i],\n          ...settings.emojiList[i],\n        });\n      }\n    }\n\n    const onEntryChanged = (updatedEntry) => {\n      onUpdate(updatedEntry);\n    };\n\n    const onFocus = (event, alreadyFocused) => {\n      if (entry.focused) onUpdate(entry.setFocused(false), true);\n      if (!alreadyFocused && !!onFocusOuter) onFocusOuter(event);\n    };\n\n    return (\n      <tr ref={ref}>\n        <td key=\"issueElement\">\n          {entry.isDataLoaded() ? (\n            <SubItem\n              autoFocus={\n                entry.focused && entry.lastChange !== LastChange.EDIT_RIGHT\n              }\n              color=\"secondary\"\n              creationTime={entry.creationTime}\n              value={entry.left}\n              onChange={(event) =>\n                onEntryChanged(entry.setLeft(event.target.value))\n              }\n              onFocus={onFocus}\n              onDelete={() => {\n                setCollapsed(true);\n              }}\n              deleteXsDown\n              collapsed={collapsed}\n              hint={settings == null ? null : settings.leftHint}\n              emojiText=\"How do you feel now?\"\n              emojiArray={emojiLeft}\n              onEmojiArrayChange={(newLeftEmojiArray) =>\n                onEntryChanged(\n                  entry.setEmojiLeft(newLeftEmojiArray.map((x) => x.value))\n                )\n              }\n              {...otherProps}\n            ></SubItem>\n          ) : (\n            <Skeleton variant=\"rect\" height={135}></Skeleton>\n          )}\n        </td>\n\n        <td key=\"resolutionElement\">\n          {entry.isDataLoaded() ? (\n            <SubItem\n              autoFocus={\n                entry.focused && entry.lastChange === LastChange.EDIT_RIGHT\n              }\n              color=\"primary\"\n              variant=\"outlined\"\n              value={entry.right}\n              onChange={(event) =>\n                onEntryChanged(entry.setRight(event.target.value))\n              }\n              onFocus={onFocus}\n              deleteSmUp\n              onDelete={() => {\n                setCollapsed(true);\n              }}\n              collapsed={collapsed}\n              onCollapseExited={(event) => onUpdate(entry.delete())}\n              hint={settings == null ? null : settings.rightHint}\n              emojiText=\"How do you feel after writing resolution?\"\n              emojiArray={emojiRight}\n              onEmojiArrayChange={(newRightEmojiArray) =>\n                onEntryChanged(\n                  entry.setEmojiRight(newRightEmojiArray.map((x) => x.value))\n                )\n              }\n              {...otherProps}\n            />\n          ) : (\n            <Skeleton variant=\"rect\" height={135}></Skeleton>\n          )}\n        </td>\n      </tr>\n    );\n  }\n);\n","import React from \"react\";\n\nclass VirtualizedItem extends React.PureComponent {\n  ref = React.createRef();\n\n  #onHeightChanged = () => {\n    if (!!this.ref.current) {\n      this.props.onHeightChanged(\n        this.props.entry,\n        this.ref.current.offsetHeight\n      );\n    }\n  };\n\n  #resizeObserver = null;\n\n  componentDidMount() {\n    if (!!this.ref.current) {\n      this.#resizeObserver = new ResizeObserver(this.#onHeightChanged);\n      this.#resizeObserver.observe(this.ref.current);\n    }\n  }\n\n  componentWillUnmount() {\n    if (!!this.#resizeObserver) {\n      this.#resizeObserver.disconnect();\n      this.#resizeObserver = null;\n    }\n  }\n\n  render() {\n    const {\n      scrollableContainerRef,\n      ItemComponent,\n      onHeightChanged,\n      ...otherProps\n    } = this.props;\n\n    return <ItemComponent ref={this.ref} {...otherProps} />;\n  }\n}\n\nexport function VirtualizedList({\n  entries,\n  defaultHeight = 150,\n  scrollableContainerRef,\n  ItemComponent,\n  PlaceholderComponent,\n  ...props\n}) {\n  const [scrollY, setScrollY] = React.useState(0);\n  const [windowHeight, setWindowHeight] = React.useState(window.innerHeight);\n\n  const [realHeightsMap, setRealHeightsMap] = React.useState(new Map());\n  // Beware of maintainig VirtualizedItem pureness during refactoring.\n  // If one entry has changed it shouldn't lead to render() calls for other\n  // entries.\n  const onHeightChanged = React.useCallback((entry, height) => {\n    setRealHeightsMap((oldMap) => {\n      let newMap = new Map(oldMap);\n\n      newMap.set(entry.key, height);\n      return newMap;\n    });\n  }, []);\n\n  const keys = new Set(entries.map((x) => x.key));\n  const keysToDelete = [];\n  realHeightsMap.forEach((_value, key) => {\n    if (!keys.has(key)) {\n      keysToDelete.push(key);\n    }\n  });\n  if (keysToDelete.length > 0) {\n    setRealHeightsMap((oldMap) => {\n      let newMap = new Map(oldMap);\n      keysToDelete.forEach((key) => {\n        if (oldMap.has(key)) newMap.delete(key);\n      });\n      return newMap;\n    });\n  }\n\n  const onResizeOrScroll = () => {\n    if (!!scrollableContainerRef.current)\n      setScrollY(scrollableContainerRef.current.scrollTop);\n    setWindowHeight(window.innerHeight);\n  };\n\n  React.useEffect(() => {\n    if (!!scrollableContainerRef.current)\n      scrollableContainerRef.current.onscroll = onResizeOrScroll;\n    window.addEventListener(\"resize\", onResizeOrScroll);\n    return () => {\n      window.removeEventListener(\"resize\", onResizeOrScroll);\n    };\n  });\n\n  let visibleEntries = [];\n  let currentHeight = 0;\n  let placeholderTop = 0;\n  let placeholderBottom = 0;\n\n  for (let entry of entries) {\n    let entryHeight = defaultHeight;\n    if (realHeightsMap.has(entry.key)) {\n      entryHeight = realHeightsMap.get(entry.key);\n    }\n\n    if (\n      !props.example &&\n      currentHeight + entryHeight < scrollY - window.innerHeight\n    ) {\n      if (entry.focused && !!scrollableContainerRef.current) {\n        scrollableContainerRef.current.scrollTop = currentHeight;\n      }\n\n      placeholderTop += entryHeight;\n    } else if (!!props.example || currentHeight < scrollY + 2 * windowHeight) {\n      visibleEntries.push(\n        <VirtualizedItem\n          key={entry.key}\n          onHeightChanged={onHeightChanged}\n          entry={entry}\n          ItemComponent={ItemComponent}\n          scrollableContainerRef={scrollableContainerRef}\n          {...props}\n        />\n      );\n    } else {\n      if (entry.focused && !!scrollableContainerRef.current) {\n        scrollableContainerRef.current.scrollTop = currentHeight;\n      }\n\n      placeholderBottom += entryHeight;\n    }\n    currentHeight += entryHeight;\n  }\n  if (placeholderTop !== 0) {\n    visibleEntries.unshift(\n      <PlaceholderComponent height={placeholderTop} key=\"placeholderTop\" />\n    );\n  }\n\n  if (placeholderBottom !== 0) {\n    visibleEntries.push(\n      <PlaceholderComponent\n        height={placeholderBottom}\n        key=\"placeholderBottom\"\n      />\n    );\n  }\n\n  return visibleEntries;\n}\n","import React from \"react\";\nimport { Entry } from \"./Entry.js\";\nimport ColumnResizer from \"column-resizer\";\nimport _ from \"lodash\";\nimport moment from \"moment\";\n\nimport { withStyles, Button, IconButton, Grid } from \"@material-ui/core\";\n\nimport { VirtualizedList } from \"./VirtualizedList\";\n\nimport KeyboardEventHandler from \"react-keyboard-event-handler\";\nimport { ArrowDropDown as ArrowIcon } from \"@material-ui/icons\";\n\nconst styles = (theme) => ({\n  scrollableContainer: {\n    overflow: (props) => (props.example ? \"hide\" : \"auto\"),\n    flex: 1,\n    willChange: \"transform\",\n  },\n  grip: {\n    \"&:hover\": {\n      backgroundColor: \"#00F8\",\n      transitionDuration: \"0s\",\n    },\n    width: 8,\n    zIndex: 10,\n    position: \"absolute\",\n    height: \"100%\",\n    backgroundColor: \"#0000\",\n    cursor: \"col-resize\",\n    transitionProperty: \"background-color\",\n    transitionDuration: \"1s\",\n  },\n  entriesTable: {\n    width: \"100%\",\n    borderSpacing: 0,\n    \"& td\": {\n      padding: 2,\n      verticalAlign: \"top\",\n      borderLeft: \"5px solid #0000\",\n      // ColumnResizer sets it to \"hidden\". This cuts emoji popups.\n      overflow: \"inherit !important\",\n    },\n    \"& td:nth-child(odd)\": {\n      borderRight: \"5px solid #0000\",\n      borderLeft: \"20px solid #0000\",\n    },\n\n    [theme.breakpoints.down(\"xs\")]: {\n      \"& thead\": {\n        display: \"none\",\n      },\n\n      \"& tbody tr\": {\n        display: \"grid\",\n        padding: 5,\n        marginBottom: 5,\n        borderRadius: 4,\n        border: \"1px solid\",\n        borderColor: theme.palette.text.secondary,\n      },\n\n      \"& td:nth-child(odd)\": {\n        borderRight: 0,\n        borderLeft: 0,\n      },\n\n      \"& tbody td\": {\n        display: \"block\",\n        borderLeft: 0,\n      },\n    },\n  },\n\n  buttonsContainer: {\n    backgroundColor: theme.palette.background.paper,\n    borderBottom: \"1px solid lightGray\",\n  },\n\n  buttons: {\n    display: \"flex\",\n    justifyContent: \"center\",\n  },\n});\n\nfunction Placeholder({ height, ...rest }) {\n  return (\n    <tr {...rest}>\n      <td colSpan=\"2\">\n        <div style={{ height }} />\n      </td>\n    </tr>\n  );\n}\n\nclass EntriesTableRaw extends React.PureComponent {\n  state = {\n    entries: [],\n  };\n\n  _onEntriesChanged = (entries, settings, { canRedo, canUndo }) => {\n    if (entries.length > 0) {\n      function DateEntry(date) {\n        this.key = this.text = moment(date).calendar({\n          sameDay: \"[Today], MMM Do, ddd\",\n          lastDay: \"[Yesterday] , MMM Do, ddd\",\n          lastWeek: \"MMM Do YYYY, ddd\",\n          sameElse: \"MMM Do YYYY, ddd\",\n        });\n      }\n      entries = [...entries];\n      let dateToInsert = entries[entries.length - 1].creationTime;\n      for (let i = entries.length - 2; i >= 0; i--) {\n        let currentCreationTime = entries[i].creationTime;\n\n        if (dateToInsert == null) {\n          dateToInsert = currentCreationTime;\n          continue;\n        }\n\n        if (\n          !this.props.example &&\n          (currentCreationTime == null ||\n            currentCreationTime.getTime() < dateToInsert.getTime())\n        ) {\n          continue;\n        }\n\n        if (\n          currentCreationTime != null &&\n          currentCreationTime.getYear() === dateToInsert.getYear() &&\n          currentCreationTime.getMonth() === dateToInsert.getMonth() &&\n          currentCreationTime.getDay() === dateToInsert.getDay()\n        ) {\n          continue;\n        }\n\n        entries.splice(i + 1, 0, new DateEntry(dateToInsert));\n        dateToInsert = currentCreationTime;\n      }\n\n      if (dateToInsert != null) {\n        entries.splice(0, 0, new DateEntry(dateToInsert));\n      }\n    }\n\n    this.setState({ entries, settings, canRedo, canUndo });\n  };\n\n  _scrollBy = (top) => {\n    requestAnimationFrame(() => {\n      if (this._scrollableContainerRef.current == null) return;\n      const timeSinceLastScroll = Date.now() - this._lastScrollTime;\n      this._lastScrollTime = Date.now();\n\n      this._scrollableContainerRef.current.scrollBy({\n        top,\n        behavior: timeSinceLastScroll > 300 ? \"smooth\" : \"auto\",\n      });\n    });\n  };\n\n  _onKeyPress = (key, e) => {\n    if (key === \"ctrl+z\" || key === \"cmd+z\") {\n      this.props.model.undo();\n      e.preventDefault();\n    } else if (key === \"ctrl+y\" || key === \"cmd+y\") {\n      this.props.model.redo();\n      e.preventDefault();\n    } else if (key === \"ctrl+enter\" || key === \"cmd+enter\") {\n      this.props.model.addNewItemThrottled();\n      e.preventDefault();\n    } else {\n      // When focused item goes out of |VirtualizedList| browsers reset active element to\n      // |docuent.body| and keypresses \"pageup/pagedown/up/down\" stop scrolling\n      // |scrollableContainer|.\n      // The code below is a workaround for that.\n      if (e.target.tabIndex === 0) return;\n      if (key === \"pageup\") {\n        this._scrollBy(-window.innerHeight * 0.8);\n        e.preventDefault();\n      } else if (key === \"pagedown\") {\n        this._scrollBy(window.innerHeight * 0.8);\n        e.preventDefault();\n      } else if (key === \"down\") {\n        this._scrollBy(100);\n        e.preventDefault();\n      } else if (key === \"up\") {\n        this._scrollBy(-100);\n        e.preventDefault();\n      }\n    }\n  };\n\n  _tableRef = React.createRef();\n  _scrollableContainerRef = React.createRef();\n  _columnResizer = null;\n  _resizeObserver = null;\n  _lastScrollTime = Date.now();\n\n  componentDidMount() {\n    this.props.model.subscribe(this._onEntriesChanged);\n\n    if (!!this.props.example) return;\n\n    this._columnResizer = new ColumnResizer(this._tableRef.current, {\n      liveDrag: true,\n      minWidth: 100,\n      gripInnerHtml: `<div class='${this.props.classes.grip}'></div>`,\n      onResize: (e) => {\n        // TextArea adjusts its height only when the browser window\n        // resizes. It ignores resize of its parent.\n        // This logic is encapsulated badly, you cannot change\n        // it without modifying library sources.\n        //\n        // So, the esiest way of forcing TextArea height adjustment is\n        // to dispatch a window resize event hoping that it\n        // won't break anything.\n        window.dispatchEvent(new Event(\"resize\"));\n      },\n    });\n\n    // this._columnResizer doesn't observe resizes of the table.\n    // It listens for browser window \"resize\" events instead.\n    // This doesn't play well when table content asynchronously adjusts\n    // its height listening for the same \"resize\" event.\n    window.removeEventListener(\"resize\", this._columnResizer.onResize);\n    this._resizeObserver = new ResizeObserver(\n      _.throttle(() => {\n        this._columnResizer.onResize();\n      }, 200)\n    );\n    this._resizeObserver.observe(this._tableRef.current);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.model !== prevProps.model) {\n      prevProps.model.unsubscribe(this._onEntriesChanged);\n      this.props.model.subscribe(this._onEntriesChanged);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.model.unsubscribe(this._onEntriesChanged);\n\n    if (!!this.props.example) return;\n\n    this._columnResizer.destroy();\n    this._resizeObserver.unobserve(this._tableRef.current);\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <KeyboardEventHandler\n          handleFocusableElements\n          handleKeys={[\n            \"ctrl+z\",\n            \"cmd+z\",\n            \"ctrl+y\",\n            \"cmd+y\",\n            \"ctrl+enter\",\n            \"cmd+enter\",\n            \"up\",\n            \"down\",\n            \"pagedown\",\n            \"pageup\",\n          ]}\n          onKeyEvent={this._onKeyPress}\n        />\n        {!this.props.example && (\n          <Grid\n            className={this.props.classes.buttonsContainer}\n            container\n            justify=\"space-between\"\n            spacing={0}\n          >\n            <Grid item xs={1} sm={2}>\n              {!this.props.appBarShown && (\n                <IconButton size=\"small\" onClick={this.props.onShowAppBar}>\n                  <ArrowIcon color=\"primary\" />\n                </IconButton>\n              )}\n            </Grid>\n            <Grid className={this.props.classes.buttons} item xs={6} sm={3}>\n              <Button\n                size=\"small\"\n                onClick={() => {\n                  this.props.model.addNewItemThrottled();\n                }}\n              >\n                Add new item\n              </Button>\n            </Grid>\n            <Grid className={this.props.classes.buttons} item xs={5} sm={2}>\n              <Button\n                fullWidth\n                size=\"small\"\n                fontSize=\"small\"\n                onClick={this.props.model.undo}\n                disabled={!this.state.canUndo}\n              >\n                Undo\n              </Button>\n              <Button\n                fullWidth\n                size=\"small\"\n                fontSize=\"small\"\n                disabled={!this.state.canRedo}\n                onClick={this.props.model.redo}\n              >\n                Redo\n              </Button>\n            </Grid>\n          </Grid>\n        )}\n\n        <div\n          ref={this._scrollableContainerRef}\n          className={this.props.classes.scrollableContainer}\n        >\n          <table\n            cellPadding={0}\n            cellSpacing={0}\n            className={this.props.classes.entriesTable}\n            ref={this._tableRef}\n          >\n            {/* ColumnResizer doesn't work without thead */}\n            <thead>\n              <tr>\n                <th></th>\n                <th></th>\n              </tr>\n            </thead>\n\n            <tbody>\n              <VirtualizedList\n                entries={this.state.entries}\n                ItemComponent={Entry}\n                PlaceholderComponent={Placeholder}\n                scrollableContainerRef={this._scrollableContainerRef}\n                // Additional props for Entry\n                onUpdate={this.props.model.onUpdate}\n                onFocus={this.props.onFocus}\n                settings={this.state.settings}\n                example={this.props.example}\n              />\n            </tbody>\n          </table>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\nexport default withStyles(styles)(EntriesTableRaw);\n"],"sourceRoot":""}
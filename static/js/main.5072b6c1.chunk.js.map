{"version":3,"sources":["GDriveAuthClient.js","googleIcon.js","GoogleSignInButton.js","HelpWindow.js","SettingsWindow.js","AppMenu.js","EmojiPicker.js","Entry.js","VirtualizedList.js","EntriesTable.js","Interface.js","BackendMap.js","EntriesTableModel.js","GDriveMap.js","BackendQuotaSavers.js","AppContent.js","App.js","serviceWorker.js","index.js"],"names":["GDriveStates","LOADING","SIGNED_IN","SIGNED_OUT","FAILED","Object","freeze","gdriveAuthClient","Set","ondone","console","assert","length","script","document","createElement","async","src","body","appendChild","onload","onerror","loadGapi","a","window","gapi","Error","Promise","resolve","load","client","init","clientId","discoveryDocs","scope","isGapiLoaded","_updateSignInState","auth2","getAuthInstance","isSignedIn","listen","bind","log","_notifyStateChanged","listener","this","has","add","delete","addStateListener","state","removeStateListener","mocha","signIn","prompt","signOut","current_state","get","seal","active","style","display","padding","width","height","xmlns","fill","fillRule","d","ButtonContent","children","paddingLeft","fontWeight","buttonStyle","backgroundColor","alignItems","color","boxShadow","borderRadius","border","fontSize","fontFamily","cursor","disabledStyle","opacity","GoogleSignInButton","authState","props","prevAuthState","buttonAnchor","setState","prevState","assign","alertElement","Alert","severity","AlertTitle","href","ref","onClick","type","key","Popper","zIndex","open","anchorEl","placement","disablePortal","modifiers","flip","enabled","preventOverflow","hide","offset","React","PureComponent","useStyles","makeStyles","theme","root","position","top","left","palette","background","paper","HelpWindow","forwardRef","styles","className","SettingsWindow","placeholder","flex","showAppBarButton","transform","ButtonController","useState","setOpen","Fragment","IconButton","Modal","onClose","AppMenu","classes","Collapse","appear","in","shown","Toolbar","onShow","Slide","direction","AppBar","edge","Settings","Hidden","xsDown","Typography","variant","align","Help","container","alignSelf","margin","borderColor","focused","popup","flexDirection","justifyContent","setupItem","isActive","icon","emoji","value","EmojiItem","role","aria-label","text","String","fromCodePoint","RadioIcon","checked","SvgIcon","viewBox","y","EmojiSetupItem","onChange","EmojiPicker","setFocus","selectedRow","setSelectedRow","popupRef","useRef","emojiArray","activeEmojiArray","filter","x","rowCounter","tabIndex","onFocus","onBlur","current","contains","activeElement","onKeyDown","event","clone","onEmojiArrayChange","inputRef","focus","preventDefault","map","codePoint","Zoom","EntryStatus","EntryModel","data","emojiArrays","creationTime","_data","_key","_emojiArrays","_creationTime","isDataLoaded","every","right","error","description","setDescription","_generateDescription","split","serializedEmoji","serializedCreationTime","all","Array","from","Number","half_length","Math","ceil","slice","Date","isNaN","getTime","descrciption","join","inner","input","outer","date","SubItem","emojiText","onDelete","isFirst","moment","format","InputBase","fullWidth","multiline","size","Entry","onUpdate","entry","onRightChanged","settings","otherProps","dateString","calendar","sameDay","lastDay","lastWeek","sameElse","colSpan","useEffect","show","emojiLeft","emojiRight","i","emojiList","push","onEntryChanged","updatedEntry","setCreationTime","now","setLeft","target","newLeftEmojiArray","setEmojiArrays","Skeleton","setRight","newRightEmojiArray","VirtualizedItem","createRef","onHeightChanged","offsetHeight","ResizeObserver","observe","scrollableContainerRef","disconnect","ItemComponent","VirtualizedList","entries","defaultHeight","PlaceholderComponent","restProps","scrollY","setScrollY","innerHeight","windowHeight","setWindowHeight","WeakMap","realHeightsMap","useCallback","set","onResizeOrScroll","scrollTop","onscroll","addEventListener","removeEventListener","visibleEntries","currentHeight","placeholderTop","placeholderBottom","isFirstEntry","entryHeight","unshift","Placeholder","rest","EntriesTableRaw","_onEntriesChanged","dateToInsert","currentCreationTime","getYear","getMonth","getDay","splice","_tableRef","_scrollableContainerRef","_columnResizer","_resizeObserver","model","subscribe","ColumnResizer","liveDrag","minWidth","gripInnerHtml","grip","onResize","e","dispatchEvent","Event","_","throttle","prevProps","unsubscribe","destroy","unobserve","cellPadding","cellSpacing","entriesTable","EntriesTable","withStyles","overflow","willChange","marginLeft","borderSpacing","borderBottom","verticalAlign","borderLeft","borderRight","breakpoints","down","Interface","name","args","setTimeout","BackendMap","requireFunction","EntriesTableModelImpl","backendMap","authClient","sync","_disposed","_authClient","waitForStateChange","_backendMap","getAllKeys","keys","newEntries","Map","forEach","_entries","id","outdated","_descriptions","promises","reverse","_fetch","prevEntry","_sendEntryToBackend","_addHistoryItem","_historyIndex","_history","_subscriptions","_onKeyPress","ctrlKey","keyCode","undo","redo","content","undefined","JSON","parse","message","filteredEntriesArray","_getFilteredEntriesArray","_notifySubscribers","isVacant","createKey","newKey","newEntry","callback","old","new","descriptionPromise","stringify","reverseEntriesArray","values","lastVacantIndex","filteredEntries","clear","gdriveMap","find","createEmptyFile","firstKey","deleteFile","throwIfNotSignedIn","upload","download","result","getMd5","element","_getSettingsKey","settingsContent","patchDescription","prom","gapiCall","argObj","stack","reject","then","resp","status","err","mimeType","drive","files","create","resource","parents","fields","fileId","boundary","multipartRequestBody","delimiter","request","path","method","params","uploadType","headers","md5Checksum","alt","query","ret","list","spaces","pageSize","pageToken","token","orderBy","q","concat","nextPageToken","BackendMultiplexor","innerMap","_changeKeysMutex","Mutex","_innerKeys","_innerBackendMap","_createChunkConnector","innerkey","setValue","serializedValue","serializedDescription","getValue","indexOf","_chunks","_Chunk","connector","serializedDescriptions","_onValueSet","debounce","_serializedValues","_values","_connector","_onDescriptionSet","_serializedDescriptions","_fetchValuesSynchronised","_fetchPromise","_fetchValues","serializedValues","isArray","_initialMd5Checksum","md5","_isDirty","_shouldKeepOnFormatError","subkeys","isFull","subkey","_splitOuterKey","outerKey","separator","prefixKey","substring","innerKey","acquire","release","getLastInnerKey","newInnerKey","createSubKey","keyPrefix","newInnerKeys","outerKeys","newChunks","counter","isFirstChunk","chunk","onMetadataUpdate","listSubKeys","getDescription","getSettings","setSettings","ErrorHandler","retriesCount","secondsToNextRetry","_sleep","_exponentialRetry","ms","GetThrottler","_pendingGetRequests","_handlePendingRequests","handleSingleRequest","next","CenteredTypography","AppContent","signInState","setSignInState","setModel","newState","dispose","App","prefersDarkMode","useMediaQuery","useMemo","createMuiTheme","appBarShown","setAppBarShown","onTableEntryFocus","arg","showAppBar","ThemeProvider","CssBaseline","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.5072b6c1.chunk.js","sourcesContent":["// PUBLIC SECTION\nexport const GDriveStates = {\n  LOADING: \"loading\",\n  SIGNED_IN: \"signed_in\",\n  SIGNED_OUT: \"signed_out\",\n  FAILED: \"failed\",\n};\nObject.freeze(GDriveStates);\n\nclass GDriveAuthClient {\n  #state = GDriveStates.LOADING;\n  #stateListeners = new Set();\n\n  get state() {\n    return this.#state;\n  }\n\n  addStateListener(listener) {\n    console.assert(typeof listener == \"function\");\n    console.assert(listener.length === 1);\n    console.assert(!this.#stateListeners.has(listener));\n\n    this.#stateListeners.add(listener);\n  }\n\n  removeStateListener(listener) {\n    console.assert(typeof listener == \"function\");\n    console.assert(listener.length === 1);\n    console.assert(this.#stateListeners.has(listener));\n    this.#stateListeners.delete(listener);\n  }\n\n  async waitForStateChange() {\n    return await new Promise((resolve) => {\n      let listener = (state) => {\n        this.removeStateListener(listener);\n        resolve(state);\n      };\n      this.addStateListener(listener);\n    });\n  }\n\n  constructor() {\n    loadGapi(async () => {\n      try {\n        if (!window.gapi) {\n          throw new Error(\"Failed loading GAPI\");\n        }\n\n        await new Promise((resolve) =>\n          window.gapi.load(\"client:auth2\", resolve)\n        );\n\n        await window.gapi.client.init({\n          clientId:\n            \"479709565206-4ek8a502261s9sussiehpa5v146ns2ku.apps.googleusercontent.com\",\n          discoveryDocs: [\n            \"https://www.googleapis.com/discovery/v1/apis/drive/v3/rest\",\n          ],\n          scope: \"https://www.googleapis.com/auth/drive.appfolder\",\n        });\n\n        if (!isGapiLoaded()) {\n          throw new Error(\"Failed registering client_id.\");\n        }\n\n        this._updateSignInState();\n\n        window.gapi.auth2\n          .getAuthInstance()\n          .isSignedIn.listen(this._updateSignInState.bind(this));\n      } catch (error) {\n        console.log(error);\n        this.#state = GDriveStates.FAILED;\n        this._notifyStateChanged();\n        return;\n      }\n    });\n  }\n\n  signIn() {\n    console.assert(isGapiLoaded());\n    if (!!window.mocha) {\n      window.gapi.auth2.getAuthInstance().signIn();\n    } else {\n      window.gapi.auth2.getAuthInstance().signIn({\n        prompt: \"select_account\",\n      });\n    }\n  }\n\n  signOut() {\n    console.assert(isGapiLoaded());\n    let auth_instance = window.gapi.auth2.getAuthInstance();\n    auth_instance.signOut();\n  }\n\n  _notifyStateChanged() {\n    for (let listener of this.#stateListeners) {\n      listener(this.#state);\n    }\n  }\n\n  _updateSignInState() {\n    console.assert(this.#state !== GDriveStates.FAILED);\n    let current_state = isSignedIn()\n      ? GDriveStates.SIGNED_IN\n      : GDriveStates.SIGNED_OUT;\n    if (this.#state !== current_state) {\n      this.#state = current_state;\n      this._notifyStateChanged();\n    }\n  }\n}\n\nexport const gdriveAuthClient = new GDriveAuthClient();\nObject.seal(gdriveAuthClient);\n\n// PRIVATE SECTION\nfunction loadGapi(ondone) {\n  console.assert(typeof ondone == \"function\");\n  console.assert(ondone.length === 0);\n  var script = document.createElement(\"script\");\n  script.async = true;\n  script.src = \"https://apis.google.com/js/api.js\";\n  document.body.appendChild(script);\n  script.onload = ondone;\n  script.onerror = ondone;\n}\n\nfunction isGapiLoaded() {\n  return window.gapi && window.gapi.auth2 && window.gapi.client;\n}\n\nfunction isSignedIn() {\n  console.assert(isGapiLoaded());\n  return window.gapi.auth2.getAuthInstance().isSignedIn.get();\n}\n","import React from \"react\";\n\nexport default ({ active }) => (\n  <div\n    style={{\n      display: \"flex\",\n      padding: 10,\n    }}\n  >\n    <svg width=\"18\" height=\"18\" xmlns=\"http://www.w3.org/2000/svg\">\n      <g fill=\"#000\" fillRule=\"evenodd\">\n        <path\n          d=\"M9 3.48c1.69 0 2.83.73 3.48 1.34l2.54-2.48C13.46.89 11.43 0 9 0 5.48 0 2.44 2.02.96 4.96l2.91 2.26C4.6 5.05 6.62 3.48 9 3.48z\"\n          fill=\"#EA4335\"\n        />\n        <path\n          d=\"M17.64 9.2c0-.74-.06-1.28-.19-1.84H9v3.34h4.96c-.1.83-.64 2.08-1.84 2.92l2.84 2.2c1.7-1.57 2.68-3.88 2.68-6.62z\"\n          fill=\"#4285F4\"\n        />\n        <path\n          d=\"M3.88 10.78A5.54 5.54 0 0 1 3.58 9c0-.62.11-1.22.29-1.78L.96 4.96A9.008 9.008 0 0 0 0 9c0 1.45.35 2.82.96 4.04l2.92-2.26z\"\n          fill=\"#FBBC05\"\n        />\n        <path\n          d=\"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.84-2.2c-.76.53-1.78.9-3.12.9-2.38 0-4.4-1.57-5.12-3.74L.97 13.04C2.45 15.98 5.48 18 9 18z\"\n          fill=\"#34A853\"\n        />\n        <path fill=\"none\" d=\"M0 0h18v18H0z\" />\n      </g>\n    </svg>\n  </div>\n);\n","import React from \"react\";\nimport Icon from \"./googleIcon\";\nimport { GDriveStates } from \"./GDriveAuthClient.js\";\nimport Popper from \"@material-ui/core/Popper\";\nimport { Alert, AlertTitle } from \"@material-ui/lab\";\n\nconst ButtonContent = ({ children }) => (\n  <span\n    style={{\n      padding: 10,\n      paddingLeft: 0,\n      fontWeight: 500,\n    }}\n  >\n    {children}\n  </span>\n);\n\nlet buttonStyle = {\n  backgroundColor: \"#fff\",\n  display: \"inline-flex\",\n  alignItems: \"center\",\n  color: \"rgba(0, 0, 0, .54)\",\n  boxShadow: \"0 2px 2px 0 rgba(0, 0, 0, .24), 0 0 1px 0 rgba(0, 0, 0, .24)\",\n  padding: 0,\n  borderRadius: 2,\n  border: \"1px solid transparent\",\n  fontSize: 14,\n  fontWeight: \"500\",\n  fontFamily: \"Roboto, sans-serif\",\n  cursor: \"pointer\",\n};\n\nlet disabledStyle = {\n  opacity: 0.6,\n};\n\nexport class GoogleSignInButton extends React.PureComponent {\n  state = {\n    authState: this.props.gdriveAuthClient.state,\n    prevAuthState: this.props.gdriveAuthClient.LOADING,\n    buttonAnchor: null,\n  };\n\n  componentDidMount() {\n    if (this.state.authState !== this.props.gdriveAuthClient.state) {\n      this.#setAuthState(this.props.gdriveAuthClient.state);\n    }\n    this.props.gdriveAuthClient.addStateListener(this.#setAuthState);\n  }\n  componentWillUnmount() {\n    this.props.gdriveAuthClient.removeStateListener(this.#setAuthState);\n  }\n\n  #setAuthState = (authState) => {\n    this.setState((prevState) => {\n      return { ...prevState, prevAuthState: prevState.authState, authState };\n    });\n  };\n\n  #setButtonAnchor = (buttonAnchor) => {\n    this.setState((prevState) => {\n      return { ...prevState, buttonAnchor };\n    });\n  };\n\n  #getButtonStyle = () => {\n    if (\n      this.state.authState === GDriveStates.FAILED ||\n      this.state.authState === GDriveStates.LOADING\n    ) {\n      return Object.assign({}, buttonStyle, disabledStyle);\n    }\n\n    return buttonStyle;\n  };\n\n  #onClick = async () => {\n    if (this.state.authState === GDriveStates.SIGNED_IN) {\n      this.props.gdriveAuthClient.signOut();\n    } else if (this.state.authState === GDriveStates.SIGNED_OUT) {\n      this.props.gdriveAuthClient.signIn();\n    }\n  };\n\n  render() {\n    let alertElement = (() => {\n      if (this.state.authState === GDriveStates.FAILED) {\n        return (\n          <Alert severity=\"error\">\n            Failed connecting to google. Check your connection and try reloading\n            the page.\n          </Alert>\n        );\n      }\n\n      if (this.state.authState === GDriveStates.SIGNED_OUT) {\n        if (this.state.prevAuthState === GDriveStates.SIGNED_IN) {\n          return (\n            <Alert severity=\"warning\">\n              <AlertTitle>Privacy note!</AlertTitle>\n              If other people have access to this browser <br />\n              AND you don't want them to read your sheets: <br />\n              <ol>\n                <li>\n                  sign out globally: <br />\n                  <a href=\"https://accounts.google.com/Logout\">\n                    https://accounts.google.com/Logout\n                  </a>\n                </li>\n                <li>delete Google account password from the browser</li>\n              </ol>\n            </Alert>\n          );\n        } else if (this.state.prevAuthState === GDriveStates.LOADING) {\n          return (\n            <Alert severity=\"info\">\n              This site stores data in a hidden Google Drive folder. <br />\n              Sign in to proceed.\n              <br />\n            </Alert>\n          );\n        }\n      }\n    })();\n\n    return (\n      <button\n        ref={(ref) => this.#setButtonAnchor(ref)}\n        onClick={this.#onClick}\n        style={this.#getButtonStyle()}\n        type=\"button\"\n      >\n        <Icon key={0} active={this.state.active} />\n        <ButtonContent key={2}>\n          {this.state.authState === GDriveStates.SIGNED_IN\n            ? \"Sign Out\"\n            : \"Sign in with Google\"}\n        </ButtonContent>\n\n        {!!alertElement && !!this.state.buttonAnchor && (\n          <Popper\n            key={1}\n            style={{ zIndex: 1200 }}\n            open={true}\n            anchorEl={this.state.buttonAnchor}\n            placement=\"bottom-end\"\n            disablePortal={false}\n            modifiers={{\n              flip: {\n                enabled: false,\n              },\n              preventOverflow: {\n                enabled: false,\n              },\n              hide: {\n                enabled: false,\n              },\n              offset: {\n                offset: \"0,5\",\n              },\n            }}\n          >\n            {alertElement}\n          </Popper>\n        )}\n      </button>\n    );\n  }\n}\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nlet useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"absolute\",\r\n    top: \"5%\",\r\n    left: \"5%\",\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    zIndex: 1,\r\n  },\r\n}));\r\n\r\nexport const HelpWindow = React.forwardRef((props, ref) => {\r\n  let styles = useStyles();\r\n\r\n  return (\r\n    <article className={styles.root} {...props} ref={ref}>\r\n      <h1>User Guide</h1>\r\n    </article>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\n\r\nlet useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    position: \"absolute\",\r\n    top: \"5%\",\r\n    left: \"5%\",\r\n    width: \"90%\",\r\n    height: \"90%\",\r\n    backgroundColor: theme.palette.background.paper,\r\n    zIndex: 1,\r\n  },\r\n}));\r\n\r\nexport const SettingsWindow = React.forwardRef((props, ref) => {\r\n  let styles = useStyles();\r\n\r\n  return (\r\n    <article className={styles.root} {...props} ref={ref}>\r\n      <h1>User Guide</h1>\r\n    </article>\r\n  );\r\n});\r\n","import React from \"react\";\r\n\r\nimport { gdriveAuthClient } from \"./GDriveAuthClient.js\";\r\nimport { GoogleSignInButton } from \"./GoogleSignInButton.js\";\r\nimport { HelpWindow } from \"./HelpWindow.js\";\r\nimport { SettingsWindow } from \"./SettingsWindow.js\";\r\n\r\nimport {\r\n  Settings as SettingsIcon,\r\n  ArrowDropDown as ArrowIcon,\r\n  Help as HelpIcon,\r\n} from \"@material-ui/icons\";\r\n\r\nimport {\r\n  AppBar,\r\n  Collapse,\r\n  Hidden,\r\n  IconButton,\r\n  Modal,\r\n  Slide,\r\n  makeStyles,\r\n  Toolbar,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  placeholder: {\r\n    flex: 1,\r\n  },\r\n  showAppBarButton: {\r\n    position: \"fixed\",\r\n    top: 0,\r\n    left: \"50%\",\r\n    transform: \"translate(-50%, -30%)\",\r\n    zIndex: 2000,\r\n  },\r\n});\r\n\r\nfunction ButtonController(props) {\r\n  const [open, setOpen] = React.useState(false);\r\n  const onButtonClick = () => {\r\n    setOpen(true);\r\n  };\r\n  const onWindowClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <IconButton {...props} onClick={onButtonClick}>\r\n        {props.children[0]}\r\n      </IconButton>\r\n      <Modal open={open} onClose={onWindowClose}>\r\n        {props.children[1]}\r\n      </Modal>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport function AppMenu(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Collapse appear={false} in={props.shown}>\r\n        <Toolbar />\r\n      </Collapse>\r\n      {!props.shown && (\r\n        <IconButton className={classes.showAppBarButton} onClick={props.onShow}>\r\n          <ArrowIcon color=\"primary\" fontSize=\"large\" />\r\n        </IconButton>\r\n      )}\r\n      <Slide appear={false} direction=\"down\" in={props.shown}>\r\n        <AppBar>\r\n          <Toolbar>\r\n            <ButtonController edge=\"start\">\r\n              <SettingsIcon />\r\n              <SettingsWindow />\r\n            </ButtonController>\r\n            <Hidden xsDown>\r\n              <Typography>Settings</Typography>\r\n            </Hidden>\r\n\r\n            <Typography\r\n              className={classes.placeholder}\r\n              variant=\"body2\"\r\n              align=\"center\"\r\n            >\r\n              Self help sheets\r\n              <Hidden xsDown>\r\n                <br />\r\n                Document your inner dialog\r\n              </Hidden>\r\n            </Typography>\r\n\r\n            <ButtonController>\r\n              <HelpIcon />\r\n              <HelpWindow></HelpWindow>\r\n            </ButtonController>\r\n\r\n            <GoogleSignInButton\r\n              gdriveAuthClient={gdriveAuthClient}\r\n            ></GoogleSignInButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n      </Slide>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import React from \"react\";\nimport { Typography, Zoom, makeStyles, SvgIcon } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  container: {\n    alignSelf: \"center\",\n    margin: 2,\n    cursor: \"pointer\",\n    borderColor: (focused) => (focused ? \"gray\" : \"#0000\"),\n    border: \"solid 2px\",\n    borderRadius: 4,\n    position: \"relative\",\n  },\n  popup: {\n    position: \"absolute\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    left: -17,\n    top: \"1.5em\",\n    zIndex: 2,\n    background: theme.palette.background.paper,\n    border: \"gray solid 2px\",\n    borderRadius: 4,\n  },\n\n  setupItem: {\n    border: \"2px solid\",\n    borderColor: (isActive) => (isActive ? \"darkgray\" : \"#0000\"),\n    borderRadius: 4,\n    fontSize: 24,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  icon: {\n    cursor: \"pointer\",\n    width: 15,\n    margin: 0,\n    padding: \"4px 1px\",\n    height: \"40px\",\n    border: \"1px solid #0000\",\n\n    \"&:hover\": { borderColor: \"lightgray\" },\n  },\n\n  emoji: {\n    opacity: (value) => (value === 3 ? 1 : value === 2 ? 0.7 : 0.3),\n  },\n}));\n\nfunction EmojiItem(props) {\n  const classes = useStyles(props.value);\n  return (\n    <span className={classes.emoji} role=\"img\" aria-label={props.text}>\n      {String.fromCodePoint(props.emoji)}\n    </span>\n  );\n}\n\nfunction RadioIcon({ checked, value, ...props }) {\n  const classes = useStyles();\n\n  let height = 5 * (3 - value) + 1;\n  return (\n    <SvgIcon className={classes.icon} viewBox=\"1 1 7 15\" {...props}>\n      <rect\n        width=\"9\"\n        height={height}\n        fill={checked ? \"lightgreen\" : \"lightgray\"}\n      />\n      <rect\n        y={height}\n        width=\"9\"\n        height={16 - height}\n        fill={checked ? \"red\" : \"gray\"}\n      />\n    </SvgIcon>\n  );\n}\n\nfunction EmojiSetupItem({ value, isActive, ...props }) {\n  const classes = useStyles(isActive);\n  return (\n    <div className={classes.setupItem}>\n      <EmojiItem {...props} value={3} />\n\n      <RadioIcon\n        onClick={() => props.onChange(0)}\n        checked={value === 0}\n        value={0}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(1)}\n        checked={value === 1}\n        value={1}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(2)}\n        checked={value === 2}\n        value={2}\n      />\n      <RadioIcon\n        onClick={() => props.onChange(3)}\n        checked={value === 3}\n        value={3}\n      />\n    </div>\n  );\n}\n\nexport function EmojiPicker(props) {\n  const [focused, setFocus] = React.useState(false);\n  let [selectedRow, setSelectedRow] = React.useState(-1);\n\n  const popupRef = React.useRef();\n  const classes = useStyles(focused);\n\n  let onFocus = () => {\n    setFocus(true);\n  };\n\n  let onBlur = () => {\n    if (!popupRef.current.contains(document.activeElement)) setFocus(false);\n  };\n\n  let onKeyDown = (event) => {\n    if (event.key === \"ArrowLeft\") {\n      if (selectedRow >= 0 && selectedRow < props.emojiArray.length) {\n        let clone = [...props.emojiArray];\n        clone[selectedRow].value--;\n        if (clone[selectedRow].value < 0) {\n          clone[selectedRow].value = 3;\n        }\n        props.onEmojiArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowRight\") {\n      if (selectedRow >= 0 && selectedRow < props.emojiArray.length) {\n        let clone = [...props.emojiArray];\n        clone[selectedRow].value++;\n        if (clone[selectedRow].value > 3) {\n          clone[selectedRow].value = 0;\n        }\n        props.onEmojiArrayChange(clone);\n      }\n    } else if (event.key === \"ArrowDown\") {\n      selectedRow++;\n      if (selectedRow >= props.emojiArray.length) {\n        selectedRow = 0;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"ArrowUp\") {\n      selectedRow--;\n      if (selectedRow < 0) {\n        selectedRow = props.emojiArray.length - 1;\n      }\n      setSelectedRow(selectedRow);\n    } else if (event.key === \"Escape\" || event.key === \"Enter\") {\n      props.inputRef.current.focus();\n    } else {\n      return;\n    }\n\n    event.preventDefault();\n  };\n\n  if (props.emojiArray.length === 0) return null;\n\n  let activeEmojiArray = props.emojiArray.filter((x) => x.value > 0);\n\n  let rowCounter = 0;\n\n  return (\n    <React.Fragment>\n      <div\n        tabIndex={0}\n        onFocus={onFocus}\n        onBlur={onBlur}\n        className={classes.container}\n        onKeyDown={onKeyDown}\n      >\n        {activeEmojiArray.length > 0 ? (\n          activeEmojiArray.map((x) => (\n            <EmojiItem\n              key={x.codePoint}\n              emoji={x.codePoint}\n              text={x.text}\n              value={x.value}\n            />\n          ))\n        ) : (\n          <Typography variant=\"caption\" color=\"textSecondary\">\n            add mood\n          </Typography>\n        )}\n        {focused && (\n          <Zoom in={focused}>\n            <div ref={popupRef} className={classes.popup}>\n              <Typography align=\"center\" variant=\"body1\">\n                {props.text}\n              </Typography>\n\n              {props.emojiArray.map((x) => (\n                <EmojiSetupItem\n                  key={x.codePoint}\n                  isActive={rowCounter++ === selectedRow}\n                  emoji={x.codePoint}\n                  text={x.text}\n                  value={x.value}\n                  onChange={(value) => {\n                    props.onEmojiArrayChange(\n                      props.emojiArray.map((y) =>\n                        y.codePoint === x.codePoint ? { ...y, value } : y\n                      )\n                    );\n                  }}\n                />\n              ))}\n\n              <Typography align=\"center\" variant=\"caption\">\n                Use arrow keys.\n              </Typography>\n            </div>\n          </Zoom>\n        )}\n      </div>\n    </React.Fragment>\n  );\n}\n","import React from \"react\";\nimport {\n  IconButton,\n  InputBase,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { EmojiPicker } from \"./EmojiPicker\";\nimport DeleteIcon from \"@material-ui/icons/Delete\";\nimport moment from \"moment\";\n\nexport const EntryStatus = {\n  // The http request for the text of the entry has been sent.\n  LOADING: \"loading\",\n  // This entry has never been rendered because user never\n  // scrolled to its position.\n  HIDDEN: \"hidden\",\n  // User pressed DELETE button.\n  DELETED: \"deleted\",\n};\n\n// EntryModel is immutable. setLeft setRight delete and clear return a new copy.\nexport class EntryModel {\n  isDataLoaded() {\n    return (\n      this._data !== EntryStatus.LOADING && this._data !== EntryStatus.HIDDEN\n    );\n  }\n\n  isVacant() {\n    return (\n      this.isDataLoaded() &&\n      (this.data === EntryStatus.DELETED ||\n        (this._emojiArrays.every((x) => x.length === 0) &&\n          this.left === \"\" &&\n          this.right === \"\"))\n    );\n  }\n\n  get data() {\n    if (this._data instanceof Object) return { ...this._data };\n    return this._data;\n  }\n\n  get key() {\n    return this._key;\n  }\n\n  get description() {\n    if (!this.isDataLoaded()) return \"\";\n    return this._data.description;\n  }\n\n  get left() {\n    if (!this.isDataLoaded()) return \"\";\n    return this._data.left;\n  }\n\n  get right() {\n    if (!this.isDataLoaded()) return \"\";\n    return this._data.right;\n  }\n\n  get emojiArrays() {\n    return this._emojiArrays;\n  }\n\n  get creationTime() {\n    return this._creationTime;\n  }\n\n  setLeft(left) {\n    if (!this.isDataLoaded()) {\n      console.error(\"bad status\");\n      return this;\n    }\n\n    return new EntryModel(\n      this._key,\n      { ...this._data, left },\n      this._emojiArrays,\n      this._creationTime\n    );\n  }\n\n  setRight(right) {\n    if (!this.isDataLoaded()) {\n      console.error(\"bad status\");\n      return this;\n    }\n    return new EntryModel(\n      this._key,\n      { ...this._data, right },\n      this._emojiArrays,\n      this._creationTime\n    );\n  }\n\n  delete() {\n    return new EntryModel(this._key, EntryStatus.DELETED);\n  }\n\n  clear() {\n    return new EntryModel(this._key, { left: \"\", right: \"\", description: \"\" });\n  }\n\n  show() {\n    return new EntryModel(this._key, EntryStatus.LOADING);\n  }\n\n  setEmojiArrays(left, right) {\n    return this.setDescription(\n      EntryModel._generateDescription(\n        left.map((x) => x.value),\n        right.map((x) => x.value),\n        this._creationTime\n      )\n    );\n  }\n\n  setCreationTime(creationTime) {\n    return this.setDescription(\n      EntryModel._generateDescription(\n        this._emojiArrays[0],\n        this._emojiArrays[1],\n        creationTime\n      )\n    );\n  }\n\n  setDescription(description) {\n    if (!this.isDataLoaded()) {\n      return this;\n    }\n\n    let emojiArrays = [[], []];\n    let creationTime;\n    if (typeof description === \"string\") {\n      const [serializedEmoji, serializedCreationTime] = description.split(\"-\");\n\n      {\n        const all = Array.from(serializedEmoji).map((x) => Number(x));\n        var half_length = Math.ceil(all.length / 2);\n        let left = all.slice(0, half_length);\n        let right = all.slice(half_length);\n        emojiArrays = [left, right];\n      }\n\n      creationTime = new Date(Number(serializedCreationTime));\n      if (isNaN(creationTime.getTime())) {\n        creationTime = null;\n      }\n    }\n    return new EntryModel(\n      this._key,\n      { ...this._data, description },\n      emojiArrays,\n      creationTime\n    );\n  }\n\n  constructor(key, data, emojiArrays, creationTime) {\n    this._data = data;\n    this._key = key;\n\n    this._emojiArrays = emojiArrays != null ? emojiArrays : [[], []];\n    this._creationTime = creationTime;\n  }\n\n  _data;\n  _key;\n  // Cached values for performance. Got recomputed only when setDescription is called.\n  _emojiArrays;\n  _creationTime;\n\n  static _generateDescription(left, right, creationTime) {\n    let descrciption;\n    if (left.every((x) => x === 0) && right.every((x) => x === 0)) {\n      descrciption = \"\";\n    } else {\n      descrciption = left.join(\"\") + right.join(\"\");\n    }\n\n    if (creationTime != null)\n      descrciption = descrciption + \"-\" + creationTime.getTime();\n    return descrciption;\n  }\n}\n\nconst useStyles = makeStyles((theme) => ({\n  inner: {\n    display: \"flex\",\n    flex: 1,\n    flexDirection: \"column\",\n    position: \"relative\",\n  },\n  input: {\n    padding: 0,\n  },\n  outer: {\n    padding: 5,\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    flexDirection: \"row\",\n    border: \"lightgray solid 1px\",\n    borderRadius: 4,\n  },\n  date: {\n    border: \"0px !important\",\n  },\n}));\n\nfunction SubItem({\n  emojiText,\n  emojiArray,\n  onDelete,\n  isFirst,\n  creationTime,\n  onEmojiArrayChange,\n  ...props\n}) {\n  const classes = useStyles();\n  const inputRef = React.useRef();\n  return (\n    <div className={classes.outer}>\n      <div className={classes.inner}>\n        {creationTime && (\n          <Typography\n            variant=\"caption\"\n            onClick={() => inputRef.current.focus()}\n            color=\"textSecondary\"\n            align=\"center\"\n          >\n            {moment(creationTime).format(\"h:mm a\")}\n          </Typography>\n        )}\n\n        <InputBase\n          className={classes.input}\n          fullWidth\n          multiline\n          variant=\"outlined\"\n          inputRef={inputRef}\n          {...props}\n        />\n        <EmojiPicker\n          text={emojiText}\n          onEmojiArrayChange={onEmojiArrayChange}\n          emojiArray={emojiArray}\n          inputRef={inputRef}\n        ></EmojiPicker>\n      </div>\n      {!!onDelete && (\n        <IconButton aria-label=\"delete\" size=\"small\" onClick={onDelete}>\n          <DeleteIcon\n            color={isFirst ? \"disabled\" : \"action\"}\n            fontSize=\"small\"\n          ></DeleteIcon>\n        </IconButton>\n      )}\n    </div>\n  );\n}\n\nexport const Entry = React.forwardRef(\n  (\n    { isFirst, onUpdate, onRightChanged, entry, settings, ...otherProps },\n    ref\n  ) => {\n    const classes = useStyles();\n\n    if (entry instanceof Date) {\n      let dateString = moment(entry).calendar({\n        sameDay: \"[Today], MMM Do, ddd\",\n        lastDay: \"[Yesterday] , MMM Do, ddd\",\n        lastWeek: \"MMM Do YYYY, ddd\",\n        sameElse: \"MMM Do YYYY, ddd\",\n      });\n      return (\n        <tr ref={ref} className={classes.date}>\n          <td colSpan={2}>\n            <Typography variant=\"body2\" align=\"center\" color=\"textSecondary\">\n              {dateString}\n            </Typography>{\" \"}\n          </td>\n        </tr>\n      );\n    }\n\n    console.assert(entry instanceof EntryModel);\n\n    React.useEffect(() => {\n      if (entry.data === EntryStatus.HIDDEN) onUpdate(entry.show());\n    });\n\n    let emojiLeft = [];\n    let emojiRight = [];\n\n    for (let i = 0; i < settings.emojiList.length; i++) {\n      emojiLeft.push({\n        value: entry.emojiArrays[0][i] == null ? 0 : entry.emojiArrays[0][i],\n        ...settings.emojiList[i],\n      });\n      emojiRight.push({\n        value: entry.emojiArrays[1][i] == null ? 0 : entry.emojiArrays[1][i],\n        ...settings.emojiList[i],\n      });\n    }\n\n    const onEntryChanged = (updatedEntry) => {\n      if (isFirst)\n        updatedEntry = updatedEntry.setCreationTime(new Date(Date.now()));\n\n      onUpdate(updatedEntry);\n    };\n\n    return (\n      <tr ref={ref}>\n        <td key=\"issueElement\">\n          <h5>issue</h5>\n          {entry.isDataLoaded() ? (\n            <SubItem\n              color=\"secondary\"\n              creationTime={!isFirst && entry.creationTime}\n              placeholder={\n                isFirst\n                  ? \"Start typing to create a new item.\"\n                  : \"What bothers you?\"\n              }\n              value={entry.left}\n              onChange={(event) =>\n                onEntryChanged(entry.setLeft(event.target.value))\n              }\n              emojiText=\"How do you feel now?\"\n              emojiArray={emojiLeft}\n              onEmojiArrayChange={(newLeftEmojiArray) =>\n                onEntryChanged(\n                  entry.setEmojiArrays(newLeftEmojiArray, emojiRight)\n                )\n              }\n              {...otherProps}\n            ></SubItem>\n          ) : (\n            <Skeleton variant=\"rect\" height={56}></Skeleton>\n          )}\n        </td>\n\n        <td key=\"resolutionElement\">\n          <h5>resolution</h5>\n          {entry.isDataLoaded() ? (\n            <SubItem\n              color=\"primary\"\n              placeholder={\n                isFirst\n                  ? \"Start typing to create a new item.\"\n                  : \"What can you do to resolve the problem?\"\n              }\n              isFirst={isFirst}\n              variant=\"outlined\"\n              value={entry.right}\n              onDelete={(event) => onUpdate(entry.delete())}\n              onChange={(event) =>\n                onEntryChanged(entry.setRight(event.target.value))\n              }\n              emojiText=\"How do you feel after writing resolution?\"\n              emojiArray={emojiRight}\n              onEmojiArrayChange={(newRightEmojiArray) =>\n                onEntryChanged(\n                  entry.setEmojiArrays(emojiLeft, newRightEmojiArray)\n                )\n              }\n              {...otherProps}\n            />\n          ) : (\n            <Skeleton variant=\"rect\" height={56}></Skeleton>\n          )}\n        </td>\n      </tr>\n    );\n  }\n);\n","import React from \"react\";\r\n\r\nclass VirtualizedItem extends React.PureComponent {\r\n  ref = React.createRef();\r\n\r\n  #onHeightChanged = () => {\r\n    if (!!this.ref.current) {\r\n      this.props.onHeightChanged(\r\n        this.props.entry,\r\n        this.ref.current.offsetHeight\r\n      );\r\n    }\r\n  };\r\n\r\n  #resizeObserver = null;\r\n\r\n  componentDidMount() {\r\n    if (!!this.ref.current) {\r\n      this.#onHeightChanged();\r\n      this.#resizeObserver = new ResizeObserver(this.#onHeightChanged);\r\n      this.#resizeObserver.observe(this.ref.current);\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (\r\n      this.ref.current.contains(document.activeElement) &&\r\n      !!this.props.scrollableContainerRef.current\r\n    ) {\r\n      this.props.scrollableContainerRef.current.focus();\r\n    }\r\n\r\n    if (!!this.#resizeObserver) {\r\n      this.#resizeObserver.disconnect();\r\n      this.#resizeObserver = null;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      scrollableContainerRef,\r\n      ItemComponent,\r\n      onHeightChanged,\r\n      ...otherProps\r\n    } = this.props;\r\n\r\n    return <ItemComponent ref={this.ref} {...otherProps} />;\r\n  }\r\n}\r\n\r\nexport function VirtualizedList({\r\n  entries,\r\n  defaultHeight = 30,\r\n  scrollableContainerRef,\r\n  ItemComponent,\r\n  PlaceholderComponent,\r\n  ...restProps\r\n}) {\r\n  const [scrollY, setScrollY] = React.useState(0);\r\n  const [windowHeight, setWindowHeight] = React.useState(window.innerHeight);\r\n\r\n  // |realHeightsMap| asocciates each entry with a height obtained by\r\n  // ResizeObserver.\r\n  //\r\n  // WARINING!!! THis is not a true React state, but a hack allowing GC to\r\n  // eliminate memory leak when some entry is deleted.\r\n  // You cannot clone WeakMap. That's why it's impossible to use it as\r\n  // immutable React state.\r\n  // The alternative is to use Map instead of WeakMap and sync it with |entries|.\r\n  // But, I'd rather choose performance and simplicity over following React\r\n  // guidlines here.\r\n  const [realHeightsMap] = React.useState(new WeakMap());\r\n  const onHeightChanged = React.useCallback(\r\n    (entry, height) => {\r\n      realHeightsMap.set(entry, height);\r\n    },\r\n    [realHeightsMap]\r\n  );\r\n\r\n  const onResizeOrScroll = () => {\r\n    if (!!scrollableContainerRef.current)\r\n      setScrollY(scrollableContainerRef.current.scrollTop);\r\n    setWindowHeight(window.innerHeight);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!!scrollableContainerRef.current)\r\n      scrollableContainerRef.current.onscroll = onResizeOrScroll;\r\n    window.addEventListener(\"resize\", onResizeOrScroll);\r\n    return () => {\r\n      window.removeEventListener(\"resize\", onResizeOrScroll);\r\n    };\r\n  });\r\n\r\n  let visibleEntries = [];\r\n  let currentHeight = 0;\r\n  let placeholderTop = 0;\r\n  let placeholderBottom = 0;\r\n\r\n  let isFirstEntry = true;\r\n  for (let entry of entries) {\r\n    let entryHeight = defaultHeight;\r\n    if (realHeightsMap.has(entry)) {\r\n      entryHeight = realHeightsMap.get(entry);\r\n    }\r\n\r\n    if (currentHeight < scrollY - window.innerHeight) {\r\n      placeholderTop += entryHeight;\r\n    } else if (currentHeight < scrollY + 2 * windowHeight) {\r\n      visibleEntries.push(\r\n        <VirtualizedItem\r\n          key={entry.key}\r\n          isFirst={isFirstEntry}\r\n          onHeightChanged={onHeightChanged}\r\n          entry={entry}\r\n          ItemComponent={ItemComponent}\r\n          scrollableContainerRef={scrollableContainerRef}\r\n          {...restProps}\r\n        />\r\n      );\r\n    } else {\r\n      placeholderBottom += entryHeight;\r\n    }\r\n    currentHeight += entryHeight;\r\n\r\n    isFirstEntry = false;\r\n  }\r\n  if (placeholderTop !== 0) {\r\n    visibleEntries.unshift(\r\n      <PlaceholderComponent height={placeholderTop} key=\"placeholderTop\" />\r\n    );\r\n  }\r\n  if (placeholderBottom !== 0) {\r\n    visibleEntries.push(\r\n      <PlaceholderComponent\r\n        height={placeholderBottom}\r\n        key=\"placeholderBottom\"\r\n      />\r\n    );\r\n  }\r\n\r\n  return visibleEntries;\r\n}\r\n","import React from \"react\";\nimport { Entry } from \"./Entry.js\";\nimport ColumnResizer from \"column-resizer\";\nimport _ from \"lodash\";\n\nimport { withStyles } from \"@material-ui/core\";\nimport { VirtualizedList } from \"./VirtualizedList\";\n\nconst styles = (theme) => ({\n  container: {\n    overflow: \"auto\",\n    flex: 1,\n    willChange: \"transform\",\n  },\n  grip: {\n    width: 10,\n    marginLeft: 5,\n    position: \"absolute\",\n    height: \"100%\",\n    backgroundColor: \"#0000\",\n    cursor: \"col-resize\",\n  },\n  entriesTable: {\n    width: \"100%\",\n    borderSpacing: 0,\n    \"& th\": {\n      backgroundColor: theme.palette.background.paper,\n      zIndex: 3,\n      top: 0,\n      position: \"sticky\",\n      borderSpacing: 0,\n      borderBottom: \"1px solid #000\",\n    },\n    \"& td\": {\n      padding: 2,\n      verticalAlign: \"top\",\n      // ColumnResizer sets it to \"hidden\". This cuts emoji popups.\n      overflow: \"inherit !important\",\n    },\n    \"& td:nth-child(even)\": {\n      borderLeft: \"5px solid #0000\",\n    },\n    \"& td:nth-child(odd)\": {\n      borderRight: \"5px solid #0000\",\n    },\n    \"& h5\": {\n      display: \"none\",\n    },\n\n    [theme.breakpoints.down(\"xs\")]: {\n      \"& thead\": {\n        display: \"none\",\n      },\n\n      \"& h5\": {\n        display: \"block\",\n        margin: 0,\n      },\n\n      \"& tbody tr\": {\n        display: \"grid\",\n        padding: 5,\n        border: \"1px solid #000\",\n      },\n\n      \"& td:nth-child(even)\": {\n        borderLeft: 0,\n      },\n      \"& td:nth-child(odd)\": {\n        borderRight: 0,\n      },\n\n      \"& tbody td\": {\n        display: \"block\",\n      },\n    },\n  },\n});\n\nfunction Placeholder({ height, ...rest }) {\n  return (\n    <tr {...rest}>\n      <td colSpan=\"2\">\n        <div style={{ height }} />\n      </td>\n    </tr>\n  );\n}\n\nclass EntriesTableRaw extends React.PureComponent {\n  state = {\n    entries: [],\n    settings: {\n      emojiList: [\n        { codePoint: 0x1f44e, text: \"discontent\" },\n        { codePoint: 0x1f628, text: \"fear\" },\n        { codePoint: 0x1f622, text: \"sadness\" },\n        { codePoint: 0x1f62d, text: \"grief\" },\n        { codePoint: 0x1f631, text: \"horror\" },\n        { codePoint: 0x1f616, text: \"pain\" },\n        { codePoint: 0x1f621, text: \"anger\" },\n        { codePoint: 0x1f922, text: \"disgust\" },\n      ],\n    },\n  };\n\n  _onEntriesChanged = (entries) => {\n    if (entries.length > 1) {\n      entries = [...entries];\n      let dateToInsert = entries[entries.length - 1].creationTime;\n      for (let i = entries.length - 2; i >= 0; i--) {\n        let currentCreationTime = entries[i].creationTime;\n        if (dateToInsert == null) {\n          dateToInsert = entries[i].creationTime;\n          continue;\n        }\n\n        if (\n          currentCreationTime != null &&\n          currentCreationTime.getYear() === dateToInsert.getYear() &&\n          currentCreationTime.getMonth() === dateToInsert.getMonth() &&\n          currentCreationTime.getDay() === dateToInsert.getDay()\n        ) {\n          continue;\n        }\n\n        dateToInsert.key = \"time\" + dateToInsert.getTime();\n        entries.splice(i + 1, 0, dateToInsert);\n        dateToInsert = currentCreationTime;\n      }\n    }\n    this.setState({ entries });\n  };\n\n  _tableRef = React.createRef();\n  _scrollableContainerRef = React.createRef();\n  _columnResizer = null;\n  _resizeObserver = null;\n\n  componentDidMount() {\n    this.props.model.subscribe(this._onEntriesChanged);\n\n    this._columnResizer = new ColumnResizer(this._tableRef.current, {\n      liveDrag: true,\n      minWidth: 100,\n      gripInnerHtml: `<div class='${this.props.classes.grip}'></div>`,\n      onResize: (e) => {\n        // TextArea adjusts its height only when the browser window\n        // resizes. It ignores resize of its parent.\n        // This logic is encapsulated badly, you cannot change\n        // it without modifying library sources.\n        //\n        // So, the esiest way of forcing TextArea height adjustment is\n        // to dispatch a window resize event hoping that it\n        // won't break anything.\n        window.dispatchEvent(new Event(\"resize\"));\n      },\n    });\n\n    // this._columnResizer doesn't observe resizes of the table.\n    // It listens for browser window \"resize\" events instead.\n    // This doesn't play well when table content asynchronously adjusts\n    // its height listening for the same \"resize\" event.\n    window.removeEventListener(\"resize\", this._columnResizer.onResize);\n    this._resizeObserver = new ResizeObserver(\n      _.throttle(() => {\n        this._columnResizer.onResize();\n      }, 200)\n    );\n    this._resizeObserver.observe(this._tableRef.current);\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.model !== prevProps.model) {\n      prevProps.model.unsubscribe(this._onEntriesChanged);\n      this.props.model.subscribe(this._onEntriesChanged);\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.model.unsubscribe(this._onEntriesChanged);\n\n    this._columnResizer.destroy();\n    this._resizeObserver.unobserve(this._tableRef.current);\n  }\n\n  render() {\n    return (\n      <div\n        ref={this._scrollableContainerRef}\n        className={this.props.classes.container}\n        tabIndex={0}\n      >\n        <table\n          cellPadding={0}\n          cellSpacing={0}\n          className={this.props.classes.entriesTable}\n          ref={this._tableRef}\n        >\n          <thead>\n            <tr>\n              <th>\n                <div>issue</div>\n              </th>\n              <th>\n                <div>resolution</div>\n              </th>\n            </tr>\n          </thead>\n\n          <tbody>\n            <VirtualizedList\n              entries={this.state.entries}\n              ItemComponent={Entry}\n              PlaceholderComponent={Placeholder}\n              scrollableContainerRef={this._scrollableContainerRef}\n              // Additional props for Entry\n              onUpdate={this.props.model.onUpdate}\n              onFocus={this.props.onFocus}\n              settings={this.state.settings}\n            />\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\nexport const EntriesTable = withStyles(styles)(EntriesTableRaw);\n","export class Interface {\n  requireFunction(name, ...args) {\n    setTimeout(() => {\n      if (typeof this[name] !== \"function\")\n        throw new Error(name + \" is not implemented\");\n\n      if (this[name].length !== args.length)\n        throw new Error(name + \" has wrong arguments number\");\n    }, 0);\n  }\n}\n","import { Interface } from \"./Interface.js\";\n\nexport class BackendMap extends Interface {\n  constructor() {\n    super();\n    this.requireFunction(\"createKey\");\n    this.requireFunction(\"delete\", \"key\");\n    this.requireFunction(\"set\", \"key\", \"contentString\");\n    this.requireFunction(\"get\", \"key\");\n    this.requireFunction(\"getMd5\", \"key\");\n    this.requireFunction(\"getAllKeys\");\n    this.requireFunction(\"getSettings\");\n    this.requireFunction(\"setSettings\", \"settings\");\n    this.requireFunction(\"setDescription\", \"key\", \"description\");\n  }\n}\n","import { Interface } from \"./Interface.js\";\nimport { BackendMap } from \"./BackendMap\";\nimport { GDriveStates } from \"./GDriveAuthClient\";\n\nimport { EntryStatus, EntryModel } from \"./Entry\";\n\nexport class EntriesTableModel extends Interface {\n  constructor() {\n    super();\n    this.requireFunction(\"subscribe\", \"callback\");\n    this.requireFunction(\"unsubscribe\", \"callback\");\n    this.requireFunction(\"onUpdate\", \"entry\");\n\n    this.requireFunction(\"undo\");\n    this.requireFunction(\"redo\");\n\n    this.requireFunction(\"sync\");\n  }\n}\n\nexport class EntriesTableModelImpl extends EntriesTableModel {\n  constructor(backendMap, authClient) {\n    console.assert(backendMap instanceof BackendMap);\n    super();\n    this._backendMap = backendMap;\n    this._authClient = authClient;\n    this.sync();\n    window.addEventListener(\"keydown\", this._onKeyPress);\n  }\n\n  dispose() {\n    this._disposed = true;\n    window.removeEventListener(\"keydown\", this._onKeyPress);\n    this._subscriptions = new Set();\n  }\n\n  subscribe(callback) {\n    this._subscriptions.add(callback);\n    if (this._entries.size > 0) callback(this._getFilteredEntriesArray());\n  }\n\n  unsubscribe(callback) {\n    this._subscriptions.delete(callback);\n  }\n\n  undo() {\n    if (this._historyIndex === 0) return;\n\n    this._historyIndex--;\n\n    let entry = this._history[this._historyIndex].old;\n    this._entries.set(entry.key, entry);\n    this._sendEntryToBackend(entry);\n    this._onEntriesChanged();\n  }\n\n  redo() {\n    if (this._historyIndex >= this._history.length) return;\n\n    let entry = this._history[this._historyIndex++].new;\n    this._entries.set(entry.key, entry);\n    this._sendEntryToBackend(entry);\n    this._onEntriesChanged();\n  }\n\n  sync = async () => {\n    if (this._disposed) return;\n\n    while (this._authClient.state !== GDriveStates.SIGNED_IN) {\n      await this._authClient.waitForStateChange();\n    }\n\n    let keys = await this._backendMap.getAllKeys();\n\n    let newEntries = new Map();\n\n    keys.forEach((x) => {\n      let entry;\n      if (this._entries.has(x.id)) {\n        entry = this._entries.get(x.id);\n      } else {\n        x.outdated = true;\n        entry = new EntryModel(\n          x.id,\n          newEntries.size < keys.length - 30\n            ? EntryStatus.HIDDEN\n            : EntryStatus.LOADING\n        );\n      }\n\n      if (\n        entry.isDataLoaded() &&\n        entry.data !== EntryStatus.DELETED &&\n        x.description !== this._descriptions.get(x.id)\n      ) {\n        entry = entry.setDescription(x.description);\n      }\n      newEntries.set(x.id, entry);\n      this._descriptions.set(x.id, x.description);\n    });\n\n    let promises = [];\n    keys.reverse().forEach((x) => {\n      if (x.outdated && newEntries.get(x.id).data !== EntryStatus.HIDDEN) {\n        promises.push(this._fetch(x.id));\n      }\n    });\n\n    if (this._entries.has(null)) {\n      newEntries.set(null, this._entries.get(null));\n    }\n\n    this._entries = newEntries;\n\n    this._onEntriesChanged();\n\n    await Promise.all(promises);\n    setTimeout(this.sync, 15000);\n  };\n\n  onUpdate = (entry) => {\n    if (!this._entries.has(entry.key)) return;\n\n    let prevEntry = this._entries.get(entry.key);\n\n    if (entry.data === EntryStatus.LOADING) {\n      if (prevEntry.data === EntryStatus.HIDDEN) {\n        this._fetch(entry.key);\n        this._entries.set(entry.key, entry);\n      }\n      return;\n    }\n\n    this._sendEntryToBackend(entry);\n    this._addHistoryItem(entry);\n    this._entries.set(entry.key, entry);\n\n    this._onEntriesChanged();\n  };\n\n  _disposed = false;\n  _historyIndex = 0;\n  _history = [];\n  _authClient = null;\n  _backendMap = null;\n\n  // |_entries| is in reverse order.\n  // It is natural for |Map| to add new items to the end, but\n  // in |EntriesTable| new items belong to the top.\n  _entries = new Map();\n  _descriptions = new Map();\n  _subscriptions = new Set();\n\n  _onKeyPress = (e) => {\n    if (e.ctrlKey) {\n      if (e.keyCode === 90) this.undo();\n      else if (e.keyCode === 89) this.redo();\n      else return;\n      e.preventDefault();\n    }\n  };\n\n  _addHistoryItem(newEntry) {\n    if (newEntry.key == null) {\n      throw new Error(\n        \"null key shouldn't have value. There is no point to restore it.\"\n      );\n    }\n\n    if (\n      !this._entries.has(newEntry.key) ||\n      !this._entries.get(newEntry.key).isDataLoaded()\n    ) {\n      return;\n    }\n\n    this._history = this._history.slice(0, this._historyIndex);\n    this._history.push({\n      old: this._entries.has(newEntry.key)\n        ? this._entries.get(newEntry.key)\n        : new EntryModel(newEntry.key, {}).delete(),\n      new: newEntry,\n    });\n    this._historyIndex = this._history.length;\n  }\n\n  async _sendEntryToBackend(entry) {\n    let { description, ...data } = entry.data;\n    if (entry.data === EntryStatus.DELETED) {\n      data = EntryStatus.DELETED;\n      description = \"\";\n    }\n\n    let descriptionPromise = null;\n    if (description !== this._descriptions.get(entry.key)) {\n      descriptionPromise = this._backendMap.setDescription(\n        entry.key,\n        description\n      );\n      this._descriptions.set(entry.key, description);\n    }\n\n    await Promise.all([\n      descriptionPromise,\n      this._backendMap.set(entry.key, JSON.stringify(data)),\n    ]);\n  }\n\n  _fetch = async (key) => {\n    let content = await this._backendMap.get(key);\n\n    if (!this._entries.has(key)) {\n      console.error(\"Entry for fetch doesn't exist anymore. \" + key);\n      return;\n    }\n\n    if (content === undefined) {\n      console.error(\"Key \" + key + \" is missing\");\n      this._entries.delete(key);\n      this._onEntriesChanged();\n      return;\n    }\n\n    try {\n      if (content === \"\") {\n        let entry = new EntryModel(key, {}).delete();\n        this._addHistoryItem(entry);\n        this._entries.set(key, entry);\n      } else {\n        const data = JSON.parse(content);\n\n        if (\n          data !== EntryStatus.DELETED &&\n          (data.left == null || data.right == null)\n        ) {\n          throw new Error(\"bad format \" + content);\n        }\n\n        let entry = new EntryModel(key, data);\n\n        if (data !== EntryStatus.DELETED)\n          entry = entry.setDescription(this._descriptions.get(key));\n\n        this._addHistoryItem(entry);\n        this._entries.set(key, entry);\n      }\n    } catch (e) {\n      console.error(e.message + \" \" + key + \" \" + content);\n      if (!this._entries.get(key).isDataLoaded()) {\n        this._entries.delete(key);\n        this._descriptions.delete(key);\n        this._backendMap.delete(key);\n      }\n    }\n\n    this._onEntriesChanged();\n  };\n\n  _getFilteredEntriesArray() {\n    let reverseEntriesArray = Array.from(this._entries.values()).reverse();\n\n    // If user deletes entries from top of the table than keys assigned to these\n    // entries can be reused again.\n    let lastVacantIndex = -1;\n    for (let entry of reverseEntriesArray) {\n      if (entry.isVacant()) {\n        lastVacantIndex++;\n        continue;\n      }\n      break;\n    }\n\n    let filteredEntries = reverseEntriesArray.slice(\n      lastVacantIndex > 0 ? lastVacantIndex : 0\n    );\n\n    if (filteredEntries.length === 0) return filteredEntries;\n\n    if (filteredEntries[0].data === EntryStatus.DELETED) {\n      filteredEntries[0] = filteredEntries[0].clear();\n    }\n\n    filteredEntries = filteredEntries.filter(\n      (x) => x.data !== EntryStatus.DELETED && x.key !== null\n    );\n    return filteredEntries;\n  }\n\n  _onEntriesChanged = async () => {\n    let filteredEntriesArray = this._getFilteredEntriesArray();\n    if (filteredEntriesArray.length > 0)\n      this._notifySubscribers(filteredEntriesArray);\n    // There always should be an empty entry on top of the table.\n    // The table doesn't have ADD NEW ITEM button. Instead user should\n    // start typing in the top empty entry to add a new one.\n    if (\n      filteredEntriesArray.length === 0 ||\n      (filteredEntriesArray[0].isDataLoaded() &&\n        !filteredEntriesArray[0].isVacant())\n    ) {\n      if (this._entries.has(null)) {\n        return;\n      }\n      this._entries.set(null, new EntryModel(null, {}).delete());\n\n      let newKey = await this._backendMap.createKey();\n\n      if (!this._entries.has(null)) {\n        throw new Error(\n          \"A null key should persist until the new key is created\"\n        );\n      }\n\n      let newEntry = new EntryModel(newKey, this._entries.get(null).data);\n\n      this._entries.set(newKey, newEntry);\n      await this._sendEntryToBackend(newEntry);\n\n      this._entries.delete(null);\n\n      await this._onEntriesChanged();\n      return;\n    }\n  };\n\n  _notifySubscribers(entries) {\n    this._subscriptions.forEach((callback) => {\n      callback(entries);\n    });\n  }\n}\n","import { gdriveAuthClient, GDriveStates } from \"./GDriveAuthClient.js\";\nimport { BackendMap } from \"./BackendMap.js\";\n\nclass GDriveMap extends BackendMap {\n  #settings_key = null;\n  async _getSettingsKey() {\n    if (this.#settings_key !== null) {\n      return this.#settings_key;\n    }\n\n    let keys = await find('name = \"settings.json\"');\n    if (keys.length === 0) {\n      return await createEmptyFile(\"settings.json\");\n    }\n    if (keys.length === 1) {\n      return keys[0].id;\n    }\n\n    console.error(\"Invalid state. Multiple settings.json. \");\n    let [firstKey, ...restKeys] = keys;\n\n    restKeys.map((x) => deleteFile(x));\n    return firstKey;\n  }\n\n  async createKey() {\n    throwIfNotSignedIn();\n    return await createEmptyFile(\"item.json\");\n  }\n\n  async delete(key) {\n    throwIfNotSignedIn();\n    return await deleteFile(key);\n  }\n\n  async set(key, value) {\n    throwIfNotSignedIn();\n    return await upload(key, value);\n  }\n\n  async get(key) {\n    throwIfNotSignedIn();\n    let result = await download(key);\n    return result;\n  }\n\n  async getMd5(key) {\n    throwIfNotSignedIn();\n    return await getMd5(key);\n  }\n\n  async getAllKeys() {\n    throwIfNotSignedIn();\n    let result = await find('name = \"item.json\"');\n    result.forEach((element) => {\n      if (!element.description) element.description = \"\";\n    });\n    return result;\n  }\n\n  async getSettings() {\n    throwIfNotSignedIn();\n    return await download(await this._getSettingsKey());\n  }\n\n  async setSettings(settingsContent) {\n    throwIfNotSignedIn();\n    await upload(await this._getSettingsKey(), settingsContent);\n  }\n\n  async setDescription(key, description) {\n    throwIfNotSignedIn();\n    return patchDescription(key, description);\n  }\n}\n\nexport const gdriveMap = new GDriveMap();\nObject.seal(gdriveMap);\n\n// PRIVATE SECTION\n// Borrowed from here: https://habr.com/ru/post/440844/\n\nfunction throwIfNotSignedIn() {\n  if (gdriveAuthClient.state !== GDriveStates.SIGNED_IN)\n    throw new Error(\"Incorrect state. Sign in to continue.\");\n}\n\nfunction prom(gapiCall, argObj) {\n  let stack = new Error().stack;\n  return new Promise((resolve, reject) => {\n    gapiCall(argObj).then(\n      (resp) => {\n        if (resp && (resp.status < 200 || resp.status > 299)) {\n          console.log(\"GAPI call returned bad status\", stack, resp);\n          reject(resp);\n        } else {\n          resolve(resp);\n        }\n      },\n      (err) => {\n        console.log(\"GAPI call failed \", stack, err);\n        reject(err);\n      }\n    );\n  });\n}\n\n// returns fileId\nasync function createEmptyFile(name, mimeType) {\n  const resp = await prom(window.gapi.client.drive.files.create, {\n    resource: {\n      name: name,\n      mimeType: mimeType || \"text/plain\",\n      parents: [\"appDataFolder\"],\n    },\n    fields: \"id\",\n  });\n  return resp.result.id;\n}\n\nasync function patchDescription(fileId, description) {\n  console.assert(typeof description === \"string\");\n\n  const boundary = \"-------314159265358979323846\";\n  const delimiter = \"\\r\\n--\" + boundary + \"\\r\\n\";\n  const close_delim = \"\\r\\n--\" + boundary + \"--\";\n\n  let multipartRequestBody =\n    delimiter +\n    \"Content-Type: application/json\\r\\n\\r\\n\" +\n    JSON.stringify({ description }) +\n    close_delim;\n\n  await prom(window.gapi.client.request, {\n    path: `/upload/drive/v3/files/${fileId}`,\n    method: \"PATCH\",\n    params: { uploadType: \"multipart\" },\n    body: multipartRequestBody,\n    headers: {\n      \"Content-Type\": 'multipart/mixed; boundary=\"' + boundary + '\"',\n    },\n  });\n}\n\nasync function upload(fileId, content) {\n  console.assert(typeof content === \"string\");\n  await prom(window.gapi.client.request, {\n    path: `/upload/drive/v3/files/${fileId}`,\n    method: \"PATCH\",\n    params: { uploadType: \"media\" },\n    fields: \"md5Checksum\",\n    body: content,\n  });\n}\n\nasync function getMd5(fileId) {\n  let result = await prom(window.gapi.client.request, {\n    path: `/drive/v3/files/${fileId}`,\n    method: \"GET\",\n    params: { fields: \"md5Checksum\" },\n  });\n\n  return result.result.md5Checksum;\n}\n\nasync function download(fileId) {\n  try {\n    const resp = await prom(window.gapi.client.drive.files.get, {\n      fileId: fileId,\n      alt: \"media\",\n    });\n\n    return resp.body;\n  } catch (e) {\n    if (e.status !== 404) throw e;\n    return undefined;\n  }\n}\n\n// returns file ids sorted by creation time\nasync function find(query) {\n  try {\n    let ret = [];\n    let token;\n    do {\n      const resp = await prom(window.gapi.client.drive.files.list, {\n        spaces: \"appDataFolder\",\n        fields: \"files(id, description, md5Checksum), nextPageToken\",\n        pageSize: 1000,\n        pageToken: token,\n        orderBy: \"createdTime\",\n        q: query,\n      });\n      ret = ret.concat(resp.result.files);\n      token = resp.result.nextPageToken;\n    } while (token);\n    return ret;\n  } catch {\n    return [];\n  }\n}\n\nasync function deleteFile(fileId) {\n  try {\n    await prom(window.gapi.client.drive.files.delete, {\n      fileId: fileId,\n    });\n    return true;\n  } catch (err) {\n    if (err.status === 404) {\n      return false;\n    }\n    throw err;\n  }\n}\n","import { BackendMap } from \"./BackendMap\";\nimport _ from \"lodash\";\nimport md5 from \"md5\";\nimport { Mutex } from \"async-mutex\";\n\nconst chunkSize = 8;\n\nexport function applyQuotaSavers(backendMap) {\n  return new BackendMultiplexor(new GetThrottler(new ErrorHandler(backendMap)));\n}\n\n// Asociates several pseudo keys with each Google Drive key.\n// Reduces amount of calls to _innerBackendMap methods without changing\n// its interface.\n//\n// Prevents users of this class from accessing md5 because server cannot\n// compute md5 for multiplexed sub-items.\n// It replaces |md5checksum| with |outdated|=true in getAllKeys result.\n// |outdated| means that the server has fresher data so the client\n// should call |get| for it.\nexport class BackendMultiplexor extends BackendMap {\n  constructor(innerMap) {\n    super();\n    if (!innerMap instanceof BackendMap)\n      throw new Error(\n        \"CachingBackendMap have to accepts instance of BackendMap\"\n      );\n    this._innerBackendMap = innerMap;\n  }\n\n  async createKey() {\n    let release = await this._changeKeysMutex.acquire();\n    try {\n      if (this._innerKeys === null) {\n        throw new Error(\"You should call getAllKeys first\");\n      }\n\n      let getLastInnerKey = () => {\n        if (this._innerKeys.length === 0) return undefined;\n        return this._innerKeys[this._innerKeys.length - 1];\n      };\n\n      if (\n        this._innerKeys.length === 0 ||\n        this._chunks.get(getLastInnerKey()).isFull()\n      ) {\n        let newInnerKey = await this._innerBackendMap.createKey();\n        this._innerKeys.push(newInnerKey);\n        this._chunks.set(\n          newInnerKey,\n          new this._Chunk({\n            connector: this._createChunkConnector(newInnerKey),\n          })\n        );\n      }\n\n      let innerKey = getLastInnerKey();\n      let keyPrefix = await this._chunks.get(innerKey).createSubKey();\n      return keyPrefix + \"-\" + innerKey;\n    } finally {\n      release();\n    }\n  }\n\n  async delete(key) {\n    let release = await this._changeKeysMutex.acquire();\n    try {\n      const { prefixKey, innerKey } = this._splitOuterKey(key);\n      if (!this._chunks.has(innerKey)) return;\n\n      await this._chunks.get(innerKey).delete(prefixKey);\n    } finally {\n      release();\n    }\n  }\n\n  async set(key, value) {\n    const { prefixKey, innerKey } = this._splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return;\n    this._chunks.get(innerKey).setValue(prefixKey, value);\n  }\n\n  async getMd5(key) {\n    throw new Error(\n      \"Don't call getMd5 on this class. \" +\n        \"Server cannot compute md5 for this item because it is multiplexed.\" +\n        \"In order to sync call |getAllKeys| and if some item has |outdated===true| call |get|.\"\n    );\n  }\n\n  async get(key) {\n    const { prefixKey, innerKey } = this._splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return undefined;\n    return this._chunks.get(innerKey).getValue(prefixKey);\n  }\n\n  async getAllKeys() {\n    let release = await this._changeKeysMutex.acquire();\n    try {\n      let newInnerKeys = await this._innerBackendMap.getAllKeys();\n      let outerKeys = [];\n      let newChunks = new Map();\n      let counter = 0;\n\n      newInnerKeys.forEach((innerKey) => {\n        let outdated = true;\n        let isFirstChunk = counter++ === 0;\n\n        if (this._chunks.has(innerKey.id)) {\n          let chunk = this._chunks.get(innerKey.id);\n          newChunks.set(innerKey.id, chunk);\n\n          outdated = chunk.onMetadataUpdate(\n            innerKey.description,\n            innerKey.md5Checksum\n          ).outdated;\n        } else {\n          newChunks.set(\n            innerKey.id,\n            new this._Chunk({\n              connector: this._createChunkConnector(innerKey.id),\n              serializedDescriptions: innerKey.description,\n              isFirstChunk,\n            })\n          );\n        }\n        let chunk = newChunks.get(innerKey.id);\n        chunk.listSubKeys().forEach((subkey) => {\n          outerKeys.push({\n            id: subkey + \"-\" + innerKey.id,\n            outdated,\n            description: chunk.getDescription(subkey),\n          });\n        });\n      });\n\n      this._chunks = newChunks;\n      this._innerKeys = newInnerKeys.map((x) => x.id);\n\n      return outerKeys;\n    } finally {\n      release();\n    }\n  }\n\n  async getSettings() {\n    return await this._innerBackendMap.getSettings();\n  }\n\n  async setSettings(settingsContent) {\n    return await this._innerBackendMap.setSettings(settingsContent);\n  }\n\n  async setDescription(key, description) {\n    const { prefixKey, innerKey } = this._splitOuterKey(key);\n    if (!this._chunks.has(innerKey)) return;\n    this._chunks.get(innerKey).setDescription(prefixKey, description);\n  }\n\n  // PRIVATE SECTION\n  _changeKeysMutex = new Mutex();\n\n  _innerKeys = null;\n  _innerBackendMap = null;\n\n  _createChunkConnector = (innerkey) => {\n    return {\n      setValue: (serializedValue) => {\n        this._innerBackendMap.set(innerkey, serializedValue);\n      },\n      setDescription: (serializedDescription) => {\n        this._innerBackendMap.setDescription(innerkey, serializedDescription);\n      },\n      getValue: async () => {\n        return await this._innerBackendMap.get(innerkey);\n      },\n      delete: async () => {\n        this._innerKeys.splice(this._innerKeys.indexOf(innerkey), 1);\n        this._chunks.delete(innerkey);\n        await this._innerBackendMap.delete(innerkey);\n      },\n    };\n  };\n\n  // Contains instances of |this._Chunk| for each key inside |this._innerKeys|.\n  _chunks = new Map();\n\n  // Each inner key contains a chunk of outer keys.\n  // If innerBackendMap creates key \"abcdefg\", BackendMultiplexor will\n  // use it to store chunk of sub-keys : \"0-abcdefg\", \"1-abcdefg\", ..., \"chunkSize-abcdefg\"\n  //\n  // To get \"4-abcdefg\" description you should make the next call:\n  // this._chunks[\"abcdefg\"].getDescription(4)\n  //\n  // md5Checksum is common for all subkeys.\n  _Chunk = class {\n    constructor({ connector, serializedDescriptions }) {\n      this._connector = connector;\n      if (serializedDescriptions === undefined) {\n        this._values = Array(chunkSize).fill(\"\");\n        this._descriptions = [];\n        this._isDirty = true;\n      } else {\n        this._serializedDescriptions = serializedDescriptions;\n        this._isDirty = false;\n        this._descriptions = serializedDescriptions\n          .split(\",\")\n          .map((x) => (x === \"null\" ? null : x));\n      }\n    }\n\n    isFull() {\n      return this._descriptions.length >= chunkSize;\n    }\n\n    listSubKeys() {\n      let subkeys = [];\n      for (let i = 0; i < this._descriptions.length && i < chunkSize; i++)\n        if (this._descriptions[i] != null) subkeys.push(i);\n      return subkeys;\n    }\n\n    async createSubKey() {\n      this._shouldKeepOnFormatError = true;\n\n      try {\n        if (this._values == null) await this._fetchValuesSynchronised();\n        if (this._values == null) return null;\n\n        if (this.isFull())\n          throw new Error(\"Do not call createSubKey for full chunks\");\n\n        let subkey = this._descriptions.length;\n        this._descriptions.push(\"\");\n        // Just to set correct state;\n        this.setDescription(subkey, \"\");\n\n        return subkey;\n      } finally {\n        this._shouldKeepOnFormatError = false;\n      }\n    }\n\n    async delete(subkey) {\n      if (this._descriptions[subkey] == null)\n        throw new Error(\"item is already deleted\");\n      if (this._descriptions.filter((x) => x != null).length === 1)\n        await this._connector.delete();\n      else this.setDescription(subkey, null);\n    }\n\n    async setValue(subkey, value) {\n      if (this._values == null) await this._fetchValuesSynchronised();\n      if (this._values == null) return;\n\n      this._values[subkey] = value;\n      this._isDirty = true;\n      this._serializedValues = null;\n      this._onValueSet();\n    }\n\n    async getValue(subkey) {\n      if (this._descriptions[subkey] === null) return undefined;\n      if (this._values == null) await this._fetchValuesSynchronised();\n      if (this._values == null) return undefined;\n\n      return this._values[subkey];\n    }\n\n    setDescription(subkey, description) {\n      if (\n        subkey >= this._descriptions.length ||\n        this._descriptions[subkey] == null\n      ) {\n        throw new Error(\n          \"null description means subkey doesn't exist. Did you call createKey?\"\n        );\n      }\n\n      this._descriptions[subkey] = description;\n      this._serializedDescriptions = null;\n      this._isDirty = true;\n\n      this._onDescriptionSet();\n    }\n\n    getDescription(subkey) {\n      return this._descriptions[subkey];\n    }\n\n    onMetadataUpdate(serializedDescriptions, md5Checksum) {\n      if (this._isDirty) {\n        if (\n          this._serializedValues != null &&\n          this._serializedDescriptions != null &&\n          md5(this._serializedValues) === md5Checksum &&\n          this._serializedDescriptions === serializedDescriptions\n        ) {\n          this._isDirty = false;\n          this._initialMd5Checksum = md5Checksum;\n        }\n        return { outdated: false };\n      }\n\n      if (this._serializedDescriptions !== serializedDescriptions) {\n        this._serializedDescriptions = serializedDescriptions;\n\n        this._descriptions = serializedDescriptions\n          .split(\",\")\n          .map((x) => (x === \"null\" ? null : x));\n      }\n\n      if (this._initialMd5Checksum !== md5Checksum) {\n        this._serializedValues = null;\n        this._values = null;\n        return { outdated: true };\n      }\n\n      return { outdated: false };\n    }\n\n    // PRIVATE SECTION\n\n    // |values| and |descriptions| are arrays containing up-to chunkSize elements.\n    _values;\n    _descriptions;\n\n    // result of JSON.stringify(this.values);\n    _serializedValues;\n    _serializedDescriptions;\n\n    _connector;\n\n    // |isDirty| is set true when |set| for one of subkeys has been called.\n    // In that case BackendMultiplexor will think that it has the most fresh data\n    // and it will ignore updates in |getAllKeys| until it contains |md5Checksum|\n    // equal to md5(this.serializedValues).\n    _isDirty;\n\n    // This is md5 checksum for values acquired from server.\n    // It is used only when |isDirty| === false.\n    _initialMd5Checksum;\n\n    _onValueSet = _.debounce(() => {\n      this._serializedValues = JSON.stringify(this._values);\n      this._connector.setValue(this._serializedValues);\n    }, 1000);\n\n    _onDescriptionSet = _.debounce(() => {\n      this._serializedDescriptions = this._descriptions\n        .map((x) => (x === null ? \"null\" : x))\n        .join(\",\");\n\n      this._connector.setDescription(this._serializedDescriptions);\n    }, 1000);\n\n    _fetchValuesSynchronised = async () => {\n      if (this._fetchPromise == null) {\n        this._fetchPromise = this._fetchValues();\n      }\n      await this._fetchPromise;\n      this._fetchPromise = null;\n    };\n    _fetchPromise = null;\n    _fetchValues = async () => {\n      let serializedValues = await this._connector.getValue();\n      try {\n        let values = JSON.parse(serializedValues);\n        if (!Array.isArray(values)) {\n          throw new Error(\"Bad server data. Not valid array\");\n        }\n\n        while (values.length < this._descriptions.length) {\n          values.push(\"\");\n        }\n        this._values = values;\n        this._serializedValues = serializedValues;\n        this._initialMd5Checksum = md5(serializedValues);\n        this._isDirty = false;\n      } catch (error) {\n        // In theory, server may contain arbitrary data.\n        // BackendMultiplexor should be able recover in this case.\n        console.error(\n          \"Bad response from server:\" + error.message + \" \" + serializedValues\n        );\n        if (this._shouldKeepOnFormatError) {\n          this._values = Array(chunkSize).fill(\"\");\n          this._isDirty = true;\n          this._serializedValues = null;\n          this._onValueSet();\n        } else {\n          this._connector.delete();\n        }\n      }\n    };\n  };\n\n  _splitOuterKey = (outerKey) => {\n    let separator = outerKey.indexOf(\"-\");\n    let prefixKey = Number(outerKey.substring(0, separator));\n    let innerKey = outerKey.substring(separator + 1);\n    return { prefixKey, innerKey };\n  };\n}\n\nexport class ErrorHandler extends BackendMap {\n  constructor(innerMap) {\n    super();\n    if (!innerMap instanceof BackendMap)\n      throw new Error(\n        \"CachingBackendMap have to accepts instance of BackendMap\"\n      );\n    this._innerBackendMap = innerMap;\n  }\n\n  async _exponentialRetry(callback) {\n    let retriesCount = 1;\n    while (retriesCount < 6) {\n      try {\n        return await callback();\n      } catch (error) {\n        let secondsToNextRetry = 1 * 2 ** retriesCount++;\n        console.error(\n          `Failed running ${callback.name} : ${error.message}. Will try again after ${secondsToNextRetry} seconds.`\n        );\n        await this._sleep(secondsToNextRetry * 1000);\n      }\n    }\n\n    console.error(\"finish retry attempts\");\n  }\n\n  async createKey() {\n    return await this._exponentialRetry(\n      this._innerBackendMap.createKey.bind(this._innerBackendMap)\n    );\n  }\n\n  async delete(key) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.delete.bind(this._innerBackendMap, key)\n    );\n  }\n\n  async set(key, value) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.set.bind(this._innerBackendMap, key, value)\n    );\n  }\n\n  async get(key) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.get.bind(this._innerBackendMap, key)\n    );\n  }\n\n  async getMd5(key) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.getMd5.bind(this._innerBackendMap, key)\n    );\n  }\n\n  async getAllKeys() {\n    return await this._exponentialRetry(\n      this._innerBackendMap.getAllKeys.bind(this._innerBackendMap)\n    );\n  }\n\n  async getSettings() {\n    return await this._exponentialRetry(\n      this._innerBackendMap.getSettings.bind(this._innerBackendMap)\n    );\n  }\n\n  async setSettings(settingsContent) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.setSettings.bind(\n        this._innerBackendMap,\n        settingsContent\n      )\n    );\n  }\n\n  async setDescription(key, description) {\n    return await this._exponentialRetry(\n      this._innerBackendMap.setDescription.bind(\n        this._innerBackendMap,\n        key,\n        description\n      )\n    );\n  }\n\n  _innerBackendMap = null;\n  _sleep(ms) {\n    return new Promise((resolve) => setTimeout(resolve, ms));\n  }\n}\n\nexport class GetThrottler extends BackendMap {\n  _innerBackendMap = null;\n  constructor(innerMap) {\n    super();\n    if (!innerMap instanceof BackendMap)\n      throw new Error(\n        \"CachingBackendMap have to accepts instance of BackendMap\"\n      );\n    this._innerBackendMap = innerMap;\n  }\n\n  createKey() {\n    return this._innerBackendMap.createKey();\n  }\n\n  delete(key) {\n    return this._innerBackendMap.delete(key);\n  }\n\n  set(key, value) {\n    return this._innerBackendMap.set(key, value);\n  }\n\n  async get(key) {\n    return await new Promise((resolve) => {\n      this._pendingGetRequests.set(key, resolve);\n\n      if (this._handlePendingRequests === null) {\n        this._handlePendingRequests = async () => {\n          while (true) {\n            let handleSingleRequest = async () => {\n              if (this._pendingGetRequests.size === 0) {\n                this._handlePendingRequests = null;\n                return false;\n              }\n\n              let [\n                key,\n                callback,\n              ] = this._pendingGetRequests.entries().next().value;\n              this._pendingGetRequests.delete(key);\n              callback(await this._innerBackendMap.get(key));\n              return true;\n            };\n\n            let results = await Promise.all([\n              handleSingleRequest(),\n              handleSingleRequest(),\n              handleSingleRequest(),\n              handleSingleRequest(),\n            ]);\n            if (results.every((x) => x === false)) return;\n          }\n        };\n        this._handlePendingRequests();\n      }\n    });\n  }\n\n  getMd5(key) {\n    return this._innerBackendMap.getMd5(key);\n  }\n\n  getAllKeys() {\n    return this._innerBackendMap.getAllKeys();\n  }\n\n  getSettings() {\n    return this._innerBackendMap.getSettings();\n  }\n\n  setSettings(settingsContent) {\n    return this._innerBackendMap.setSettings(settingsContent);\n  }\n\n  setDescription(key, description) {\n    return this._innerBackendMap.setDescription(key, description);\n  }\n\n  _pendingGetRequests = new Map();\n\n  _handlePendingRequests = null;\n}\n","import React, { useEffect } from \"react\";\r\nimport { EntriesTable } from \"./EntriesTable.js\";\r\nimport { EntriesTableModelImpl } from \"./EntriesTableModel\";\r\nimport { gdriveAuthClient, GDriveStates } from \"./GDriveAuthClient\";\r\nimport { gdriveMap } from \"./GDriveMap\";\r\nimport { applyQuotaSavers } from \"./BackendQuotaSavers\";\r\nimport { Typography, makeStyles } from \"@material-ui/core\";\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    flex: 1,\r\n    display: \"flex\",\r\n    justifyContent: \"center\",\r\n    alignItems: \"center\",\r\n  },\r\n});\r\nfunction CenteredTypography(props) {\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.container}>\r\n      <Typography variant=\"h4\" {...props}>\r\n        {props.children}\r\n      </Typography>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport function AppContent(props) {\r\n  const [signInState, setSignInState] = React.useState(gdriveAuthClient.state);\r\n  const [model, setModel] = React.useState(null);\r\n\r\n  useEffect(() => {\r\n    gdriveAuthClient.waitForStateChange().then((newState) => {\r\n      if (newState === GDriveStates.SIGNED_IN) {\r\n        setModel(\r\n          new EntriesTableModelImpl(\r\n            applyQuotaSavers(gdriveMap),\r\n            gdriveAuthClient\r\n          )\r\n        );\r\n      } else {\r\n        if (!!model) model.dispose();\r\n        setModel(null);\r\n      }\r\n      setSignInState(newState);\r\n    });\r\n  });\r\n\r\n  if (signInState === GDriveStates.SIGNED_IN && !!model) {\r\n    return <EntriesTable {...props} model={model} />;\r\n  } else if (signInState === GDriveStates.SIGNED_OUT) {\r\n    return <CenteredTypography>Sign in to proceed...</CenteredTypography>;\r\n  } else {\r\n    return <CenteredTypography> Loading...</CenteredTypography>;\r\n  }\r\n}\r\n","import React from \"react\";\nimport \"./App.css\";\nimport \"fontsource-roboto\";\nimport {\n  createMuiTheme,\n  CssBaseline,\n  ThemeProvider,\n  useMediaQuery,\n} from \"@material-ui/core\";\nimport { AppMenu } from \"./AppMenu.js\";\nimport { AppContent } from \"./AppContent.js\";\n\nfunction App() {\n  const prefersDarkMode = useMediaQuery(\"(prefers-color-scheme: dark)\");\n\n  const theme = React.useMemo(\n    () =>\n      createMuiTheme({\n        palette: {\n          type: prefersDarkMode ? \"dark\" : \"light\",\n        },\n      }),\n    [prefersDarkMode]\n  );\n  const [appBarShown, setAppBarShown] = React.useState(true);\n  const onTableEntryFocus = React.useCallback((arg) => {\n    if (window.innerHeight < 700) {\n      setAppBarShown(false);\n    }\n  }, []);\n\n  const showAppBar = React.useCallback((arg) => {\n    setAppBarShown(true);\n  }, []);\n\n  return (\n    <ThemeProvider theme={theme}>\n      <CssBaseline />\n      <AppMenu shown={appBarShown} onShow={showAppBar}></AppMenu>\n\n      <AppContent onFocus={onTableEntryFocus} />\n    </ThemeProvider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}